{"version":3,"file":"sdk_stockthumbs.js","names":["stockThumbsConfig","stockThumbsMain","jqLoaded","window","StockThumbs","init","config","custom","addEventListener","e","loadScripts","target","removeEventListener","stm","Object","assign","getFilters","setFilters","AdobeStock","stc","utils","includePath","PATH","getTrackingUrl","url","cfg","camRef","encodeURIComponent","pubRef","getHost","host","document","location","hostname","base","querySelector","href","tmpLink","createElement","stockHomeUrl","getCtaText","fmfUrl","videoUrl","cta","fmf","video","ctaLink","sbHeader","parseFilters","filters","searchFilters","$jq","filterMap","entries","stkParams","SEARCH_PARAMS","forEach","key","currentValue","value","prototype","hasOwnProperty","call","undefined","firstImg","getSrcSet","srcset","split","attr","$el","isInput","is","phrase","val","text","keywords","keywordx","extract","language","remove_digits","return_changed_case","remove_duplicates","keywordCount","searchWords","length","slice","join","sizes","targetSize","indexOf","reduce","a","b","newSize","Math","abs","$getContDiv","el","mainClass","dataId","$tempDiv","$dataDiv","find","hasClass","$mainDiv","addClass","append","Error","updateUiThumbs","files","wrapClass","bodyClass","itemClass","tipClass","iconClass","columns","RESULT_COLUMNS","$sb","parentId","$wrapDiv","$thumbsDiv","width","videoSvg","asset","DETAILS_URL","div","className","link","thumb","videoSupport","MEDIA_TYPE_ID","source","preload","poster","THUMBNAIL_URL","loop","setAttribute","src","VIDEO_SMALL_PREVIEW_URL","type","VIDEO_SMALL_PREVIEW_CONTENT_TYPE","appendChild","iconDiv","svg","createRange","createContextualFragment","tag","THUMBNAIL_HTML_TAG","tooltips","tip","tipText","title","textContent","removeAttribute","$tip","$link","showTip","stopPropagation","preventDefault","$img","currentTarget","$off1","offset","$off2","newPos","top","height","left","css","show","hideTip","hide","hover","insertBefore","lastChild","masonry","itemSelector","imagesLoaded","progress","done","setTimeout","visibility","opacity","doSearch","params","defaultParams","limit","searchParams","queryParams","locale","search_parameters","resultColumns","hasCustomColumns","Boolean","result_columns","imageColumns","NB_RESULTS","videoColumns","TITLE","concat","tempFields","stkResults","field","push","stock","apiKey","appName","ENVIRONMENT","PROD","iterator","searchFiles","next","then","response","getResponse","nb_results","catch","err","result","callback","apply","exec","$stockThumbs","$header","error","filename","stack","stacktrace","sourceUrl","current","loc","matcher","name","matchedLoc","lastIndexOf","ex","replace","notify","eventName","event","Event","dispatchEvent","SS","jQuery","noConflict","reqs","imagesloaded","adobestocklib","include","exclude","multiLoad","info","Promise","resolve","reject","scriptTag","async","onload","onerror","body","scriptArr","values","map","script","promiseData","all","Masonry","domReadyHandler","c","attachEvent","cmpVersions","i","diff","regExStrip0","segmentsA","segmentsB","l","min","parseInt","isJQCalled","checkJQ","timerId","jquery","jQ","onreadystatechange","clearTimeout"],"sources":["../src/sdk_stockthumbs.js"],"sourcesContent":["/* eslint-disable no-console */\n(() => {\n  let stockThumbsConfig = {};\n  let stockThumbsMain = null;\n  let jqLoaded;\n  // expose global object\n  window.StockThumbs = {\n    init: (config) => {\n      stockThumbsConfig = config;\n      // rules for app to use alternate options\n      stockThumbsConfig.custom = config.custom;\n      window.addEventListener('jQueryLoaded', (e) => {\n        // prevents a double event\n        const loadScripts = jqLoaded(stockThumbsConfig);\n        e.target.removeEventListener('jQueryLoaded', loadScripts, false);\n      }, false);\n      window.addEventListener('StockThumbsReady', () => {\n        console.log('StockThumbs ready');\n        const stm = stockThumbsMain();\n        const { StockThumbs } = window;\n        // merge custom config rules with global config\n        if (StockThumbs.config && StockThumbs.config.custom) {\n          stockThumbsConfig.custom = Object.assign(config.custom, StockThumbs.config.custom);\n          // initialize custom code with config and main object\n          if (StockThumbs.config.custom.init) {\n            StockThumbs.config.custom.init(stockThumbsConfig, stm);\n          }\n        }\n        // expose to global object\n        StockThumbs.getFilters = stm.getFilters;\n        StockThumbs.setFilters = stm.setFilters;\n        StockThumbs.config = stockThumbsConfig;\n        // now call main init method returned below\n        stm.init();\n      }, false);\n    },\n  };\n  stockThumbsMain = () => {\n    const { AdobeStock } = window;\n    const stc = stockThumbsConfig;\n    // utility functions for getting tracking urls and paths\n    const utils = {\n      includePath: window.StockThumbs.PATH,\n      // adobe.prf.hn/click/camref:(CamRef)/pubref:(PubRef)/destination:(URL)\n      getTrackingUrl: (url, cfg) => `//adobe.prf.hn/click/${cfg.camRef}:/pubref:${encodeURIComponent(cfg.pubRef)}/destination:${encodeURIComponent(url)}`,\n      getHost: () => {\n        let host = document.location.hostname;\n        // check if a custom hostname is set\n        if (stc.custom && stc.custom.hostname) {\n          host = stc.custom.hostname;\n        } else {\n          // if <base href> is set, return that instead of doc location\n          const base = document.querySelector('base') && document.querySelector('base').href;\n          // create temporary link and extract hostname\n          const tmpLink = document.createElement('a');\n          tmpLink.href = base;\n          host = tmpLink.hostname;\n        }\n        return host;\n      },\n      get stockHomeUrl() {\n        return this.getTrackingUrl(`https://stock.adobe.com?as_campaign=${encodeURIComponent(this.getHost())}`, stc);\n      },\n    };\n    // returns cta link per ctaLink config variable\n    const getCtaText = () => {\n      const fmfUrl = utils.getTrackingUrl(`https://stock.adobe.com/promo/firstmonthfree?as_campaign=${utils.getHost()}`, stc);\n      const videoUrl = utils.getTrackingUrl(`https://stock.adobe.com/video?as_campaign=${utils.getHost()}`, stc);\n      const cta = {\n        fmf: `<p>First month free with <a href=\"${fmfUrl}\" class=\"astock-searchbar-link\" target=\"_blank\">Adobe Stock annual plans</a>.</p>`,\n        video: `<p>Save money on Adobe Stock videos <a href=\"${videoUrl}\" class=\"astock-searchbar-link\" target=\"_blank\">with a credit pack</a>.</p>`,\n      };\n      if (stc.ctaLink === 'video') return cta.video;\n      return cta.fmf;\n    };\n    const sbHeader = `<div class=\"astock-searchbar-header\"><a href=\"${utils.stockHomeUrl}\" target=\"_blank\"><img src=\"${utils.includePath}/stock_2020_dark_400.png\"></a>${getCtaText()}</div>`;\n\n    function parseFilters(filters) {\n      const searchFilters = {};\n      const { $jq } = window.StockThumbs;\n      if (!filters) return searchFilters;\n      // iterate over object using method that won't bother eslint!\n      const filterMap = Object.entries(filters);\n      const stkParams = AdobeStock.SEARCH_PARAMS;\n      // lookup Stock keyname and map to search filter name\n      filterMap.forEach(([key, currentValue]) => {\n        let value = currentValue;\n        if (Object.prototype.hasOwnProperty.call(stkParams, key)) {\n          if (key === 'SIMILAR_URL') {\n            if (value !== '' && value !== undefined) {\n              const firstImg = $jq(`${value} img`)[0] || $jq(`${value}`)[0];\n              const getSrcSet = (srcset) => ((srcset) ? srcset.split(', ')[0].split(' ')[0] : undefined);\n              const url = $jq(firstImg).attr('src') || getSrcSet($jq(firstImg).attr('srcset'));\n              if (url !== '' && url !== undefined) {\n                searchFilters[stkParams[key]] = url;\n              }\n            }\n          } else if (key === 'WORDS') {\n            // value should be array ['DOM element', keyword count]\n            if (value && value[0]) {\n              const $el = $jq(value[0]);\n              const isInput = $el.is('input');\n              const phrase = (isInput) ? $el.val() : $el.text();\n              // if element has text get keywords\n              if (phrase) {\n                const keywords = window.StockThumbs.keywordx.extract(phrase, {\n                  language: 'english',\n                  remove_digits: true,\n                  return_changed_case: true,\n                  remove_duplicates: true,\n                });\n                // if count is not supplied default to 1\n                const keywordCount = (value[1]) ? value[1] : 1;\n                const searchWords = (keywords.length > 0) ? keywords.slice(0, keywordCount).join(' ') : '';\n                console.log('keywords: %o\\nsearching on %s', keywords, searchWords);\n                searchFilters[stkParams[key]] = searchWords;\n              }\n            }\n          } else if (value !== '' && value !== undefined) {\n            // validate size\n            if (key === 'THUMBNAIL_SIZE') {\n              const sizes = [110, 160, 220, 240, 500, 1000];\n              const targetSize = value;\n              // check if size is in array of allowed sizes\n              if (sizes.indexOf(targetSize) < 0) {\n                value = sizes.reduce((a, b) => {\n                  const newSize = (Math.abs(a - targetSize) < Math.abs(b - targetSize) ? a : b);\n                  return newSize;\n                });\n                console.warn('Thumbnail size of %s is not valid. Closest size is %s', targetSize, value);\n              }\n            }\n            searchFilters[stkParams[key]] = value;\n          }\n        }\n      });\n      return searchFilters;\n    }\n\n    // returns container div from selector and adds main class\n    function $getContDiv(el) {\n      const mainClass = 'astock-searchbar';\n      const dataId = 'searchbar';\n      // get reference to jQuery\n      const { $jq } = window.StockThumbs;\n      // get reference to target div and data node (might be same)\n      let $tempDiv = $jq(el);\n      const $dataDiv = $tempDiv.find(`[data-id=${dataId}]`);\n      // if data node exists, return it\n      if ($dataDiv.length > 0) {\n        $tempDiv = $dataDiv;\n      // does target node exist\n      } else if ($tempDiv.length > 0) {\n        // does target node contain main class\n        if (!$tempDiv.hasClass(mainClass)) {\n          // create new div to be container\n          const $mainDiv = $jq(document.createElement('div'));\n          // add main class\n          $mainDiv.addClass(mainClass);\n          // add new container under target and return that\n          $tempDiv = $mainDiv;\n          $jq(el).append($tempDiv);\n        }\n        // add data node\n        $tempDiv.attr('data-id', dataId);\n      // neither exists, throw exception\n      } else {\n        throw (new Error('StockThumbs error: Container does not exist. Set \"parentId\" to a valid selector.'));\n      }\n      return $tempDiv;\n    }\n\n    // creates thumbs and inserts -- input is json array\n    function updateUiThumbs(...files) {\n      if (files.length > 0) {\n        const wrapClass = 'astock-searchbar-wrap';\n        const bodyClass = 'astock-searchbar-body';\n        let itemClass = 'astock-searchbar-item';\n        const tipClass = 'astock-searchbar-tip';\n        const iconClass = 'astock-searchbar-item-icon';\n        // get reference to result columns object\n        const columns = AdobeStock.RESULT_COLUMNS;\n        // get reference to jQuery\n        const { $jq } = window.StockThumbs;\n        const $sb = $getContDiv(stc.parentId);\n        // wrap thumbnails in container to allow scrolling\n        const $wrapDiv = $jq(document.createElement('div'));\n        $wrapDiv.addClass(wrapClass);\n        const $thumbsDiv = $jq(document.createElement('div'));\n        $thumbsDiv.addClass(bodyClass);\n        // if body width is less than 150px, apply small item size\n        if ($sb.width() <= 150) {\n          itemClass = `${itemClass} item-small`;\n        }\n        // svg video icon\n        const videoSvg = '<svg version=\"1.1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\" viewBox=\"0 0 19 12\" style=\"enable-background:new 0 0 19 12; width:19px; height:10px; fill:white;\" xml:space=\"preserve\"><g><path d=\"M17.8,0.8L13,3V0.8C13,0.4,12.6,0,12.2,0H0.8C0.4,0,0,0.4,0,0.8v10.4C0,11.6,0.4,12,0.8,12h11.4c0.4,0,0.8-0.4,0.8-0.8V 9l4.8,2.2c0.5,0.4,1.2,0,1.2-0.7v-9C19,0.9,18.3,0.5,17.8,0.8z\"></path></g></svg>';\n        // populate with images using html returned in json\n        files.forEach((asset) => {\n          // get url to details page on Stock and wrap inside affiliate tracking url\n          const url = utils.getTrackingUrl(asset[columns.DETAILS_URL], stc);\n          // create div wrapper\n          const div = document.createElement('div');\n          div.className = itemClass;\n          // create anchor with link to details\n          const link = document.createElement('a');\n          link.href = url;\n          link.target = '_blank';\n          let thumb;\n          // construct a different thumb element depending on asset type\n          if (stc.videoSupport && asset[columns.MEDIA_TYPE_ID] === 4) {\n            // create video and source tag\n            const video = document.createElement('video');\n            const source = document.createElement('source');\n            Object.assign(video, {\n              preload: 'none',\n              poster: asset[columns.THUMBNAIL_URL],\n              loop: 'loop',\n            });\n            // for some reason, cannot assign these properties\n            video.setAttribute('muted', 'muted');\n            video.setAttribute('onmouseover', 'this.play()');\n            video.setAttribute('onmouseout', 'this.pause()');\n            Object.assign(source, {\n              src: asset[columns.VIDEO_SMALL_PREVIEW_URL],\n              type: asset[columns.VIDEO_SMALL_PREVIEW_CONTENT_TYPE],\n            });\n            // add video source and set thumb as video\n            video.appendChild(source);\n            // add play icon\n            const iconDiv = document.createElement('div');\n            iconDiv.className = iconClass;\n            const svg = document.createRange().createContextualFragment(videoSvg);\n            iconDiv.appendChild(svg);\n            div.appendChild(iconDiv);\n            link.appendChild(video);\n            // get html tag\n            const tag = asset[columns.THUMBNAIL_HTML_TAG];\n            // convert html string into dom element\n            thumb = document.createRange().createContextualFragment(tag);\n          } else {\n            // get html tag\n            const tag = asset[columns.THUMBNAIL_HTML_TAG];\n            // convert html string into dom element\n            thumb = document.createRange().createContextualFragment(tag);\n          }\n          // if captions are enabled\n          if (stc.tooltips) {\n            // create tool tip from image title\n            const tip = document.createElement('div');\n            tip.className = tipClass;\n            // get title text from document-fragment\n            const tipText = thumb.querySelector('img').title;\n            if (tipText !== '' && tipText !== undefined) {\n              tip.textContent = tipText;\n              thumb.querySelector('img').removeAttribute('title');\n              link.appendChild(tip);\n              // create hover behavior for tip\n              const $tip = $jq(tip);\n              const $link = $jq(link);\n              const showTip = (el) => {\n                el.stopPropagation();\n                el.preventDefault();\n                const $img = $jq(el.currentTarget);\n                const $off1 = $img.offset();\n                const $off2 = $sb.offset();\n                const newPos = {\n                  top: ($off1.top - $off2.top) + $img.height(),\n                  left: ($off1.left - $off2.left) + $img.width(),\n                };\n                $tip.css({\n                  top: newPos.top,\n                  left: newPos.left,\n                });\n                // console.log('final pos', newPos);\n                $tip.show();\n                // change parent to main div\n                $sb.append($tip);\n              };\n              const hideTip = (el) => {\n                $tip.css($jq(el.currentTarget).offset());\n                $tip.hide();\n                // reset parent to link\n                $link.append($tip);\n              };\n              // $jq(thumb.querySelector('img')).hover(showTip);\n              $jq(link).hover(showTip, hideTip);\n            }\n          }\n          // wrap link around image/video and add to document\n          link.appendChild(thumb);\n          div.insertBefore(link, div.lastChild);\n          $thumbsDiv.append(div);\n        });\n        $wrapDiv.append($thumbsDiv);\n        $sb.append($wrapDiv);\n        // init Masonry\n        $thumbsDiv.masonry({\n          itemSelector: `.${itemClass}`,\n        });\n        // listen for images loaded event\n        $thumbsDiv.imagesLoaded()\n          .progress(() => {\n            $thumbsDiv.masonry('layout');\n          })\n          .done(() => {\n            console.log('all images successfully loaded');\n            // show search bar\n            $sb.addClass('astock-searchbar-fadein');\n            // make sure it is visible in case class is missing\n            window.setTimeout(() => {\n              $sb.css({\n                visibility: 'visible',\n                opacity: 1,\n              });\n              // call Masonry layout one final time for Firefox!\n              $thumbsDiv.masonry('layout');\n            }, 1000);\n          });\n      } else {\n        console.warn('No images to render.');\n      }\n    }\n\n    // runs search using sdk and returns results\n    async function doSearch(params) {\n      // default filters\n      const defaultParams = {\n        offset: 0,\n        limit: 16,\n      };\n      // merge default filters with params from config\n      const searchParams = Object.assign(defaultParams, params);\n      console.log('Search query: %o', searchParams);\n      const queryParams = {\n        // if locale is set in config, use that instead of default\n        locale: ((stc.locale) ? stc.locale : 'en-US'),\n        search_parameters: searchParams,\n      };\n      // result fields to get back\n      // if result_columns exists in config, use that instead\n      let resultColumns = [];\n      const hasCustomColumns = Boolean(stc.custom && stc.custom.result_columns);\n      if (!hasCustomColumns) {\n        const imageColumns = [\n          AdobeStock.RESULT_COLUMNS.THUMBNAIL_HTML_TAG,\n          AdobeStock.RESULT_COLUMNS.DETAILS_URL,\n          AdobeStock.RESULT_COLUMNS.NB_RESULTS,\n        ];\n        const videoColumns = [\n          AdobeStock.RESULT_COLUMNS.TITLE,\n          AdobeStock.RESULT_COLUMNS.THUMBNAIL_URL,\n          AdobeStock.RESULT_COLUMNS.MEDIA_TYPE_ID,\n          AdobeStock.RESULT_COLUMNS.VIDEO_SMALL_PREVIEW_URL,\n          AdobeStock.RESULT_COLUMNS.VIDEO_SMALL_PREVIEW_CONTENT_TYPE,\n        ];\n        // if video support is enabled, include extra result columns\n        resultColumns = (stc.videoSupport) ? imageColumns.concat(videoColumns) : imageColumns;\n      } else {\n        const tempFields = stc.custom.result_columns;\n        // fully qualify result column names\n        const stkResults = AdobeStock.RESULT_COLUMNS;\n        tempFields.forEach((field) => {\n          resultColumns.push(stkResults[field]);\n        });\n        resultColumns.push(AdobeStock.RESULT_COLUMNS.NB_RESULTS);\n        console.log(resultColumns);\n      }\n      // create sdk instance\n      const stock = new AdobeStock(stc.apiKey, stc.appName, AdobeStock.ENVIRONMENT.PROD);\n      // execute search and load results\n      const iterator = stock.searchFiles(null, queryParams, resultColumns);\n      // iterate over returned Promise\n      return iterator.next().then(() => {\n        let files;\n        const response = iterator.getResponse();\n        if (response.nb_results > 0) {\n          ({ files } = response);\n        } else {\n          console.log('no results from Stock');\n        }\n        return files;\n      }).catch((err) => {\n        console.log(err);\n        return false;\n      });\n    }\n    // expose methods and objects outside Main object\n    return {\n      init: async () => {\n        // get reference to loaded jQuery\n        const { $jq } = window.StockThumbs;\n        // extract search options and run search\n        const result = await doSearch(parseFilters(stc.filters));\n        // runs callback after search results are returned (optional)\n        if (stc.callback && (typeof stc.callback === 'function')) {\n          stc.callback.apply(this, result);\n        }\n        // if custom code is present, return search results and run code instead of default behavior\n        if (stc.custom && stc.custom.exec) {\n          // call custom code main entry point\n          stc.custom.exec.call(this, result);\n        } else {\n          try {\n            // create search results\n            const $stockThumbs = $getContDiv(stc.parentId);\n            // create stock header\n            const $header = $jq(sbHeader);\n            $stockThumbs.append($header);\n            updateUiThumbs.apply(this, result);\n          } catch (error) {\n            console.warn('Unable to initialize StockThumbs.');\n          }\n        }\n      },\n      // expose search filters for troubleshooting\n      getFilters: () => { console.log(stc.filters); },\n      setFilters: (filters) => { console.log(filters); },\n      // export utils for external functions\n      utils,\n    };\n  };\n  // Get current path of script by triggering a stack trace\n  /*! @source https://gist.github.com/eligrey/5426730 */\n  window.StockThumbs.PATH = (() => {\n    const filename = 'fileName';\n    const stack = 'stack';\n    const stacktrace = 'stacktrace';\n    const sourceUrl = 'sourceURL';\n    const current = 'currentScript';\n    let loc = null;\n    const matcher = (name, matchedLoc) => {\n      loc = matchedLoc;\n    };\n\n    // for modern browsers\n    if (document[current] && document[current].src !== '') {\n      loc = document[current].src;\n      return loc.slice(0, loc.lastIndexOf('/') + 1);\n    }\n\n    try {\n      0(); // throws error\n      return false;\n    } catch (ex) {\n      if (filename in ex) { // Firefox\n        loc = ex[filename];\n      } else if (sourceUrl in ex) { // New Safari\n        loc = ex[sourceUrl];\n      } else if (stacktrace in ex) { // Opera\n        ex[stacktrace].replace(/called from line \\d+, column \\d+ in (.*):/gm, matcher);\n      } else if (stack in ex) { // WebKit, Blink, and IE10\n        ex[stack].replace(/at.*?\\(?(\\S+):\\d+:\\d+\\)?$/g, matcher);\n      }\n      return loc.slice(0, loc.lastIndexOf('/') + 1);\n    }\n  })();\n\n  // custom event dispatcher\n  const notify = (eventName) => {\n    const event = new Event(eventName);\n    // Dispatch the event.\n    console.log(`Dispatching event ${eventName}`);\n    window.dispatchEvent(event);\n  };\n\n  // notifies main script when everything is loaded\n  jqLoaded = (stc) => {\n    // get current path of script\n    const includePath = window.StockThumbs.PATH;\n    const SS = window.StockThumbs;\n    SS.$jq = jQuery.noConflict();\n    const { $jq } = SS;\n    const reqs = {\n      keywordx: 'keywordx.min.js',\n      imagesloaded: 'imagesloaded.pkgd.min.js',\n      adobestocklib: 'adobestocklib.min.js',\n      masonry: 'masonry.pkgd.min.js',\n    };\n      // remove/add custom libraries\n    if (stc.custom && (stc.custom.include || stc.custom.exclude)) {\n      const { exclude } = stc.custom;\n      const { include } = stc.custom;\n      if (exclude) {\n        exclude.forEach((name) => {\n            // eslint-disable-next-line no-prototype-builtins\n          if (reqs.hasOwnProperty(name)) {\n            delete reqs[name];\n          }\n        });\n      }\n      if (include) {\n        include.forEach((name) => {\n          reqs[name] = `${name}.js`;\n        });\n      }\n      console.log('new includes', reqs);\n    }\n    // loads other libraries using a promise\n    // https://www.geeksforgeeks.org/loading-multiple-scripts-dynamically-in-sequence-using-javascript/\n    const multiLoad = (info) => new Promise(((resolve, reject) => {\n      const scriptTag = document.createElement('script');\n      scriptTag.src = info;\n      scriptTag.async = false;\n      scriptTag.onload = () => resolve(info);\n      scriptTag.onerror = () => reject(info);\n      document.body.appendChild(scriptTag);\n    }));\n    const scriptArr = Object.values(reqs).map((script) => `${includePath}${script}`);\n    const promiseData = [];\n    scriptArr.forEach((info) => {\n      promiseData.push(multiLoad(info));\n    });\n    Promise.all(promiseData).then(() => {\n      console.log(`jQuery ${$jq().jquery} and all libraries loaded.`);\n        // dispatch event that searchbar is ready to load\n      SS.keywordx = window.keywordx;\n      SS.Masonry = window.Masonry;\n      notify('StockThumbsReady');\n    }).catch((err) => {\n      console.log(`${err} failed to load!`);\n    });\n  };\n\n  const domReadyHandler = (a) => {\n    const b = document;\n    const c = 'addEventListener';\n    if (b[c]) b[c]('DOMContentLoaded', a);\n    else window.attachEvent('onload', a);\n  };\n\n  domReadyHandler(() => {\n    // compares jQuery versions\n    // taken from https://stackoverflow.com/a/16187766\n    const cmpVersions = (a, b) => {\n      let i;\n      let diff;\n      const regExStrip0 = /(\\.0+)+$/;\n      const segmentsA = a.replace(regExStrip0, '').split('.');\n      const segmentsB = b.replace(regExStrip0, '').split('.');\n      const l = Math.min(segmentsA.length, segmentsB.length);\n      for (i = 0; i < l; i += 1) {\n        diff = parseInt(segmentsA[i], 10) - parseInt(segmentsB[i], 10);\n        if (diff) {\n          return diff;\n        }\n      }\n      return segmentsA.length - segmentsB.length;\n    };\n\n    let isJQCalled = false;\n    const checkJQ = () => {\n      // check for jQuery and load conditionally if version 1.9 or higher\n      let timerId;\n      if ((typeof window.jQuery === 'undefined' && !window.jQuery) || (cmpVersions('1.9', window.jQuery().jquery) >= 0)) {\n        if (!isJQCalled) {\n          const jQ = document.createElement('script');\n          jQ.type = 'text/javascript';\n          jQ.onload = jQ.onreadystatechange;\n          // jQ.onload = jqLoaded;\n          jQ.src = `${window.StockThumbs.PATH}/jquery.min.js`;\n          document.body.appendChild(jQ);\n          isJQCalled = true;\n        }\n        timerId = setTimeout(() => {\n          checkJQ();\n        }, 50);\n      } else {\n        if (timerId) { clearTimeout(timerId); }\n        notify('jQueryLoaded');\n      }\n    };\n    checkJQ();\n  });\n})();\n"],"mappings":"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"}