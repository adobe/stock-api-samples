{"version":3,"sources":["webpack:///adobestocklib.min.js","webpack:///webpack/bootstrap 555a9e918089445f630a","webpack:///./src/constants/constants.js","webpack:///./src/utils/utils.js","webpack:///./~/uuid/lib/bytesToUuid.js","webpack:///./~/uuid/lib/rng-browser.js","webpack:///./src/utils/resultColumnsUtils.js","webpack:///./src/utils/searchParamsUtils.js","webpack:///./src/api/stockApis.js","webpack:///./src/config/config.js","webpack:///./src/models/licenseHistoryIterator.js","webpack:///./src/models/searchFilesIterator.js","webpack:///./src/utils/licenseParamsUtils.js","webpack:///./src/utils/queryParamsUtils.js","webpack:///./~/uuid/index.js","webpack:///./~/uuid/v1.js","webpack:///./~/uuid/v4.js","webpack:///(webpack)/buildin/global.js","webpack:///./src/utils/downSamplingUtils.js","webpack:///./src/utils/http.js","webpack:///./resources/prod_env.json","webpack:///./resources/stage_env.json","webpack:///./src/adobeStock.js"],"names":["AdobeStock","modules","__webpack_require__","moduleId","installedModules","exports","module","i","l","call","m","c","value","d","name","getter","o","Object","defineProperty","configurable","enumerable","get","n","__esModule","object","property","prototype","hasOwnProperty","p","s","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","length","descriptor","writable","key","protoProps","staticProps","QUERY_PARAMS_PROPS","LOCALE","SEARCH_PARAMETERS","RESULT_COLUMNS","SIMILAR_IMAGE","CATEGORY","HTTPMETHOD","GET","POST","ENVIRONMENT","PROD","STAGE","SEARCH_PARAMS","WORDS","LIMIT","OFFSET","ORDER","CREATOR_ID","MEDIA_ID","MODEL_ID","SERIE_ID","SIMILAR","SIMILAR_URL","FILTERS_3D_TYPE_ID","FILTERS_AGE","FILTERS_AREA_PIXELS","FILTERS_PREMIUM","FILTERS_COLORS","FILTERS_CONTENT_TYPE_3D","FILTERS_CONTENT_TYPE_ALL","FILTERS_CONTENT_TYPE_ILLUSTRATION","FILTERS_CONTENT_TYPE_PHOTO","FILTERS_CONTENT_TYPE_VECTOR","FILTERS_CONTENT_TYPE_VIDEO","FILTERS_CONTENT_TYPE_TEMPLATE","FILTERS_HAS_RELEASES","FILTERS_ISOLATED_ON","FILTERS_OFFENSIVE_2","FILTERS_ORIENTATION","FILTERS_PANORAMIC_ON","FILTERS_TEMPLATE_CATEGORY_ID","FILTERS_TEMPLATE_TYPE_ID","FILTERS_VIDEO_DURATION","THUMBNAIL_SIZE","GALLERY_ID","LICENSE_HISTORY_SEARCH_PARAMS","SEARCH_PARAMS_ORDER","RELEVANCE","CREATION","POPULARITY","NB_DOWNLOADS","UNDISCOVERED","SEARCH_PARAMS_ORIENTATION","HORIZONTAL","VERTICAL","SQUARE","ALL","SEARCH_PARAMS_HAS_RELEASES","TRUE","FALSE","SEARCH_PARAMS_3D_TYPES","MODELS","LIGHTS","MATERIALS","SEARCH_PARAMS_TEMPLATE_CATEGORIES","MOBILE","WEB","PRINT","PHOTO","FILM","ART","SEARCH_PARAMS_TEMPLATE_TYPES","PSDT","AIT","SEARCH_PARAMS_THUMB_SIZES","MEDIUM","BIG","XL","XXL","LICENSE_HISTORY_SEARCH_PARAMS_THUMB_SIZES","BIG_A","BIG_N","SEARCH_PARAMS_AGE","ONE_WEEK","ONE_MONTH","SIX_MONTH","ONE_YEAR","TWO_YEAR","SEARCH_PARAMS_VIDEO_DURATION","TEN","TWENTY","THIRTY","ABOVE_THIRTY","SEARCH_PARAMS_TYPE","STRING","INTEGER","RANGE","ARRAY","SEARCH_PARAMS_PREMIUM","RESULTS_COLUMNS_TOSTRING","NB_RESULTS","ID","TITLE","CREATOR_NAME","COUNTRY_NAME","WIDTH","HEIGHT","THUMBNAIL_URL","THUMBNAIL_HTML_TAG","THUMBNAIL_WIDTH","THUMBNAIL_HEIGHT","THUMBNAIL_110_URL","THUMBNAIL_110_WIDTH","THUMBNAIL_110_HEIGHT","THUMBNAIL_160_URL","THUMBNAIL_160_WIDTH","THUMBNAIL_160_HEIGHT","THUMBNAIL_220_URL","THUMBNAIL_220_WIDTH","THUMBNAIL_220_HEIGHT","THUMBNAIL_240_URL","THUMBNAIL_240_WIDTH","THUMBNAIL_240_HEIGHT","THUMBNAIL_500_URL","THUMBNAIL_500_WIDTH","THUMBNAIL_500_HEIGHT","THUMBNAIL_1000_URL","THUMBNAIL_1000_WIDTH","THUMBNAIL_1000_HEIGHT","MEDIA_TYPE_ID","CATEGORY_HIERARCHY","NB_VIEWS","CREATION_DATE","KEYWORDS","HAS_RELEASES","COMP_URL","COMP_WIDTH","COMP_HEIGHT","IS_LICENSED","VECTOR_TYPE","CONTENT_TYPE","FRAMERATE","DURATION","STOCK_ID","COMPS","DETAILS_URL","TEMPLATE_TYPE_ID","TEMPLATE_CATEGORY_IDS","MARKETING_TEXT","DESCRIPTION","SIZE_BYTES","PREMIUM_LEVEL_ID","IS_PREMIUM","LICENSES","VIDEO_PREVIEW_URL","VIDEO_PREVIEW_WIDTH","VIDEO_PREVIEW_HEIGHT","VIDEO_PREVIEW_CONTENT_LENGTH","VIDEO_PREVIEW_CONTENT_TYPE","VIDEO_SMALL_PREVIEW_URL","VIDEO_SMALL_PREVIEW_WIDTH","VIDEO_SMALL_PREVIEW_HEIGHT","VIDEO_SMALL_PREVIEW_CONTENT_LENGTH","VIDEO_SMALL_PREVIEW_CONTENT_TYPE","LICENSE_HISTORY_RESULT_COLUMNS","LICENSE_STATE_PARAMS","EMPTY","EMPTY_LICENSE","IMAGE","STANDARD","STANDARD_M","EXTENDED","VIDEO","VIDEO_HD","VIDEO_4K","VECTOR_ASSETS","ASSETS_3D","TEMPLATES","PURCHASE_STATE_PARAMS","NOT_PURCHASED","PURCHASED","CANCELLED","NOT_POSSIBLE","JUST_PURCHASED","OVERAGE","DOWNSAMPLE_PARAMS","LONGEST_SIDE_MAXIMUM","LONGEST_SIDE_DOWNSAMPLE_TO","EXIF_FILE_FORMAT_PARAMS","JPG_START_MARKER","APP1_MARKER","EXIF_HEADER","TIF_HEADER","ORIENTATION_TAG","LAST_MARKER","Constants","this","freeze","default","_interopRequireDefault","obj","_typeof","Symbol","iterator","constructor","_constants","_constants2","_http","_http2","DECIMAL_RADIX","Utilities","array","indexOf","json","isObject","hasValue","keys","forEach","doesJSONContainsValue","variable","isNaN","parseInt","Array","url","headers","Promise","onSuccess","onError","settings","Http","doXhr","then","data","method","contentType","bytesToUuid","buf","offset","bth","byteToHex","toString","substr","global","rng","crypto","msCrypto","getRandomValues","rnds8","Uint8Array","rnds","r","Math","random","_utils","_utils2","ResultColumnsUtils","params","supportedColumns","map","param","Utils","doesArrayContainValue","Error","uri","paramToStr","encodeURIComponent","push","join","searchParametersConfig","words","type","limit","max","min","order","exists_in","creator_id","media_id","model_id","serie_id","similar","similar_image","similar_url","category","filters_3d_type_id","filters_age","filters_area_pixels","filters_colors","filters_content_type_3d","filters_content_type_all","filters_content_type_illustration","filters_content_type_photo","filters_content_type_vector","filters_content_type_video","filters_content_type_template","filters_has_releases","filters_isolated_on","filters_offensive_2","filters_orientation","filters_panoramic_on","filters_premium","filters_template_category_id","filters_template_type_id","filters_video_duration","thumbnail_size","gallery_id","searchParametersConfigLicenseHistory","SearchParamsUtils","config","supportedParams","undefined","permittedValues","isString","isInteger","matchResults","match","isArray","item","createSearchFilesApiUrl","endpoint","queryParams","paramsStr","locale","search_parameters","encodeURI","result_columns","createLicenseHistoryApiUrl","createSearchCategoryApiUrl","category_id","createAccessMemberProfileApiUrl","contentId","license","createContentInfoApiUrl","createRequestLicenseApiUrl","createMemberAbandonApiUrl","state","getSearchFilesApiHttpMethod","getRequestLicenseApiHttpMethod","cceAgency","_searchParamsUtils","_searchParamsUtils2","_resultColumnsUtils","_resultColumnsUtils2","_downSamplingUtils","_downSamplingUtils2","StockApis","accessToken","_this","httpMethod","requestURL","endpoints","search","x-api-key","x_api_key","x-product","x_product","Authorization","makeGetAjaxCall","fd","FormData","DownSamplingUtils","downsampleAndFixOrientationImage","downsampledFile","append","makeMultiPartAjaxCall","e","_this2","license_history","_this3","_this4","category_tree","_this5","user_profile","_this6","abandon","_this7","license_info","_this8","cce_agency","postData","JSON","stringify","makePostAjaxCall","_this9","licenseInfo","response","contents","purchase_details","accessMemberProfile","res","canBuy","available_entitlement","quota","purchase_options","error","requestLicense","URL","prodEndpoints","stageEndpoints","Config","apiKey","product","env","arguments","target_env","cloneQueryParamsHelper","cloneQueryParams","parse","storeQueryParamsState","lastQueryParams","revertToLastQueryParamsState","doOnSuccess","apiInProgress","doOnError","doApiCall","stockApis","licenseHistory","DEFAULT_LICENSE_HISTORY_LIMIT","LicenseHistoryIterator","nbResultsPresent","nb_results","LICENSE_HISTORY_ITERATOR_RETURN_ERROR","ceil","userResponse","er","pageIndex","totalPages","totalSearchPages","searchFiles","DEFAULT_SEARCH_FILES_LIMIT","SearchFilesIterator","SEARCH_FILES_ITERATOR_RETURN_ERROR","validateLicenseType","licenseLower","toLowerCase","validateLicenseState","stateLower","LicenseParamsUtils","Number","referenceData","id","QueryParamsUtils","isNBResultsColumnPresent","validate","validateLicenseHistory","validateSearchCategoryTreeQueryParams","getOwnPropertyDescriptor","v1","v4","uuid","options","b","clockseq","_clockseq","msecs","Date","getTime","nsecs","_lastNSecs","dt","_lastMSecs","tl","tmh","node","_nodeId","_seedBytes","ii","g","Function","eval","window","dataURI","byteString","uriSplit","split","atob","decodeURI","mimeString","ia","charCodeAt","Blob","result","ArrayBuffer","byteLength","view","DataView","marker","little","tags","defualtOrientation","getUint16","lastMarker","markerAnded","getUint32","len","bytes","buffer","originalWidth","originalHeight","imgWidth","imgHeight","aspectRatio","resizeParams","width","height","img","orientation","naturalWidth","naturalHeight","calculateResizeParams","canvas","ctx","cx","cy","degree","orientationNeedsFlip","resizedFile","document","createElement","getContext","translate","scale","rotate","PI","drawImage","dataURItoBlob","toDataURL","file","onFailure","test","reader","FileReader","Image","onload","onerror","resizeImage","err","message","getImageOrientation","base64ToArrayBuffer","src","readAsDataURL","_extends","assign","source","_uuid","_uuid2","xhr","XMLHttpRequest","e1","ActiveXObject","e2","e3","defaultSettings","async","crossDomain","cache-control","x-request-id","resolvedSettings","getXhr","onreadystatechange","readyState","status","statusText","open","header","setRequestHeader","withCredentials","responseType","send","isAdobeStockInitialized","isConfigInitialized","_config","_config2","_stockApis","_stockApis2","_searchFilesIterator","_searchFilesIterator2","_licenseHistoryIterator","_licenseHistoryIterator2","_queryParamsUtils","_queryParamsUtils2","_licenseParamsUtils","_licenseParamsUtils2","targetEnv","categoryId","filters","resultColumns","mediaId","keywords","localQueryParams","validateSearchFileQueryParams","addResultColumnNBResults","validateLicenseHistoryQueryParams","validateSearchCategoryQueryParams","searchCategory","searchCategoryTree","validateMemberProfileLicenseParams","validateMemberAbandonLicenseParams","memberAbandon","validateContentLicenseParams","validateReferenceData","downloadAsset"],"mappings":"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","file":"adobestocklib.min.js","sourcesContent":["var AdobeStock =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\ti: moduleId,\n/******/ \t\t\tl: false,\n/******/ \t\t\texports: {}\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.l = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// identity function for calling harmony imports with the correct context\n/******/ \t__webpack_require__.i = function(value) { return value; };\n/******/\n/******/ \t// define getter function for harmony exports\n/******/ \t__webpack_require__.d = function(exports, name, getter) {\n/******/ \t\tif(!__webpack_require__.o(exports, name)) {\n/******/ \t\t\tObject.defineProperty(exports, name, {\n/******/ \t\t\t\tconfigurable: false,\n/******/ \t\t\t\tenumerable: true,\n/******/ \t\t\t\tget: getter\n/******/ \t\t\t});\n/******/ \t\t}\n/******/ \t};\n/******/\n/******/ \t// getDefaultExport function for compatibility with non-harmony modules\n/******/ \t__webpack_require__.n = function(module) {\n/******/ \t\tvar getter = module && module.__esModule ?\n/******/ \t\t\tfunction getDefault() { return module['default']; } :\n/******/ \t\t\tfunction getModuleExports() { return module; };\n/******/ \t\t__webpack_require__.d(getter, 'a', getter);\n/******/ \t\treturn getter;\n/******/ \t};\n/******/\n/******/ \t// Object.prototype.hasOwnProperty.call\n/******/ \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(__webpack_require__.s = 20);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\r\n * Copyright 2017 Adobe Systems Incorporated. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n */\n// Query params properties\nvar QUERY_PARAMS_PROPS = {\n  LOCALE: 'locale',\n  SEARCH_PARAMETERS: 'search_parameters',\n  RESULT_COLUMNS: 'result_columns',\n  SIMILAR_IMAGE: 'similar_image',\n  CATEGORY: 'category_id'\n};\n\n// http methods\nvar HTTPMETHOD = {\n  GET: 'GET',\n  POST: 'POST'\n};\n\n// environment\nvar ENVIRONMENT = {\n  PROD: 1,\n  STAGE: 2\n};\n\n// search parameters\nvar SEARCH_PARAMS = {\n  WORDS: 'words',\n  LIMIT: 'limit',\n  OFFSET: 'offset',\n  ORDER: 'order',\n  CREATOR_ID: 'creator_id',\n  MEDIA_ID: 'media_id',\n  MODEL_ID: 'model_id',\n  SERIE_ID: 'serie_id',\n  SIMILAR: 'similar',\n  SIMILAR_IMAGE: 'similar_image',\n  SIMILAR_URL: 'similar_url',\n  CATEGORY: 'category',\n  FILTERS_3D_TYPE_ID: 'filters_3d_type_id',\n  FILTERS_AGE: 'filters_age',\n  FILTERS_AREA_PIXELS: 'filters_area_pixels',\n  FILTERS_PREMIUM: 'filters_premium',\n  FILTERS_COLORS: 'filters_colors',\n  FILTERS_CONTENT_TYPE_3D: 'filters_content_type_3d',\n  FILTERS_CONTENT_TYPE_ALL: 'filters_content_type_all',\n  // FILTERS_EDITORIAL: 'filters_editorial', // restricted use\n  FILTERS_CONTENT_TYPE_ILLUSTRATION: 'filters_content_type_illustration',\n  FILTERS_CONTENT_TYPE_PHOTO: 'filters_content_type_photo',\n  FILTERS_CONTENT_TYPE_VECTOR: 'filters_content_type_vector',\n  FILTERS_CONTENT_TYPE_VIDEO: 'filters_content_type_video',\n  FILTERS_CONTENT_TYPE_TEMPLATE: 'filters_content_type_template',\n  FILTERS_HAS_RELEASES: 'filters_has_releases',\n  FILTERS_ISOLATED_ON: 'filters_isolated_on',\n  FILTERS_OFFENSIVE_2: 'filters_offensive_2',\n  FILTERS_ORIENTATION: 'filters_orientation',\n  FILTERS_PANORAMIC_ON: 'filters_panoramic_on',\n  FILTERS_TEMPLATE_CATEGORY_ID: 'filters_template_category_id',\n  FILTERS_TEMPLATE_TYPE_ID: 'filters_template_type_id',\n  FILTERS_VIDEO_DURATION: 'filters_video_duration',\n  THUMBNAIL_SIZE: 'thumbnail_size',\n  GALLERY_ID: 'gallery_id'\n};\n\nvar LICENSE_HISTORY_SEARCH_PARAMS = {\n  LIMIT: 'limit',\n  OFFSET: 'offset',\n  THUMBNAIL_SIZE: 'thumbnail_size'\n};\n\nvar SEARCH_PARAMS_ORDER = {\n  RELEVANCE: 'relevance',\n  CREATION: 'creation',\n  POPULARITY: 'popularity',\n  NB_DOWNLOADS: 'nb_downloads',\n  UNDISCOVERED: 'undiscovered'\n};\n\nvar SEARCH_PARAMS_ORIENTATION = {\n  HORIZONTAL: 'horizontal',\n  VERTICAL: 'vertical',\n  SQUARE: 'square',\n  ALL: 'all'\n};\n\nvar SEARCH_PARAMS_HAS_RELEASES = {\n  TRUE: 'true',\n  FALSE: 'false',\n  ALL: 'all'\n};\n\nvar SEARCH_PARAMS_3D_TYPES = {\n  MODELS: 1,\n  LIGHTS: 2,\n  MATERIALS: 3\n};\n\nvar SEARCH_PARAMS_TEMPLATE_CATEGORIES = {\n  MOBILE: 1,\n  WEB: 2,\n  PRINT: 3,\n  PHOTO: 4,\n  FILM: 5,\n  ART: 6\n};\n\nvar SEARCH_PARAMS_TEMPLATE_TYPES = {\n  PSDT: 1,\n  AIT: 2\n};\n\nvar SEARCH_PARAMS_THUMB_SIZES = {\n  MEDIUM: 110,\n  BIG: 160,\n  XL: 500,\n  XXL: 1000\n};\n\nvar LICENSE_HISTORY_SEARCH_PARAMS_THUMB_SIZES = {\n  MEDIUM: 110,\n  BIG: 160,\n  BIG_A: 220,\n  BIG_N: 240,\n  XL: 500,\n  XXL: 1000\n};\n\nvar SEARCH_PARAMS_AGE = {\n  ONE_WEEK: '1w',\n  ONE_MONTH: '1m',\n  SIX_MONTH: '6m',\n  ONE_YEAR: '1y',\n  TWO_YEAR: '2y',\n  ALL: 'all'\n};\n\nvar SEARCH_PARAMS_VIDEO_DURATION = {\n  TEN: '10',\n  TWENTY: '20',\n  THIRTY: '30',\n  ABOVE_THIRTY: '30-',\n  ALL: 'all'\n};\n\nvar SEARCH_PARAMS_TYPE = {\n  STRING: 0,\n  INTEGER: 1,\n  RANGE: 2,\n  ARRAY: 3\n};\n\nvar SEARCH_PARAMS_PREMIUM = {\n  TRUE: 'true',\n  FALSE: 'false',\n  ALL: 'all'\n};\n\n// result columns\nvar RESULTS_COLUMNS_TOSTRING = 'result_columns[]';\n\nvar RESULT_COLUMNS = {\n  NB_RESULTS: 'nb_results',\n  ID: 'id',\n  TITLE: 'title',\n  CREATOR_NAME: 'creator_name',\n  CREATOR_ID: 'creator_id',\n  COUNTRY_NAME: 'country_name',\n  WIDTH: 'width',\n  HEIGHT: 'height',\n  THUMBNAIL_URL: 'thumbnail_url',\n  THUMBNAIL_HTML_TAG: 'thumbnail_html_tag',\n  THUMBNAIL_WIDTH: 'thumbnail_width',\n  THUMBNAIL_HEIGHT: 'thumbnail_height',\n  THUMBNAIL_110_URL: 'thumbnail_110_url',\n  THUMBNAIL_110_WIDTH: 'thumbnail_110_width',\n  THUMBNAIL_110_HEIGHT: 'thumbnail_110_height',\n  THUMBNAIL_160_URL: 'thumbnail_160_url',\n  THUMBNAIL_160_WIDTH: 'thumbnail_160_width',\n  THUMBNAIL_160_HEIGHT: 'thumbnail_160_height',\n  THUMBNAIL_220_URL: 'thumbnail_220_url',\n  THUMBNAIL_220_WIDTH: 'thumbnail_220_width',\n  THUMBNAIL_220_HEIGHT: 'thumbnail_220_height',\n  THUMBNAIL_240_URL: 'thumbnail_240_url',\n  THUMBNAIL_240_WIDTH: 'thumbnail_240_width',\n  THUMBNAIL_240_HEIGHT: 'thumbnail_240_height',\n  THUMBNAIL_500_URL: 'thumbnail_500_url',\n  THUMBNAIL_500_WIDTH: 'thumbnail_500_width',\n  THUMBNAIL_500_HEIGHT: 'thumbnail_500_height',\n  THUMBNAIL_1000_URL: 'thumbnail_1000_url',\n  THUMBNAIL_1000_WIDTH: 'thumbnail_1000_width',\n  THUMBNAIL_1000_HEIGHT: 'thumbnail_1000_height',\n  MEDIA_TYPE_ID: 'media_type_id',\n  CATEGORY: 'category',\n  CATEGORY_HIERARCHY: 'category_hierarchy',\n  NB_VIEWS: 'nb_views',\n  NB_DOWNLOADS: 'nb_downloads',\n  CREATION_DATE: 'creation_date',\n  KEYWORDS: 'keywords',\n  HAS_RELEASES: 'has_releases',\n  COMP_URL: 'comp_url',\n  COMP_WIDTH: 'comp_width',\n  COMP_HEIGHT: 'comp_height',\n  IS_LICENSED: 'is_licensed',\n  VECTOR_TYPE: 'vector_type',\n  CONTENT_TYPE: 'content_type',\n  FRAMERATE: 'framerate',\n  DURATION: 'duration',\n  STOCK_ID: 'stock_id',\n  COMPS: 'comps',\n  DETAILS_URL: 'details_url',\n  TEMPLATE_TYPE_ID: 'template_type_id',\n  TEMPLATE_CATEGORY_IDS: 'template_category_ids',\n  MARKETING_TEXT: 'marketing_text',\n  DESCRIPTION: 'description',\n  SIZE_BYTES: 'size_bytes',\n  PREMIUM_LEVEL_ID: 'premium_level_id',\n  IS_PREMIUM: 'is_premium',\n  LICENSES: 'licenses',\n  VIDEO_PREVIEW_URL: 'video_preview_url',\n  VIDEO_PREVIEW_WIDTH: 'video_preview_width',\n  VIDEO_PREVIEW_HEIGHT: 'video_preview_height',\n  VIDEO_PREVIEW_CONTENT_LENGTH: 'video_preview_content_length',\n  VIDEO_PREVIEW_CONTENT_TYPE: 'video_preview_content_type',\n  VIDEO_SMALL_PREVIEW_URL: 'video_small_preview_url',\n  VIDEO_SMALL_PREVIEW_WIDTH: 'video_small_preview_width',\n  VIDEO_SMALL_PREVIEW_HEIGHT: 'video_small_preview_height',\n  VIDEO_SMALL_PREVIEW_CONTENT_LENGTH: 'video_small_preview_content_length',\n  VIDEO_SMALL_PREVIEW_CONTENT_TYPE: 'video_small_preview_content_type'\n  // IS_EDITORIAL: 'is_editorial', // requires feature flag to use; to be released in June\n};\n\nvar LICENSE_HISTORY_RESULT_COLUMNS = {\n  THUMBNAIL_110_URL: 'thumbnail_110_url',\n  THUMBNAIL_110_WIDTH: 'thumbnail_110_width',\n  THUMBNAIL_110_HEIGHT: 'thumbnail_110_height',\n  THUMBNAIL_160_URL: 'thumbnail_160_url',\n  THUMBNAIL_160_WIDTH: 'thumbnail_160_width',\n  THUMBNAIL_160_HEIGHT: 'thumbnail_160_height',\n  THUMBNAIL_220_URL: 'thumbnail_220_url',\n  THUMBNAIL_220_WIDTH: 'thumbnail_220_width',\n  THUMBNAIL_220_HEIGHT: 'thumbnail_220_height',\n  THUMBNAIL_240_URL: 'thumbnail_240_url',\n  THUMBNAIL_240_WIDTH: 'thumbnail_240_width',\n  THUMBNAIL_240_HEIGHT: 'thumbnail_240_height',\n  THUMBNAIL_500_URL: 'thumbnail_500_url',\n  THUMBNAIL_500_WIDTH: 'thumbnail_500_width',\n  THUMBNAIL_500_HEIGHT: 'thumbnail_500_height',\n  THUMBNAIL_1000_URL: 'thumbnail_1000_url',\n  THUMBNAIL_1000_WIDTH: 'thumbnail_1000_width',\n  THUMBNAIL_1000_HEIGHT: 'thumbnail_1000_height'\n};\n\nvar LICENSE_STATE_PARAMS = {\n  EMPTY: {\n    EMPTY_LICENSE: ''\n  },\n  IMAGE: {\n    STANDARD: 'standard',\n    STANDARD_M: 'standard_m',\n    EXTENDED: 'extended'\n  },\n  VIDEO: {\n    VIDEO_HD: 'video_hd',\n    VIDEO_4K: 'video_4k'\n  },\n  VECTOR_ASSETS: {\n    STANDARD: 'standard',\n    EXTENDED: 'extended'\n  },\n  ASSETS_3D: {\n    STANDARD: 'standard'\n  },\n  TEMPLATES: {\n    STANDARD: 'standard'\n  }\n};\n\nvar PURCHASE_STATE_PARAMS = {\n  NOT_PURCHASED: 'not_purchased',\n  PURCHASED: 'purchased',\n  CANCELLED: 'cancelled',\n  NOT_POSSIBLE: 'not_possible',\n  JUST_PURCHASED: 'just_purchased',\n  OVERAGE: 'overage'\n};\n\nvar DOWNSAMPLE_PARAMS = {\n  LONGEST_SIDE_MAXIMUM: 23000,\n  LONGEST_SIDE_DOWNSAMPLE_TO: 1000\n};\n\n// Exif file format https://www.media.mit.edu/pia/Research/deepview/exif.html\nvar EXIF_FILE_FORMAT_PARAMS = {\n  JPG_START_MARKER: 0xFFD8,\n  APP1_MARKER: 0xFFE1,\n  EXIF_HEADER: 0x45786966,\n  TIF_HEADER: 0x4949,\n  ORIENTATION_TAG: 0x0112,\n  LAST_MARKER: 0xFF00\n};\n\nvar Constants = function () {\n  function Constants() {\n    _classCallCheck(this, Constants);\n  }\n\n  _createClass(Constants, null, [{\n    key: 'QUERY_PARAMS_PROPS',\n    get: function get() {\n      return Object.freeze(QUERY_PARAMS_PROPS);\n    }\n  }, {\n    key: 'HTTPMETHOD',\n    get: function get() {\n      return Object.freeze(HTTPMETHOD);\n    }\n  }, {\n    key: 'ENVIRONMENT',\n    get: function get() {\n      return Object.freeze(ENVIRONMENT);\n    }\n  }, {\n    key: 'SEARCH_PARAMS',\n    get: function get() {\n      return Object.freeze(SEARCH_PARAMS);\n    }\n  }, {\n    key: 'LICENSE_HISTORY_SEARCH_PARAMS',\n    get: function get() {\n      return Object.freeze(LICENSE_HISTORY_SEARCH_PARAMS);\n    }\n  }, {\n    key: 'SEARCH_PARAMS_ORDER',\n    get: function get() {\n      return Object.freeze(SEARCH_PARAMS_ORDER);\n    }\n  }, {\n    key: 'SEARCH_PARAMS_AGE',\n    get: function get() {\n      return Object.freeze(SEARCH_PARAMS_AGE);\n    }\n  }, {\n    key: 'SEARCH_PARAMS_ORIENTATION',\n    get: function get() {\n      return Object.freeze(SEARCH_PARAMS_ORIENTATION);\n    }\n  }, {\n    key: 'SEARCH_PARAMS_TYPE',\n    get: function get() {\n      return Object.freeze(SEARCH_PARAMS_TYPE);\n    }\n  }, {\n    key: 'SEARCH_PARAMS_HAS_RELEASES',\n    get: function get() {\n      return Object.freeze(SEARCH_PARAMS_HAS_RELEASES);\n    }\n  }, {\n    key: 'SEARCH_PARAMS_THUMB_SIZES',\n    get: function get() {\n      return Object.freeze(SEARCH_PARAMS_THUMB_SIZES);\n    }\n  }, {\n    key: 'LICENSE_HISTORY_SEARCH_PARAMS_THUMB_SIZES',\n    get: function get() {\n      return Object.freeze(LICENSE_HISTORY_SEARCH_PARAMS_THUMB_SIZES);\n    }\n  }, {\n    key: 'SEARCH_PARAMS_3D_TYPES',\n    get: function get() {\n      return Object.freeze(SEARCH_PARAMS_3D_TYPES);\n    }\n  }, {\n    key: 'SEARCH_PARAMS_TEMPLATE_TYPES',\n    get: function get() {\n      return Object.freeze(SEARCH_PARAMS_TEMPLATE_TYPES);\n    }\n  }, {\n    key: 'SEARCH_PARAMS_VIDEO_DURATION',\n    get: function get() {\n      return Object.freeze(SEARCH_PARAMS_VIDEO_DURATION);\n    }\n  }, {\n    key: 'SEARCH_PARAMS_TEMPLATE_CATEGORIES',\n    get: function get() {\n      return Object.freeze(SEARCH_PARAMS_TEMPLATE_CATEGORIES);\n    }\n  }, {\n    key: 'SEARCH_PARAMS_PREMIUM',\n    get: function get() {\n      return Object.freeze(SEARCH_PARAMS_PREMIUM);\n    }\n  }, {\n    key: 'RESULTS_COLUMNS_TOSTRING',\n    get: function get() {\n      return RESULTS_COLUMNS_TOSTRING;\n    }\n  }, {\n    key: 'RESULT_COLUMNS',\n    get: function get() {\n      return Object.freeze(RESULT_COLUMNS);\n    }\n  }, {\n    key: 'LICENSE_HISTORY_RESULT_COLUMNS',\n    get: function get() {\n      return Object.freeze(LICENSE_HISTORY_RESULT_COLUMNS);\n    }\n  }, {\n    key: 'SEARCH_FILES_ITERATOR_RETURN_ERROR',\n    get: function get() {\n      return -1;\n    }\n  }, {\n    key: 'LICENSE_HISTORY_ITERATOR_RETURN_ERROR',\n    get: function get() {\n      return -1;\n    }\n  }, {\n    key: 'LICENSE_STATE_PARAMS',\n    get: function get() {\n      return Object.freeze(LICENSE_STATE_PARAMS);\n    }\n  }, {\n    key: 'PURCHASE_STATE_PARAMS',\n    get: function get() {\n      return Object.freeze(PURCHASE_STATE_PARAMS);\n    }\n  }, {\n    key: 'DOWNSAMPLE_PARAMS',\n    get: function get() {\n      return Object.freeze(DOWNSAMPLE_PARAMS);\n    }\n  }, {\n    key: 'EXIF_FILE_FORMAT_PARAMS',\n    get: function get() {\n      return Object.freeze(EXIF_FILE_FORMAT_PARAMS);\n    }\n  }]);\n\n  return Constants;\n}();\n\nexports.default = Constants;\n\n/***/ }),\n/* 1 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _constants = __webpack_require__(0);\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nvar _http = __webpack_require__(17);\n\nvar _http2 = _interopRequireDefault(_http);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar DECIMAL_RADIX = 10;\n\nvar Utilities = function () {\n  function Utilities() {\n    _classCallCheck(this, Utilities);\n  }\n\n  _createClass(Utilities, null, [{\n    key: 'isString',\n\n    /**\r\n     * Checks if value is string\r\n     * @param {object} value to be checked\r\n     * @returns {boolean} returns true if value is string otherwise false\r\n     */\n    value: function isString(value) {\n      return typeof value === 'string';\n    }\n\n    /**\r\n     * Checks if array contains given value\r\n     * @param {object} array object in which the value needs to be checked\r\n     * @param {string} value to be checked\r\n     * @returns {boolean} returns true if array contains value otherwise false\r\n     */\n\n  }, {\n    key: 'doesArrayContainValue',\n    value: function doesArrayContainValue(array, value) {\n      return array.indexOf(value) > -1;\n    }\n\n    /**\r\n     * Checks if json object contains given value\r\n     * @param {object} json object in which the value needs to be checked\r\n     * @param {boolean|number|string} value value to be checked in json\r\n     * @returns {boolean} returns true if json contains value otherwise false (checks recursively)\r\n     */\n\n  }, {\n    key: 'doesJSONContainsValue',\n    value: function doesJSONContainsValue(json, value) {\n      if (!Utilities.isObject(json)) {\n        return false;\n      }\n\n      var hasValue = false;\n      Object.keys(json).forEach(function (key) {\n        if (json[key] === value) {\n          hasValue = true;\n        } else if (_typeof(json[key]) === 'object') {\n          hasValue = hasValue || Utilities.doesJSONContainsValue(json[key], value);\n        }\n      });\n\n      return hasValue;\n    }\n\n    /**\r\n     * Checks if the variable is integer\r\n     * @param {object} variable to be checked for\r\n     * @returns {boolean} returns true if variable is integer otherwise false\r\n     */\n\n  }, {\n    key: 'isInteger',\n    value: function isInteger(variable) {\n      // even if the variable is string but contains valid integer number return true\n      if (!isNaN(variable) && variable === parseInt(variable, DECIMAL_RADIX)) {\n        return true;\n      }\n\n      return false;\n    }\n\n    /**\r\n     * Checks if the variable is array\r\n     * @param {object} variable to be checked for\r\n     * @returns {boolean} returns true if variable is array otherwise false\r\n     */\n\n  }, {\n    key: 'isArray',\n    value: function isArray(variable) {\n      if (variable.constructor === Array) {\n        return true;\n      }\n\n      return false;\n    }\n\n    /**\r\n     * Checks if the variable is object\r\n     * @param {object} variable to be checked for\r\n     * @returns {boolean} returns true if variable is object otherwise false\r\n     */\n\n  }, {\n    key: 'isObject',\n    value: function isObject(variable) {\n      if (variable.constructor === Object) {\n        return true;\n      }\n\n      return false;\n    }\n\n    /**\r\n     * Makes GET ajax request to given url\r\n     * @param {string} url object for ajax request\r\n     * @param {object} headers to be sent with ajax request\r\n     * @returns {promise} returns promise\r\n     */\n\n  }, {\n    key: 'makeGetAjaxCall',\n    value: function makeGetAjaxCall(url, headers) {\n      return new Promise(function (onSuccess, onError) {\n        var settings = {\n          url: url,\n          headers: headers\n        };\n\n        _http2.default.doXhr(settings).then(onSuccess, onError);\n      });\n    }\n\n    /**\r\n     * Makes POST ajax request to given url\r\n     * @param {string} url object for ajax request\r\n     * @param {object} headers to be sent with ajax request\r\n     * @param {data} data to be sent as post request body with request\r\n     * @returns {promise} returns promise\r\n     */\n\n  }, {\n    key: 'makePostAjaxCall',\n    value: function makePostAjaxCall(url, headers, data) {\n      return new Promise(function (onSuccess, onError) {\n        var settings = {\n          data: data,\n          url: url,\n          method: _constants2.default.HTTPMETHOD.POST,\n          headers: headers\n        };\n\n        _http2.default.doXhr(settings).then(onSuccess, onError);\n      });\n    }\n\n    /**\r\n     * Makes multipart/form-data ajax request to given url\r\n     * @param {string} url object for ajax request\r\n     * @param {object} headers to be sent with ajax request\r\n     * @param {data} data to be sent as post request body with request\r\n     * @returns {promise} returns promise\r\n     */\n\n  }, {\n    key: 'makeMultiPartAjaxCall',\n    value: function makeMultiPartAjaxCall(url, headers, data) {\n      return new Promise(function (onSuccess, onError) {\n        var settings = {\n          data: data,\n          url: url,\n          method: _constants2.default.HTTPMETHOD.POST,\n          contentType: false,\n          headers: headers\n        };\n\n        _http2.default.doXhr(settings).then(onSuccess, onError);\n      });\n    }\n  }]);\n\n  return Utilities;\n}();\n\nexports.default = Utilities;\n\n/***/ }),\n/* 2 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  return bth[buf[i++]] + bth[buf[i++]] + bth[buf[i++]] + bth[buf[i++]] + '-' + bth[buf[i++]] + bth[buf[i++]] + '-' + bth[buf[i++]] + bth[buf[i++]] + '-' + bth[buf[i++]] + bth[buf[i++]] + '-' + bth[buf[i++]] + bth[buf[i++]] + bth[buf[i++]] + bth[buf[i++]] + bth[buf[i++]] + bth[buf[i++]];\n}\n\nmodule.exports = bytesToUuid;\n\n/***/ }),\n/* 3 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n/* WEBPACK VAR INJECTION */(function(global) {\n\n// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\nvar rng;\n\nvar crypto = global.crypto || global.msCrypto; // for IE 11\nif (crypto && crypto.getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16);\n  rng = function whatwgRNG() {\n    crypto.getRandomValues(rnds8);\n    return rnds8;\n  };\n}\n\nif (!rng) {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var rnds = new Array(16);\n  rng = function rng() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n\nmodule.exports = rng;\n/* WEBPACK VAR INJECTION */}.call(exports, __webpack_require__(15)))\n\n/***/ }),\n/* 4 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _utils = __webpack_require__(1);\n\nvar _utils2 = _interopRequireDefault(_utils);\n\nvar _constants = __webpack_require__(0);\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar ResultColumnsUtils = function () {\n  function ResultColumnsUtils() {\n    _classCallCheck(this, ResultColumnsUtils);\n  }\n\n  _createClass(ResultColumnsUtils, null, [{\n    key: 'validate',\n\n\n    /**\r\n     * Validates the result columns array\r\n     * @param {object} params array of result columns\r\n     */\n    value: function validate(params) {\n      var supportedColumns = Object.keys(_constants2.default.RESULT_COLUMNS).map(function (key) {\n        return _constants2.default.RESULT_COLUMNS[key];\n      });\n\n      params.forEach(function (param) {\n        if (!_utils2.default.doesArrayContainValue(supportedColumns, param)) {\n          throw new Error('Invalid Result Column \\'' + param + '\\'');\n        }\n      });\n    }\n\n    /**\r\n     * Validates the result columns array for license history\r\n     * @param {object} params array of result columns\r\n     */\n\n  }, {\n    key: 'validateLicenseHistory',\n    value: function validateLicenseHistory(params) {\n      var supportedColumns = Object.keys(_constants2.default.LICENSE_HISTORY_RESULT_COLUMNS).map(function (key) {\n        return _constants2.default.LICENSE_HISTORY_RESULT_COLUMNS[key];\n      });\n\n      params.forEach(function (param) {\n        if (!_utils2.default.doesArrayContainValue(supportedColumns, param)) {\n          throw new Error('Invalid Result Column \\'' + param + '\\'');\n        }\n      });\n    }\n\n    /**\r\n     * Encodes the result columns array into uri\r\n     * @param {object} params array of result columns\r\n     * @returns {string} uri encoded result columns\r\n     */\n\n  }, {\n    key: 'encodeURI',\n    value: function encodeURI(params) {\n      var uri = [];\n      params.forEach(function (param) {\n        var paramToStr = encodeURIComponent(_constants2.default.RESULTS_COLUMNS_TOSTRING) + '=' + encodeURIComponent(param);\n        uri.push(paramToStr);\n      });\n\n      return uri.join('&');\n    }\n  }]);\n\n  return ResultColumnsUtils;\n}();\n\nexports.default = ResultColumnsUtils;\n\n/***/ }),\n/* 5 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _utils = __webpack_require__(1);\n\nvar _utils2 = _interopRequireDefault(_utils);\n\nvar _constants = __webpack_require__(0);\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar DECIMAL_RADIX = 10;\n\nvar searchParametersConfig = {\n  words: {\n    type: _constants2.default.SEARCH_PARAMS_TYPE.STRING,\n    toString: '[words]'\n  },\n  limit: {\n    type: _constants2.default.SEARCH_PARAMS_TYPE.INTEGER,\n    max: 64,\n    min: 1,\n    toString: '[limit]'\n  },\n  offset: {\n    type: _constants2.default.SEARCH_PARAMS_TYPE.INTEGER,\n    min: 0,\n    toString: '[offset]'\n  },\n  order: {\n    type: _constants2.default.SEARCH_PARAMS_TYPE.STRING,\n    exists_in: _constants2.default.SEARCH_PARAMS_ORDER,\n    toString: '[order]'\n  },\n  creator_id: {\n    type: _constants2.default.SEARCH_PARAMS_TYPE.INTEGER,\n    toString: '[creator_id]'\n  },\n  media_id: {\n    type: _constants2.default.SEARCH_PARAMS_TYPE.INTEGER,\n    toString: '[media_id]'\n  },\n  model_id: {\n    type: _constants2.default.SEARCH_PARAMS_TYPE.INTEGER,\n    toString: '[model_id]'\n  },\n  serie_id: {\n    type: _constants2.default.SEARCH_PARAMS_TYPE.INTEGER,\n    toString: '[serie_id]'\n  },\n  similar: {\n    type: _constants2.default.SEARCH_PARAMS_TYPE.INTEGER,\n    toString: '[similar]'\n  },\n  similar_image: {\n    type: _constants2.default.SEARCH_PARAMS_TYPE.INTEGER,\n    min: 0,\n    max: 1,\n    toString: '[similar_image]'\n  },\n  similar_url: {\n    type: _constants2.default.SEARCH_PARAMS_TYPE.STRING,\n    toString: '[similar_url]'\n  },\n  category: {\n    type: _constants2.default.SEARCH_PARAMS_TYPE.INTEGER,\n    toString: '[category]'\n  },\n  filters_3d_type_id: {\n    type: _constants2.default.SEARCH_PARAMS_TYPE.ARRAY,\n    exists_in: _constants2.default.SEARCH_PARAMS_3D_TYPES,\n    toString: '[filters][3d_type_id][]'\n  },\n  filters_age: {\n    type: _constants2.default.SEARCH_PARAMS_TYPE.STRING,\n    exists_in: _constants2.default.SEARCH_PARAMS_AGE,\n    toString: '[filters][age]'\n  },\n  filters_area_pixels: {\n    type: _constants2.default.SEARCH_PARAMS_TYPE.RANGE,\n    toString: '[filters][area_pixels]'\n  },\n  filters_colors: {\n    type: _constants2.default.SEARCH_PARAMS_TYPE.STRING,\n    toString: '[filters][colors]'\n  },\n  filters_content_type_3d: {\n    type: _constants2.default.SEARCH_PARAMS_TYPE.INTEGER,\n    min: 0,\n    max: 1,\n    toString: '[filters][content_type:3d]'\n  },\n  filters_content_type_all: {\n    type: _constants2.default.SEARCH_PARAMS_TYPE.INTEGER,\n    min: 0,\n    max: 1,\n    toString: '[filters][content_type:all]'\n  },\n  filters_content_type_illustration: {\n    type: _constants2.default.SEARCH_PARAMS_TYPE.INTEGER,\n    min: 0,\n    max: 1,\n    toString: '[filters][content_type:illustration]'\n  },\n  filters_content_type_photo: {\n    type: _constants2.default.SEARCH_PARAMS_TYPE.INTEGER,\n    min: 0,\n    max: 1,\n    toString: '[filters][content_type:photo]'\n  },\n  filters_content_type_vector: {\n    type: _constants2.default.SEARCH_PARAMS_TYPE.INTEGER,\n    min: 0,\n    max: 1,\n    toString: '[filters][content_type:vector]'\n  },\n  filters_content_type_video: {\n    type: _constants2.default.SEARCH_PARAMS_TYPE.INTEGER,\n    min: 0,\n    max: 1,\n    toString: '[filters][content_type:video]'\n  },\n  filters_content_type_template: {\n    type: _constants2.default.SEARCH_PARAMS_TYPE.INTEGER,\n    min: 0,\n    max: 1,\n    toString: '[filters][content_type:template]'\n  },\n  /* Removing until released\r\n    filters_editorial: {\r\n      type: Constants.SEARCH_PARAMS_TYPE.INTEGER,\r\n      min: 0,\r\n      max: 1,\r\n      toString: '[filters][editorial]',\r\n    },\r\n  */\n  filters_has_releases: {\n    type: _constants2.default.SEARCH_PARAMS_TYPE.STRING,\n    exists_in: _constants2.default.SEARCH_PARAMS_HAS_RELEASES,\n    toString: '[filters][has_releases]'\n  },\n  filters_isolated_on: {\n    type: _constants2.default.SEARCH_PARAMS_TYPE.INTEGER,\n    min: 0,\n    max: 1,\n    toString: '[filters][isolated:on]'\n  },\n  filters_offensive_2: {\n    type: _constants2.default.SEARCH_PARAMS_TYPE.INTEGER,\n    min: 0,\n    max: 1,\n    toString: '[filters][offensive:2]'\n  },\n  filters_orientation: {\n    type: _constants2.default.SEARCH_PARAMS_TYPE.STRING,\n    exists_in: _constants2.default.SEARCH_PARAMS_ORIENTATION,\n    toString: '[filters][orientation]'\n  },\n  filters_panoramic_on: {\n    type: _constants2.default.SEARCH_PARAMS_TYPE.INTEGER,\n    min: 0,\n    max: 1,\n    toString: '[filters][panoramic:on]'\n  },\n  filters_premium: {\n    type: _constants2.default.SEARCH_PARAMS_TYPE.STRING,\n    exists_in: _constants2.default.SEARCH_PARAMS_PREMIUM,\n    toString: '[filters][premium]'\n  },\n  filters_template_category_id: {\n    type: _constants2.default.SEARCH_PARAMS_TYPE.ARRAY,\n    exists_in: _constants2.default.SEARCH_PARAMS_TEMPLATE_CATEGORIES,\n    toString: '[filters][template_category_id][]'\n  },\n  filters_template_type_id: {\n    type: _constants2.default.SEARCH_PARAMS_TYPE.ARRAY,\n    exists_in: _constants2.default.SEARCH_PARAMS_TEMPLATE_TYPES,\n    toString: '[filters][template_type_id][]'\n  },\n  filters_video_duration: {\n    type: _constants2.default.SEARCH_PARAMS_TYPE.STRING,\n    exists_in: _constants2.default.SEARCH_PARAMS_VIDEO_DURATION,\n    toString: '[filters][video_duration]'\n  },\n  thumbnail_size: {\n    type: _constants2.default.SEARCH_PARAMS_TYPE.INTEGER,\n    exists_in: _constants2.default.SEARCH_PARAMS_THUMB_SIZES,\n    toString: '[thumbnail_size]'\n  },\n  gallery_id: {\n    type: _constants2.default.SEARCH_PARAMS_TYPE.STRING,\n    toString: '[gallery_id]'\n  }\n};\n\nvar searchParametersConfigLicenseHistory = {\n  limit: {\n    type: _constants2.default.SEARCH_PARAMS_TYPE.INTEGER,\n    max: 100,\n    min: 1,\n    toString: '[limit]'\n  },\n  offset: {\n    type: _constants2.default.SEARCH_PARAMS_TYPE.INTEGER,\n    min: 0,\n    toString: '[offset]'\n  },\n  thumbnail_size: {\n    type: _constants2.default.SEARCH_PARAMS_TYPE.INTEGER,\n    exists_in: _constants2.default.LICENSE_HISTORY_SEARCH_PARAMS_THUMB_SIZES,\n    toString: '[thumbnail_size]'\n  }\n};\n\nvar SearchParamsUtils = function () {\n  function SearchParamsUtils() {\n    _classCallCheck(this, SearchParamsUtils);\n  }\n\n  _createClass(SearchParamsUtils, null, [{\n    key: 'validate',\n\n    /**\r\n     * Validates the search query parameters\r\n     * @param {object} params object reference of search_parameters\r\n     */\n    value: function validate(params) {\n      Object.keys(params).forEach(function (param) {\n        var value = params[param];\n        var config = searchParametersConfig[param];\n\n        var supportedParams = Object.keys(_constants2.default.SEARCH_PARAMS).map(function (key) {\n          return _constants2.default.SEARCH_PARAMS[key];\n        });\n\n        if (config === undefined || !_utils2.default.doesArrayContainValue(supportedParams, param)) {\n          throw new Error('Search parameter \\'' + param + '\\' not supported!');\n        }\n\n        var permittedValues = [];\n        if (config.exists_in && _utils2.default.isObject(config.exists_in)) {\n          permittedValues = Object.keys(config.exists_in).map(function (key) {\n            return config.exists_in[key];\n          });\n        }\n\n        switch (config.type) {\n          case _constants2.default.SEARCH_PARAMS_TYPE.STRING:\n            {\n              if (!_utils2.default.isString(value)) {\n                throw new Error('Invalid value of Search Parameter \\'' + param + '\\'. It can only have string value.');\n              }\n\n              if (config.exists_in && !_utils2.default.doesArrayContainValue(permittedValues, value)) {\n                throw new Error('Invalid value of Search Parameter \\'' + param + '\\'. It can only have value from [ ' + permittedValues.join(', ') + ' ].');\n              }\n              break;\n            }\n\n          case _constants2.default.SEARCH_PARAMS_TYPE.INTEGER:\n            {\n              if (!_utils2.default.isInteger(value)) {\n                throw new Error('Invalid value of Search Parameter \\'' + param + '\\'. It can only have integers.');\n              }\n\n              if (config.min !== undefined && parseInt(value, DECIMAL_RADIX) < config.min) {\n                throw new Error('Invalid value of Search Parameter \\'' + param + '\\'. It can only have integers >= ' + config.min + '.');\n              }\n\n              if (config.max !== undefined && parseInt(value, DECIMAL_RADIX) > config.max) {\n                throw new Error('Invalid value of Search Parameter \\'' + param + '\\'. It can only have integers <= ' + config.max + '.');\n              }\n\n              break;\n            }\n\n          case _constants2.default.SEARCH_PARAMS_TYPE.RANGE:\n            {\n              var matchResults = value.match(/^([0-9]*)-([0-9]*)$/);\n              if (!matchResults) {\n                throw new Error('Invalid value of Search Parameter \\'' + param + '\\'. It can only have range values. For e.g. 0-250000.');\n              }\n\n              if (matchResults.length < 3 || matchResults[1] > matchResults[2]) {\n                throw new Error('Invalid value of Search Parameter \\'' + param + '\\'. It can only have range values from lower to higher. For e.g. 0-250000.');\n              }\n              break;\n            }\n\n          case _constants2.default.SEARCH_PARAMS_TYPE.ARRAY:\n            {\n              if (!_utils2.default.isArray(value)) {\n                throw new Error('Invalid value of Search Parameter \\'' + param + '\\'. It can only have array.');\n              }\n\n              if (config.exists_in) {\n                value.forEach(function (item) {\n                  if (!_utils2.default.doesArrayContainValue(permittedValues, item)) {\n                    throw new Error('Invalid value of Search Parameter \\'' + param + '\\'. It can only have values from [ ' + permittedValues.join(', ') + ' ].');\n                  }\n                });\n              }\n\n              break;\n            }\n\n          default:\n        }\n      });\n    }\n\n    /**\r\n     * Validates the license history search query parameters\r\n     * @param {object} params object reference of search_parameters\r\n     */\n\n  }, {\n    key: 'validateLicenseHistory',\n    value: function validateLicenseHistory(params) {\n      Object.keys(params).forEach(function (param) {\n        var value = params[param];\n        var config = searchParametersConfigLicenseHistory[param];\n\n        var supportedParams = Object.keys(_constants2.default.LICENSE_HISTORY_SEARCH_PARAMS).map(function (key) {\n          return _constants2.default.LICENSE_HISTORY_SEARCH_PARAMS[key];\n        });\n\n        if (config === undefined || !_utils2.default.doesArrayContainValue(supportedParams, param)) {\n          throw new Error('Search parameter \\'' + param + '\\' not supported!');\n        }\n\n        var permittedValues = [];\n        if (config.exists_in && _utils2.default.isObject(config.exists_in)) {\n          permittedValues = Object.keys(config.exists_in).map(function (key) {\n            return config.exists_in[key];\n          });\n        }\n\n        switch (config.type) {\n          case _constants2.default.SEARCH_PARAMS_TYPE.INTEGER:\n            {\n              if (!_utils2.default.isInteger(value)) {\n                throw new Error('Invalid value of Search Parameter \\'' + param + '\\'. It can only have integers.');\n              }\n\n              if (config.exists_in && !_utils2.default.doesArrayContainValue(permittedValues, value)) {\n                throw new Error('Invalid value of Search Parameter \\'' + param + '\\'. It can only have value from [ ' + permittedValues.join(', ') + ' ].');\n              }\n\n              if (config.min !== undefined && parseInt(value, DECIMAL_RADIX) < config.min) {\n                throw new Error('Invalid value of Search Parameter \\'' + param + '\\'. It can only have integers >= ' + config.min + '.');\n              }\n\n              if (config.max !== undefined && parseInt(value, DECIMAL_RADIX) > config.max) {\n                throw new Error('Invalid value of Search Parameter \\'' + param + '\\'. It can only have integers <= ' + config.max + '.');\n              }\n\n              break;\n            }\n\n          default:\n        }\n      });\n    }\n\n    /**\r\n     * Encodes the search query parameters object into uri\r\n     * @param {object} params object reference of search_parameters\r\n     * @returns {string} encoded uri string\r\n     */\n\n  }, {\n    key: 'encodeURI',\n    value: function encodeURI(params) {\n      var uri = [];\n      Object.keys(params).forEach(function (param) {\n        var value = params[param];\n        var config = searchParametersConfig[param];\n        var paramToStr = 'search_parameters' + config.toString;\n\n        switch (config.type) {\n          case _constants2.default.SEARCH_PARAMS_TYPE.STRING:\n          case _constants2.default.SEARCH_PARAMS_TYPE.INTEGER:\n          case _constants2.default.SEARCH_PARAMS_TYPE.RANGE:\n            uri.push(encodeURIComponent(paramToStr) + '=' + encodeURIComponent(value));\n            break;\n          case _constants2.default.SEARCH_PARAMS_TYPE.ARRAY:\n            params[param].forEach(function (item) {\n              uri.push(encodeURIComponent(paramToStr) + '=' + encodeURIComponent(item));\n            });\n            break;\n          default:\n        }\n      });\n\n      return uri.join('&');\n    }\n  }]);\n\n  return SearchParamsUtils;\n}();\n\nexports.default = SearchParamsUtils;\n\n/***/ }),\n/* 6 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Copyright 2017 Adobe Systems Incorporated. All rights reserved.\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * you may not use this file except in compliance with the License. You may obtain a copy\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\n\nvar _searchParamsUtils = __webpack_require__(5);\n\nvar _searchParamsUtils2 = _interopRequireDefault(_searchParamsUtils);\n\nvar _resultColumnsUtils = __webpack_require__(4);\n\nvar _resultColumnsUtils2 = _interopRequireDefault(_resultColumnsUtils);\n\nvar _utils = __webpack_require__(1);\n\nvar _utils2 = _interopRequireDefault(_utils);\n\nvar _downSamplingUtils = __webpack_require__(16);\n\nvar _downSamplingUtils2 = _interopRequireDefault(_downSamplingUtils);\n\nvar _constants = __webpack_require__(0);\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\r\n * Creates the url for search files api\r\n * @param {string} endpoint api endpoint url\r\n * @param {object} queryParams object of query parameters\r\n * @returns {string} api url\r\n */\nfunction createSearchFilesApiUrl(endpoint, queryParams) {\n  var url = endpoint;\n  var paramsStr = [];\n\n  if (queryParams.locale) {\n    paramsStr.push('locale=' + encodeURIComponent(queryParams.locale));\n  }\n\n  if (queryParams.search_parameters) {\n    paramsStr.push(_searchParamsUtils2.default.encodeURI(queryParams.search_parameters));\n  }\n\n  if (queryParams.result_columns) {\n    paramsStr.push(_resultColumnsUtils2.default.encodeURI(queryParams.result_columns));\n  }\n\n  if (paramsStr.length > 0) {\n    url = url + '?' + paramsStr.join('&');\n  }\n\n  return url;\n}\n\n/**\r\n * Creates the url for license history api\r\n * @param {string} endpoint api endpoint url\r\n * @param {object} queryParams object of query parameters\r\n * @returns {string} api url\r\n */\nfunction createLicenseHistoryApiUrl(endpoint, queryParams) {\n  var url = endpoint;\n  var paramsStr = [];\n\n  if (queryParams.locale) {\n    paramsStr.push('locale=' + encodeURIComponent(queryParams.locale));\n  }\n\n  if (queryParams.search_parameters) {\n    paramsStr.push(_searchParamsUtils2.default.encodeURI(queryParams.search_parameters));\n  }\n\n  if (queryParams.result_columns) {\n    paramsStr.push(_resultColumnsUtils2.default.encodeURI(queryParams.result_columns));\n  }\n\n  if (paramsStr.length > 0) {\n    url = url + '?' + paramsStr.join('&');\n  }\n\n  return url;\n}\n\n/**\r\n * Creates the url for search files api\r\n * @param {string} endpoint api endpoint url\r\n * @param {object} queryParams object of query parameters\r\n * @returns {string} api url\r\n */\nfunction createSearchCategoryApiUrl(endpoint, queryParams) {\n  var url = endpoint;\n  var paramsStr = [];\n\n  if (queryParams.locale) {\n    paramsStr.push(_constants2.default.QUERY_PARAMS_PROPS.LOCALE + '=' + encodeURIComponent(queryParams.locale));\n  }\n\n  if (queryParams.category_id) {\n    paramsStr.push(_constants2.default.QUERY_PARAMS_PROPS.CATEGORY + '=' + encodeURIComponent(queryParams.category_id));\n  }\n\n  if (paramsStr.length > 0) {\n    url = url + '?' + paramsStr.join('&');\n  }\n\n  return url;\n}\n\n/**\r\n * Creates the url for access member profile api\r\n * @param {string} (required) endpoint api endpoint url\r\n * @param {integer} contentId (optional) asset's unique identifer\r\n * @param {string} license (optional) licensing state for the asset.\r\n * @param {string} locale (optional) location language code\r\n * @returns {string} api url\r\n */\nfunction createAccessMemberProfileApiUrl(endpoint, contentId, license, locale) {\n  var url = endpoint;\n  var paramsStr = [];\n\n  if (locale) {\n    paramsStr.push('locale=' + encodeURIComponent(locale));\n  }\n\n  if (contentId) {\n    paramsStr.push('content_id=' + encodeURIComponent(contentId));\n  }\n\n  if (license) {\n    paramsStr.push('license=' + encodeURIComponent(license));\n  }\n\n  url = url + '?' + paramsStr.join('&');\n\n  return url;\n}\n\n/**\r\n * Creates the url for content info api\r\n * @param {string} (required) endpoint api endpoint url\r\n * @param {integer} contentId (required) asset's unique identifer\r\n * @param {string} license (optional) licensing state for the asset.\r\n * @returns {string} api url\r\n */\nfunction createContentInfoApiUrl(endpoint, contentId, license) {\n  var url = endpoint;\n  var paramsStr = [];\n\n  paramsStr.push('content_id=' + encodeURIComponent(contentId));\n  if (license) {\n    paramsStr.push('license=' + encodeURIComponent(license));\n  }\n\n  url = url + '?' + paramsStr.join('&');\n\n  return url;\n}\n\n/**\r\n * Creates the url for request license api\r\n * @param {string} (required) endpoint api endpoint url\r\n * @param {integer} contentId (required) asset's unique identifer\r\n * @param {string} license (optional) licensing state for the asset.\r\n * @returns {string} api url\r\n */\nfunction createRequestLicenseApiUrl(endpoint, contentId, license) {\n  var url = endpoint;\n  var paramsStr = [];\n\n  paramsStr.push('content_id=' + encodeURIComponent(contentId));\n  if (license) {\n    paramsStr.push('license=' + encodeURIComponent(license));\n  }\n\n  url = url + '?' + paramsStr.join('&');\n\n  return url;\n}\n\n/**\r\n * Creates the url for member abandon profile api\r\n * @param {string} (required) endpoint api endpoint url\r\n * @param {integer} contentId (required) asset's unique identifer\r\n * @param {string} state (required) user's purchase relationship to an asset\r\n * @returns {string} api url\r\n */\nfunction createMemberAbandonApiUrl(endpoint, contentId, state) {\n  var url = endpoint;\n  var paramsStr = [];\n\n  paramsStr.push('content_id=' + encodeURIComponent(contentId));\n  paramsStr.push('state=' + encodeURIComponent(state));\n\n  url = url + '?' + paramsStr.join('&');\n\n  return url;\n}\n\n/**\r\n * Get the http method for the search files api call\r\n * @param {object} queryParams object of query parameters\r\n * @returns {string} http method\r\n */\nfunction getSearchFilesApiHttpMethod(queryParams) {\n  var method = _constants2.default.HTTPMETHOD.GET;\n  // The http method for similar image search is POST\n  if (queryParams.search_parameters && queryParams.search_parameters.similar_image === 1) {\n    method = _constants2.default.HTTPMETHOD.POST;\n  }\n\n  return method;\n}\n\n/**\r\n * Get the http method for the request license api call.\r\n * @param {array} cceAgency\r\n * @returns {string} http method\r\n */\nfunction getRequestLicenseApiHttpMethod(cceAgency) {\n  var method = _constants2.default.HTTPMETHOD.GET;\n  if (cceAgency) {\n    method = _constants2.default.HTTPMETHOD.POST;\n  }\n\n  return method;\n}\n\nvar StockApis = function () {\n  /*\r\n   * Constructor of StockApis class\r\n   */\n  function StockApis(config) {\n    _classCallCheck(this, StockApis);\n\n    this.config = config;\n  }\n  /**\r\n   * Creates the url for search api\r\n   * @param {string} accessToken to be sent with Authorization header\r\n   * @param {object} queryParams query params object to be used for search files api query params\r\n   * @returns {promise} returns promise\r\n   */\n\n\n  _createClass(StockApis, [{\n    key: 'searchFiles',\n    value: function searchFiles(accessToken, queryParams) {\n      var _this = this;\n\n      return new Promise(function (onSuccess, onError) {\n        try {\n          var httpMethod = getSearchFilesApiHttpMethod(queryParams);\n\n          var requestURL = createSearchFilesApiUrl(_this.config.endpoints.search, queryParams);\n\n          var headers = {\n            'x-api-key': _this.config.x_api_key,\n            'x-product': _this.config.x_product\n          };\n\n          if (accessToken) {\n            headers.Authorization = 'Bearer ' + accessToken;\n          }\n\n          if (httpMethod === _constants2.default.HTTPMETHOD.GET) {\n            _utils2.default.makeGetAjaxCall(requestURL, headers).then(onSuccess, onError);\n          } else {\n            // multipart/form-data request for similar_image search\n            var fd = new FormData();\n            var downsamplePromise = _downSamplingUtils2.default.downsampleAndFixOrientationImage(queryParams.similar_image);\n            downsamplePromise.then(function (downsampledFile) {\n              fd.append('similar_image', downsampledFile);\n              _utils2.default.makeMultiPartAjaxCall(requestURL, headers, fd).then(onSuccess, onError);\n            }, function (e) {\n              onError(e);\n            });\n          }\n        } catch (e) {\n          onError(e);\n        }\n      });\n    }\n\n    /**\r\n     * Creates the url for license history api\r\n     * @param {string} accessToken to be sent with Authorization header\r\n     * @param {object} queryParams query params object to be used for license history api query params\r\n     * @returns {promise} returns promise\r\n     */\n\n  }, {\n    key: 'licenseHistory',\n    value: function licenseHistory(accessToken, queryParams) {\n      var _this2 = this;\n\n      return new Promise(function (onSuccess, onError) {\n        try {\n          var requestURL = createLicenseHistoryApiUrl(_this2.config.endpoints.license_history, queryParams);\n          var headers = {\n            'x-api-key': _this2.config.x_api_key,\n            'x-product': _this2.config.x_product\n          };\n\n          if (accessToken) {\n            headers.Authorization = 'Bearer ' + accessToken;\n          }\n\n          _utils2.default.makeGetAjaxCall(requestURL, headers).then(onSuccess, onError);\n        } catch (e) {\n          onError(e);\n        }\n      });\n    }\n\n    /**\r\n     * Creates the url for category search api and fetch the result\r\n     * @param {object} queryParams query params object to be used for search category api query params\r\n     * @returns {promise} returns promise\r\n     */\n\n  }, {\n    key: 'searchCategory',\n    value: function searchCategory(queryParams) {\n      var _this3 = this;\n\n      return new Promise(function (onSuccess, onError) {\n        try {\n          var requestURL = createSearchCategoryApiUrl(_this3.config.endpoints.category, queryParams);\n\n          var headers = {\n            'x-api-key': _this3.config.x_api_key,\n            'x-product': _this3.config.x_product\n          };\n\n          _utils2.default.makeGetAjaxCall(requestURL, headers).then(onSuccess, onError);\n        } catch (e) {\n          onError(e);\n        }\n      });\n    }\n\n    /**\r\n     * Creates the url for category search api and fetch the result\r\n     * @param {object} queryParams query params object to be used for search category api query params\r\n     * @returns {promise} returns promise\r\n     */\n\n  }, {\n    key: 'searchCategoryTree',\n    value: function searchCategoryTree(queryParams) {\n      var _this4 = this;\n\n      return new Promise(function (onSuccess, onError) {\n        try {\n          var requestURL = createSearchCategoryApiUrl(_this4.config.endpoints.category_tree, queryParams);\n\n          var headers = {\n            'x-api-key': _this4.config.x_api_key,\n            'x-product': _this4.config.x_product\n          };\n\n          _utils2.default.makeGetAjaxCall(requestURL, headers).then(onSuccess, onError);\n        } catch (e) {\n          onError(e);\n        }\n      });\n    }\n\n    /**\r\n     * Acess member profile\r\n     * @param {string} {required} accessToken to be sent with Authorization header\r\n     * @param {integer} contentId (required) asset's unique identifer\r\n     * @param {string} license (required) licensing state for the asset.\r\n     * @param {string} locale (optional) location language code\r\n     * @returns {promise} returns promise\r\n     */\n\n  }, {\n    key: 'accessMemberProfile',\n    value: function accessMemberProfile(accessToken, contentId, license, locale) {\n      var _this5 = this;\n\n      return new Promise(function (onSuccess, onError) {\n        try {\n          var requestURL = createAccessMemberProfileApiUrl(_this5.config.endpoints.user_profile, contentId, license, locale);\n\n          var headers = {\n            'x-api-key': _this5.config.x_api_key,\n            'x-product': _this5.config.x_product\n          };\n\n          headers.Authorization = 'Bearer ' + accessToken;\n\n          _utils2.default.makeGetAjaxCall(requestURL, headers).then(onSuccess, onError);\n        } catch (e) {\n          onError(e);\n        }\n      });\n    }\n\n    /**\r\n     * Notifies the system when a user abandons a licensing operation\r\n     * @param {string} {required} accessToken to be sent with Authorization header\r\n     * @param {integer} contentId (required) asset's unique identifer\r\n     * @param {string} state (required) user's purchase relationship to an asset\r\n     * @returns {promise} returns promise\r\n     */\n\n  }, {\n    key: 'memberAbandon',\n    value: function memberAbandon(accessToken, contentId, state) {\n      var _this6 = this;\n\n      return new Promise(function (onSuccess, onError) {\n        try {\n          var requestURL = createMemberAbandonApiUrl(_this6.config.endpoints.abandon, contentId, state);\n\n          var headers = {\n            'x-api-key': _this6.config.x_api_key,\n            'x-product': _this6.config.x_product\n          };\n\n          headers.Authorization = 'Bearer ' + accessToken;\n\n          _utils2.default.makeGetAjaxCall(requestURL, headers).then(onSuccess, onError);\n        } catch (e) {\n          onError(e);\n        }\n      });\n    }\n\n    /**\r\n     * Get licensing information about a specific asset for a specific user\r\n     * @param {string} {required} accessToken to be sent with Authorization header\r\n     * @param {integer} contentId (required) asset's unique identifer\r\n     * @param {string} license (required) licensing state for the asset.\r\n     * @returns {promise} returns promise\r\n     */\n\n  }, {\n    key: 'licenseInfo',\n    value: function licenseInfo(accessToken, contentId, license) {\n      var _this7 = this;\n\n      return new Promise(function (onSuccess, onError) {\n        try {\n          var requestURL = createContentInfoApiUrl(_this7.config.endpoints.license_info, contentId, license);\n\n          var headers = {\n            'x-api-key': _this7.config.x_api_key,\n            'x-product': _this7.config.x_product\n          };\n\n          headers.Authorization = 'Bearer ' + accessToken;\n\n          _utils2.default.makeGetAjaxCall(requestURL, headers).then(onSuccess, onError);\n        } catch (e) {\n          onError(e);\n        }\n      });\n    }\n\n    /**\r\n    * Requests a license for an asset for a specific user\r\n    * @param {string} {required} accessToken to be sent with Authorization header\r\n    * @param {integer} contentId (required) asset's unique identifer\r\n    * @param {string} license (required) licensing state for the asset.\r\n    * @param {array} cceAgency (optional) Specifies license references.\r\n    * @returns {promise} returns promise\r\n    */\n\n  }, {\n    key: 'requestLicense',\n    value: function requestLicense(accessToken, contentId, license, cceAgency) {\n      var _this8 = this;\n\n      return new Promise(function (onSuccess, onError) {\n        try {\n          var httpMethod = getRequestLicenseApiHttpMethod(cceAgency);\n          var requestURL = createRequestLicenseApiUrl(_this8.config.endpoints.license, contentId, license);\n\n          var headers = {\n            'x-api-key': _this8.config.x_api_key,\n            'x-product': _this8.config.x_product\n          };\n\n          headers.Authorization = 'Bearer ' + accessToken;\n\n          if (httpMethod === _constants2.default.HTTPMETHOD.GET) {\n            _utils2.default.makeGetAjaxCall(requestURL, headers).then(onSuccess, onError);\n          } else {\n            var obj = {\n              cce_agency: cceAgency\n            };\n            var postData = JSON.stringify(obj);\n            _utils2.default.makePostAjaxCall(requestURL, headers, postData).then(onSuccess, onError);\n          }\n        } catch (e) {\n          onError(e);\n        }\n      });\n    }\n\n    /**\r\n     * Download the asset if user has valid quota or already purchased\r\n     * @param {string} accessToken (required) access token to be used for Authorization header\r\n     * @param {integer} contentId (required) asset's unique identifer\r\n     * @param {string} license (required) licensing state for the asset.\r\n     * @param {string} assetReturnMethodType (optional) how to retrive the image e.g. URL,\r\n     byte etc default is URL\r\n     * @returns {promise} promise\r\n     */\n\n  }, {\n    key: 'downloadAsset',\n    value: function downloadAsset(accessToken, contentId, license) {\n      var _this9 = this;\n\n      return new Promise(function (onSuccess, onError) {\n        _this9.licenseInfo(accessToken, contentId, license).then(function (response) {\n          if (response.contents[contentId].purchase_details.state !== _constants2.default.PURCHASE_STATE_PARAMS.PURCHASED) {\n            _this9.accessMemberProfile(accessToken, contentId, license).then(function (res) {\n              var canBuy = res.available_entitlement.quota !== 0 || res.purchase_options.state === _constants2.default.PURCHASE_STATE_PARAMS.OVERAGE;\n              if (canBuy) {\n                onError(new Error('Content not licensed but have enough quota or overage plan, so first buy the license!'));\n              } else {\n                onError(new Error('Content not licensed and you do not have enough quota or overage plan!'));\n              }\n            }, function (error) {\n              onError(error);\n            });\n          } else {\n            _this9.requestLicense(accessToken, contentId, license).then(function (res) {\n              var URL = res.contents[contentId].purchase_details.url;\n              URL = URL + '?token=' + accessToken;\n              onSuccess(URL);\n            }, function (error) {\n              onError(error);\n            });\n          }\n        }, function (error) {\n          onError(error);\n        });\n      });\n    }\n  }]);\n\n  return StockApis;\n}();\n\nexports.default = StockApis;\n\n/***/ }),\n/* 7 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Copyright 2017 Adobe Systems Incorporated. All rights reserved.\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * you may not use this file except in compliance with the License. You may obtain a copy\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\n\nvar _constants = __webpack_require__(0);\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar prodEndpoints = __webpack_require__(18);\nvar stageEndpoints = __webpack_require__(19);\n\nvar Config = function () {\n\n  /**\r\n   * Constructor for Config class\r\n   * @param {string} apiKey x_api_key header for the api calls\r\n   * @param {string} product x_product header for the api calls\r\n   * @param {ENVIRONMENT} env defines the environment for the library\r\n   */\n  function Config(apiKey, product) {\n    var env = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : _constants2.default.ENVIRONMENT.PROD;\n\n    _classCallCheck(this, Config);\n\n    this.target_env = env;\n\n    this.endpoints = this.target_env === _constants2.default.ENVIRONMENT.PROD ? prodEndpoints : stageEndpoints;\n\n    if (apiKey) {\n      this.x_api_key = apiKey;\n    } else {\n      throw new Error('Api Key configuration is missing!');\n    }\n\n    if (product) {\n      this.x_product = product;\n    } else {\n      throw new Error('Product configuration is missing!');\n    }\n  }\n\n  /**\r\n   * Checks if the config is initialized/set\r\n   * @returns {boolean} true if config is initialized/set, false otherwise\r\n   */\n\n\n  _createClass(Config, [{\n    key: 'isConfigInitialized',\n    value: function isConfigInitialized() {\n      if (this.target_env && this.endpoints && this.x_api_key && this.x_product) {\n        return true;\n      }\n      return false;\n    }\n  }]);\n\n  return Config;\n}();\n\nexports.default = Config;\n\n/***/ }),\n/* 8 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Copyright 2017 Adobe Systems Incorporated. All rights reserved.\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * you may not use this file except in compliance with the License. You may obtain a copy\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\n\nvar _utils = __webpack_require__(1);\n\nvar _utils2 = _interopRequireDefault(_utils);\n\nvar _constants = __webpack_require__(0);\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar DEFAULT_LICENSE_HISTORY_LIMIT = 100;\n\n/**\r\n * Helper function for LicenseHistoryIterator to clone Query Params object\r\n * @param {object} queryParams object to be cloned\r\n * @returns {object} the cloned object\r\n */\nfunction cloneQueryParamsHelper(queryParams) {\n  var cloneQueryParams = {};\n\n  Object.keys(queryParams).forEach(function (key) {\n    if (key === _constants2.default.QUERY_PARAMS_PROPS.SEARCH_PARAMETERS || key === _constants2.default.QUERY_PARAMS_PROPS.RESULT_COLUMNS) {\n      cloneQueryParams[key] = JSON.parse(JSON.stringify(queryParams[key]));\n    } else {\n      cloneQueryParams[key] = queryParams[key];\n    }\n  });\n\n  return cloneQueryParams;\n}\n\n/**\r\n * Stores queryParams\r\n * @private\r\n */\nfunction storeQueryParamsState() {\n  this.lastQueryParams = this.queryParams;\n}\n\n/**\r\n * Restores queryParams\r\n * @private\r\n */\nfunction revertToLastQueryParamsState() {\n  if (this.lastQueryParams) {\n    this.queryParams = this.lastQueryParams;\n  }\n  this.lastQueryParams = null;\n}\n\n/**\r\n * Does stuff on doApiCall success\r\n * @param {string} response string from the api\r\n */\nfunction doOnSuccess(response) {\n  this.response = response;\n\n  this.apiInProgress = false;\n}\n\n/**\r\n * Does stuff on doApiCall failure\r\n */\nfunction doOnError() {\n  revertToLastQueryParamsState.call(this);\n  this.apiInProgress = false;\n}\n\n/**\r\n * Do license history api call\r\n * @param {object} queryParams query parameter object\r\n * @returns {promise} returns promise\r\n */\nfunction doApiCall(queryParams) {\n  var _this = this;\n\n  return new Promise(function (onSuccess, onError) {\n    if (_this.apiInProgress) {\n      throw new Error('Some other search is already in progress!');\n    }\n\n    try {\n      _this.apiInProgress = true;\n\n      storeQueryParamsState.call(_this);\n      _this.queryParams = queryParams;\n\n      if (_this.stockApis) {\n        _this.stockApis.licenseHistory(_this.accessToken, _this.queryParams).then(function (response) {\n          doOnSuccess.call(_this, response);\n          if (onSuccess) {\n            onSuccess();\n          }\n        }, function (error) {\n          doOnError.call(_this, error);\n          if (onError) {\n            onError(error);\n          }\n        });\n      } else {\n        throw new Error('Library couldn\\'t initialize properly! Please initialize the library first.');\n      }\n    } catch (e) {\n      doOnError.call(_this, e);\n      if (onError) {\n        onError(e);\n      }\n    }\n  });\n}\n\n/**\r\n * LicenseHistoryIterator class\r\n */\n\nvar LicenseHistoryIterator = function () {\n\n  /**\r\n   * constructor of LicenseHistoryIterator\r\n   * @param {StockApis} stockApis api object\r\n   * @param {string} accessToken access token string to be used with api calls\r\n   * @param {object} queryParams query params object to be used for license history api query params\r\n   * @param {boolean} nbResultsPresent nb_results column was present in user requested columns\r\n   */\n  function LicenseHistoryIterator(stockApis, accessToken, queryParams, nbResultsPresent) {\n    _classCallCheck(this, LicenseHistoryIterator);\n\n    this.stockApis = stockApis;\n    this.accessToken = accessToken;\n    this.queryParams = queryParams;\n    this.nbResultsPresent = nbResultsPresent;\n    this.response = {};\n    this.lastQueryParams = null;\n    this.apiInProgress = false;\n\n    if (!this.queryParams.search_parameters.limit) {\n      this.queryParams.search_parameters.limit = DEFAULT_LICENSE_HISTORY_LIMIT;\n    }\n\n    // Set the offset to one page behind to the current page\n    if (!this.queryParams.search_parameters.offset) {\n      this.queryParams.search_parameters.offset = 0;\n    }\n\n    this.queryParams.search_parameters.offset -= this.queryParams.search_parameters.limit;\n  }\n\n  /**\r\n  * Returns total licensed files available\r\n  * @returns {integer} total licensed files available\r\n   */\n\n\n  _createClass(LicenseHistoryIterator, [{\n    key: 'totalSearchFiles',\n    value: function totalSearchFiles() {\n      if (this.queryParams.search_parameters.offset >= 0 && this.response.nb_results) {\n        return this.response.nb_results;\n      }\n      return _constants2.default.LICENSE_HISTORY_ITERATOR_RETURN_ERROR;\n    }\n\n    /**\r\n     * Returns total license history pages\r\n     * @returns {integer} total license history (pages) available\r\n     */\n\n  }, {\n    key: 'totalSearchPages',\n    value: function totalSearchPages() {\n      if (this.queryParams.search_parameters.offset >= 0 && this.response.nb_results) {\n        return Math.ceil(this.response.nb_results / this.queryParams.search_parameters.limit);\n      }\n      return _constants2.default.LICENSE_HISTORY_ITERATOR_RETURN_ERROR;\n    }\n\n    /**\r\n     * Returns current license history page index\r\n     * @returns {integer} index of current license history (page) available\r\n     */\n\n  }, {\n    key: 'currentSearchPageIndex',\n    value: function currentSearchPageIndex() {\n      if (this.queryParams.search_parameters.offset >= 0 && this.response.nb_results) {\n        var offset = this.queryParams.search_parameters.offset;\n        return Math.ceil(offset / this.queryParams.search_parameters.limit);\n      }\n      return _constants2.default.LICENSE_HISTORY_ITERATOR_RETURN_ERROR;\n    }\n\n    /**\r\n     * Returns response from last api call\r\n     * @returns {object} response object available from last api call\r\n     */\n\n  }, {\n    key: 'getResponse',\n    value: function getResponse() {\n      var userResponse = cloneQueryParamsHelper(this.response);\n\n      if (!this.nbResultsPresent && userResponse.nb_results) {\n        delete userResponse.nb_results;\n      }\n\n      return userResponse;\n    }\n\n    /**\r\n     * function to get to next license history page\r\n     * @returns {promise} returns the promise\r\n     */\n\n  }, {\n    key: 'next',\n    value: function next() {\n      var _this2 = this;\n\n      return new Promise(function (onSuccess, onError) {\n        try {\n          var queryParams = cloneQueryParamsHelper(_this2.queryParams);\n\n          var limit = queryParams.search_parameters.limit;\n\n          if (!queryParams.search_parameters.offset) {\n            queryParams.search_parameters.offset = limit;\n          } else {\n            queryParams.search_parameters.offset += limit;\n          }\n\n          if (_this2.response.nb_results && queryParams.search_parameters.offset >= _this2.response.nb_results) {\n            throw new Error('No more search results available!');\n          }\n\n          doApiCall.call(_this2, queryParams).then(onSuccess, onError);\n        } catch (er) {\n          if (onError) {\n            onError(er);\n          }\n        }\n      });\n    }\n\n    /**\r\n     * function to get to previous license history page\r\n     * @returns {promise} returns the promise\r\n     */\n\n  }, {\n    key: 'previous',\n    value: function previous() {\n      var _this3 = this;\n\n      return new Promise(function (onSuccess, onError) {\n        try {\n          var queryParams = cloneQueryParamsHelper(_this3.queryParams);\n\n          queryParams.search_parameters.offset -= queryParams.search_parameters.limit;\n\n          if (queryParams.search_parameters.offset < 0) {\n            throw new Error('No more search results available!');\n          }\n\n          doApiCall.call(_this3, queryParams).then(onSuccess, onError);\n        } catch (er) {\n          if (onError) {\n            onError(er);\n          }\n        }\n      });\n    }\n\n    /**\r\n     * function to skip to a specific license history results page\r\n     * @param {integer} pageIndex (required) the index of page to skip on\r\n     * @returns {promise} returns the promise\r\n     */\n\n  }, {\n    key: 'skipTo',\n    value: function skipTo(pageIndex) {\n      var _this4 = this;\n\n      return new Promise(function (onSuccess, onError) {\n        try {\n          var totalPages = _this4.totalSearchPages();\n\n          if (!_utils2.default.isInteger(pageIndex) || pageIndex < 0 || totalPages !== _constants2.default.LICENSE_HISTORY_ITERATOR_RETURN_ERROR && pageIndex >= totalPages) {\n            throw new Error('Page index out of bounds!');\n          }\n\n          var queryParams = cloneQueryParamsHelper(_this4.queryParams);\n\n          queryParams.search_parameters.offset = pageIndex * queryParams.search_parameters.limit;\n\n          if (queryParams.search_parameters.offset < 0) {\n            throw new Error('No more search results available!');\n          }\n\n          doApiCall.call(_this4, queryParams).then(onSuccess, onError);\n        } catch (er) {\n          if (onError) {\n            onError(er);\n          }\n        }\n      });\n    }\n  }]);\n\n  return LicenseHistoryIterator;\n}();\n\nexports.default = LicenseHistoryIterator;\n\n/***/ }),\n/* 9 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Copyright 2017 Adobe Systems Incorporated. All rights reserved.\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * you may not use this file except in compliance with the License. You may obtain a copy\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\n\nvar _utils = __webpack_require__(1);\n\nvar _utils2 = _interopRequireDefault(_utils);\n\nvar _constants = __webpack_require__(0);\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar DEFAULT_SEARCH_FILES_LIMIT = 32;\n\n/**\r\n * Helper function for SearchFilesIterator to clone Query Params object\r\n * @param {object} queryParams object to be cloned\r\n * @returns {object} the cloned object\r\n */\nfunction cloneQueryParamsHelper(queryParams) {\n  var cloneQueryParams = {};\n\n  Object.keys(queryParams).forEach(function (key) {\n    if (key === _constants2.default.QUERY_PARAMS_PROPS.SEARCH_PARAMETERS || key === _constants2.default.QUERY_PARAMS_PROPS.RESULT_COLUMNS) {\n      cloneQueryParams[key] = JSON.parse(JSON.stringify(queryParams[key]));\n    } else {\n      cloneQueryParams[key] = queryParams[key];\n    }\n  });\n\n  return cloneQueryParams;\n}\n\n/**\r\n * Stores queryParams\r\n * @private\r\n */\nfunction storeQueryParamsState() {\n  this.lastQueryParams = this.queryParams;\n}\n\n/**\r\n * Restores queryParams\r\n * @private\r\n */\nfunction revertToLastQueryParamsState() {\n  if (this.lastQueryParams) {\n    this.queryParams = this.lastQueryParams;\n  }\n  this.lastQueryParams = null;\n}\n\n/**\r\n * Does stuff on doApiCall success\r\n * @param {string} response string from the api\r\n */\nfunction doOnSuccess(response) {\n  this.response = response;\n\n  this.apiInProgress = false;\n}\n\n/**\r\n * Does stuff on doApiCall failure\r\n */\nfunction doOnError() {\n  revertToLastQueryParamsState.call(this);\n  this.apiInProgress = false;\n}\n\n/**\r\n * Do search files api call\r\n * @param {object} queryParams query parameter object\r\n * @returns {promise} returns promise\r\n */\nfunction doApiCall(queryParams) {\n  var _this = this;\n\n  return new Promise(function (onSuccess, onError) {\n    if (_this.apiInProgress) {\n      throw new Error('Some other search is already in progress!');\n    }\n\n    try {\n      _this.apiInProgress = true;\n\n      storeQueryParamsState.call(_this);\n      _this.queryParams = queryParams;\n\n      if (_this.stockApis) {\n        _this.stockApis.searchFiles(_this.accessToken, _this.queryParams).then(function (response) {\n          doOnSuccess.call(_this, response);\n          if (onSuccess) {\n            onSuccess();\n          }\n        }, function (error) {\n          doOnError.call(_this, error);\n          if (onError) {\n            onError(error);\n          }\n        });\n      } else {\n        throw new Error('Library couldn\\'t initialize properly! Please initialize the library first.');\n      }\n    } catch (e) {\n      doOnError.call(_this, e);\n      if (onError) {\n        onError(e);\n      }\n    }\n  });\n}\n\n/**\r\n * SearchFilesIterator class\r\n */\n\nvar SearchFilesIterator = function () {\n\n  /**\r\n   * constructor of SearchFilesIterator\r\n   * @param {StockApis} stockApis api object\r\n   * @param {string} accessToken access token string to be used with api calls\r\n   * @param {object} queryParams query params object to be used for search files api query params\r\n   * @param {boolean} nbResultsPresent nb_results column was present in user requested columns\r\n   */\n  function SearchFilesIterator(stockApis, accessToken, queryParams, nbResultsPresent) {\n    _classCallCheck(this, SearchFilesIterator);\n\n    this.stockApis = stockApis;\n    this.accessToken = accessToken;\n    this.queryParams = queryParams;\n    this.nbResultsPresent = nbResultsPresent;\n    this.response = {};\n    this.lastQueryParams = null;\n    this.apiInProgress = false;\n\n    if (!this.queryParams.search_parameters.limit) {\n      this.queryParams.search_parameters.limit = DEFAULT_SEARCH_FILES_LIMIT;\n    }\n\n    // Set the offset to one page behind to the current page\n    if (!this.queryParams.search_parameters.offset) {\n      this.queryParams.search_parameters.offset = 0;\n    }\n\n    this.queryParams.search_parameters.offset -= this.queryParams.search_parameters.limit;\n  }\n\n  /**\r\n  * Returns total search files available\r\n  * @returns {integer} total search files available\r\n   */\n\n\n  _createClass(SearchFilesIterator, [{\n    key: 'totalSearchFiles',\n    value: function totalSearchFiles() {\n      if (this.queryParams.search_parameters.offset >= 0 && this.response.nb_results) {\n        return this.response.nb_results;\n      }\n      return _constants2.default.SEARCH_FILES_ITERATOR_RETURN_ERROR;\n    }\n\n    /**\r\n     * Returns total search results pages\r\n     * @returns {integer} total search results (pages) available\r\n     */\n\n  }, {\n    key: 'totalSearchPages',\n    value: function totalSearchPages() {\n      if (this.queryParams.search_parameters.offset >= 0 && this.response.nb_results) {\n        return Math.ceil(this.response.nb_results / this.queryParams.search_parameters.limit);\n      }\n      return _constants2.default.SEARCH_FILES_ITERATOR_RETURN_ERROR;\n    }\n\n    /**\r\n     * Returns current search results page index\r\n     * @returns {integer} index of current search results (page) available\r\n     */\n\n  }, {\n    key: 'currentSearchPageIndex',\n    value: function currentSearchPageIndex() {\n      if (this.queryParams.search_parameters.offset >= 0 && this.response.nb_results) {\n        var offset = this.queryParams.search_parameters.offset;\n        return Math.ceil(offset / this.queryParams.search_parameters.limit);\n      }\n      return _constants2.default.SEARCH_FILES_ITERATOR_RETURN_ERROR;\n    }\n\n    /**\r\n     * Returns response from last api call\r\n     * @returns {object} response object available from last api call\r\n     */\n\n  }, {\n    key: 'getResponse',\n    value: function getResponse() {\n      var userResponse = cloneQueryParamsHelper(this.response);\n\n      if (!this.nbResultsPresent && userResponse.nb_results) {\n        delete userResponse.nb_results;\n      }\n\n      return userResponse;\n    }\n\n    /**\r\n     * function to get to next search results page\r\n     * @returns {promise} returns the promise\r\n     */\n\n  }, {\n    key: 'next',\n    value: function next() {\n      var _this2 = this;\n\n      return new Promise(function (onSuccess, onError) {\n        try {\n          var queryParams = cloneQueryParamsHelper(_this2.queryParams);\n\n          var limit = queryParams.search_parameters.limit;\n\n          if (!queryParams.search_parameters.offset) {\n            queryParams.search_parameters.offset = limit;\n          } else {\n            queryParams.search_parameters.offset += limit;\n          }\n\n          if (_this2.response.nb_results && queryParams.search_parameters.offset >= _this2.response.nb_results) {\n            throw new Error('No more search results available!');\n          }\n\n          doApiCall.call(_this2, queryParams).then(onSuccess, onError);\n        } catch (er) {\n          if (onError) {\n            onError(er);\n          }\n        }\n      });\n    }\n\n    /**\r\n     * function to get to previous search results page\r\n     * @returns {promise} returns the promise\r\n     */\n\n  }, {\n    key: 'previous',\n    value: function previous() {\n      var _this3 = this;\n\n      return new Promise(function (onSuccess, onError) {\n        try {\n          var queryParams = cloneQueryParamsHelper(_this3.queryParams);\n\n          queryParams.search_parameters.offset -= queryParams.search_parameters.limit;\n\n          if (queryParams.search_parameters.offset < 0) {\n            throw new Error('No more search results available!');\n          }\n\n          doApiCall.call(_this3, queryParams).then(onSuccess, onError);\n        } catch (er) {\n          if (onError) {\n            onError(er);\n          }\n        }\n      });\n    }\n\n    /**\r\n     * function to skip to a specific search results page\r\n     * @param {integer} pageIndex (required) the index of page to skip on\r\n     * @returns {promise} returns the promise\r\n     */\n\n  }, {\n    key: 'skipTo',\n    value: function skipTo(pageIndex) {\n      var _this4 = this;\n\n      return new Promise(function (onSuccess, onError) {\n        try {\n          var totalPages = _this4.totalSearchPages();\n\n          if (!_utils2.default.isInteger(pageIndex) || pageIndex < 0 || totalPages !== _constants2.default.SEARCH_FILES_ITERATOR_RETURN_ERROR && pageIndex >= totalPages) {\n            throw new Error('Page index out of bounds!');\n          }\n\n          var queryParams = cloneQueryParamsHelper(_this4.queryParams);\n\n          queryParams.search_parameters.offset = pageIndex * queryParams.search_parameters.limit;\n\n          if (queryParams.search_parameters.offset < 0) {\n            throw new Error('No more search results available!');\n          }\n\n          doApiCall.call(_this4, queryParams).then(onSuccess, onError);\n        } catch (er) {\n          if (onError) {\n            onError(er);\n          }\n        }\n      });\n    }\n  }]);\n\n  return SearchFilesIterator;\n}();\n\nexports.default = SearchFilesIterator;\n\n/***/ }),\n/* 10 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _constants = __webpack_require__(0);\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nvar _utils = __webpack_require__(1);\n\nvar _utils2 = _interopRequireDefault(_utils);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\r\n * validates license against the predefined license type\r\n * @param {string} license License type\r\n */\nfunction validateLicenseType(license) {\n  // stock APIs do case insensitive matching for license type,\n  // hence converting all characters to lower case\n  var licenseLower = license.toLowerCase();\n\n  // check if license is one of the license type supported\n  if (!_utils2.default.doesJSONContainsValue(_constants2.default.LICENSE_STATE_PARAMS, licenseLower)) {\n    throw new Error('License type not supported!');\n  }\n}\n\n/**\r\n * validates license state against the predefined license state\r\n * @param {string} state License state\r\n */\nfunction validateLicenseState(state) {\n  // stock APIs do case insensitive matching for license state,\n  // hence converting all characters to lower case\n  var stateLower = state.toLowerCase();\n  // check if license is one of the license type supported\n  if (!_utils2.default.doesJSONContainsValue(_constants2.default.PURCHASE_STATE_PARAMS, stateLower)) {\n    throw new Error('License state not supported!');\n  }\n}\n\nvar LicenseParamsUtils = function () {\n  function LicenseParamsUtils() {\n    _classCallCheck(this, LicenseParamsUtils);\n  }\n\n  _createClass(LicenseParamsUtils, null, [{\n    key: 'validateContentLicenseParams',\n\n    /**\r\n     * function to verify the params for the license related APIs\r\n     * @param {string} accessToken access token to be used for Authorization header\r\n     * @param {integer} contentId asset's unique identifer\r\n     * @param {string} license licensing state for the asset.\r\n     */\n    value: function validateContentLicenseParams(accessToken, contentId, license) {\n      if (accessToken == null || typeof accessToken !== 'string') {\n        throw new Error('access token missing or not of type string!');\n      }\n\n      if (contentId == null || Number.isInteger(contentId) === false) {\n        throw new Error('contentId missing or contentId is not of type Integer!');\n      }\n\n      if (license && typeof license !== 'string') {\n        throw new Error('license is not of type string!');\n      }\n\n      if (license) {\n        validateLicenseType(license);\n      }\n    }\n\n    /**\r\n     * function to verify the params for the license related APIs\r\n     * @param {string} accessToken access token to be used for Authorization header\r\n     * @param {integer} contentId asset's unique identifer\r\n     * @param {string} state licensing state for the asset.\r\n     */\n\n  }, {\n    key: 'validateMemberAbandonLicenseParams',\n    value: function validateMemberAbandonLicenseParams(accessToken, contentId, state) {\n      if (accessToken == null || typeof accessToken !== 'string') {\n        throw new Error('access Token missing or not of type string!');\n      }\n\n      if (contentId == null || Number.isInteger(contentId) === false) {\n        throw new Error('contentId missing or contentId is not of type Integer!');\n      }\n\n      if (state == null || typeof state !== 'string') {\n        throw new Error('state missing or state is not of type string!');\n      }\n\n      validateLicenseState(state);\n    }\n\n    /**\r\n     * function to verify the params for the license related APIs\r\n     * @param {string} accessToken access token to be used for Authorization header\r\n     * @param {integer} contentId asset's unique identifer\r\n     * @param {string} license licensing state for the asset.\r\n     */\n\n  }, {\n    key: 'validateMemberProfileLicenseParams',\n    value: function validateMemberProfileLicenseParams(accessToken, contentId, license) {\n      if (accessToken == null || typeof accessToken !== 'string') {\n        throw new Error('access token missing or not of type string!');\n      }\n\n      if (contentId && Number.isInteger(contentId) === false) {\n        throw new Error('contentId is not of type Integer!');\n      }\n\n      if (license && typeof license !== 'string') {\n        throw new Error('license is not of type string!');\n      }\n\n      if (license) {\n        validateLicenseType(license);\n      }\n    }\n\n    /**\r\n     * function to verify the reference data for Content License API\r\n     * @param {array} cceAgency Specifies license references.\r\n     */\n\n  }, {\n    key: 'validateReferenceData',\n    value: function validateReferenceData(cceAgency) {\n      if (!_utils2.default.isArray(cceAgency)) {\n        throw new Error('cceAgency is not of type array');\n      }\n\n      cceAgency.forEach(function (referenceData) {\n        if (referenceData.id == null || _utils2.default.isInteger(referenceData.id) === false) {\n          throw new Error('id missing or id is not of type Integer!');\n        }\n\n        if (referenceData.value == null || typeof referenceData.value !== 'string') {\n          throw new Error('value missing or value is not of type string!');\n        }\n      });\n    }\n  }]);\n\n  return LicenseParamsUtils;\n}();\n\nexports.default = LicenseParamsUtils;\n\n/***/ }),\n/* 11 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _utils = __webpack_require__(1);\n\nvar _utils2 = _interopRequireDefault(_utils);\n\nvar _searchParamsUtils = __webpack_require__(5);\n\nvar _searchParamsUtils2 = _interopRequireDefault(_searchParamsUtils);\n\nvar _resultColumnsUtils = __webpack_require__(4);\n\nvar _resultColumnsUtils2 = _interopRequireDefault(_resultColumnsUtils);\n\nvar _constants = __webpack_require__(0);\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar QueryParamsUtils = function () {\n  function QueryParamsUtils() {\n    _classCallCheck(this, QueryParamsUtils);\n  }\n\n  _createClass(QueryParamsUtils, null, [{\n    key: 'isNBResultsColumnPresent',\n\n\n    /**\r\n    * Checks if the queryParams has nb_results column\r\n    * @param {!object} queryParams object of query parameters\r\n    * @returns {boolean} true if nb_results present, false otherwise\r\n    */\n    value: function isNBResultsColumnPresent(queryParams) {\n      // we need result column for hasMoreFiles & nextSearchFiles to work properly\n      if (queryParams.result_columns && queryParams.result_columns.indexOf(_constants2.default.RESULT_COLUMNS.NB_RESULTS) === -1) {\n        return false;\n      }\n\n      // if result_columns isn't present in query params then default result_columns\n      // contains nb_results\n      return true;\n    }\n\n    /**\r\n    * Add result column nb_results\r\n    * @param {!object} queryParams object of query parameters\r\n    * @returns {object} query parameter object with nb_results column if added\r\n    */\n\n  }, {\n    key: 'addResultColumnNBResults',\n    value: function addResultColumnNBResults(queryParams) {\n      if (queryParams.result_columns && QueryParamsUtils.isNBResultsColumnPresent(queryParams)) {\n        throw new Error('Query parameter already contains nb_results in result_columns');\n      }\n\n      // we need result column for hasMoreFiles & nextSearchFiles to work properly\n      if (queryParams.result_columns) {\n        queryParams.result_columns.push(_constants2.default.RESULT_COLUMNS.NB_RESULTS);\n      }\n\n      return queryParams;\n    }\n\n    /**\r\n    * Validates the query parameters\r\n    * @param {!object} queryParams object of query parameters\r\n    * @param {string} accessToken access token to be validated if is_licensed requested in results\r\n    * column\r\n    */\n\n  }, {\n    key: 'validateSearchFileQueryParams',\n    value: function validateSearchFileQueryParams(queryParams, accessToken) {\n      Object.keys(queryParams).forEach(function (param) {\n        if (param === _constants2.default.QUERY_PARAMS_PROPS.LOCALE) {\n          if (typeof queryParams[param] !== 'string') {\n            throw new Error('locale expects string only. For e.g. en-US, fr-FR etc.');\n          }\n        } else if (param === _constants2.default.QUERY_PARAMS_PROPS.SEARCH_PARAMETERS) {\n          _searchParamsUtils2.default.validate(queryParams[param]);\n        } else if (param === _constants2.default.QUERY_PARAMS_PROPS.RESULT_COLUMNS) {\n          _resultColumnsUtils2.default.validate(queryParams[param]);\n        } else if (param !== _constants2.default.QUERY_PARAMS_PROPS.SIMILAR_IMAGE) {\n          throw new Error('Invalid query parameter \\'' + param + '\\'! for file search query');\n        }\n      });\n\n      // Check if is_licensed is requested in result_columns\n      if (queryParams.result_columns && queryParams.result_columns.indexOf(_constants2.default.RESULT_COLUMNS.IS_LICENSED) > -1 && !accessToken) {\n        throw new Error('Access Token missing! Result Column \\'is_licensed\\' requires authentication.');\n      }\n\n      if (queryParams.search_parameters && queryParams.search_parameters.similar_image === 1 && !queryParams.similar_image) {\n        throw new Error('Image Data missing! Search parameter similar_image requires similar_image in query parameters');\n      }\n    }\n\n    /**\r\n    * Validates the query parameters for license history\r\n    * @param {!object} queryParams object of query parameters\r\n    * @param {string} accessToken access token to be validated if is_licensed requested in results\r\n    * column\r\n    */\n\n  }, {\n    key: 'validateLicenseHistoryQueryParams',\n    value: function validateLicenseHistoryQueryParams(queryParams) {\n      Object.keys(queryParams).forEach(function (param) {\n        if (param === _constants2.default.QUERY_PARAMS_PROPS.LOCALE) {\n          if (typeof queryParams[param] !== 'string') {\n            throw new Error('locale expects string only. For e.g. en-US, fr-FR etc.');\n          }\n        } else if (param === _constants2.default.QUERY_PARAMS_PROPS.SEARCH_PARAMETERS) {\n          _searchParamsUtils2.default.validateLicenseHistory(queryParams[param]);\n        } else if (param === _constants2.default.QUERY_PARAMS_PROPS.RESULT_COLUMNS) {\n          _resultColumnsUtils2.default.validateLicenseHistory(queryParams[param]);\n        } else {\n          throw new Error('Invalid query parameter \\'' + param + '\\'! for license history query');\n        }\n      });\n    }\n\n    /**\r\n    * Validates the query parameters\r\n    * @param {!object} queryParams object of query parameters\r\n    */\n\n  }, {\n    key: 'validateSearchCategoryQueryParams',\n    value: function validateSearchCategoryQueryParams(queryParams) {\n      QueryParamsUtils.validateSearchCategoryTreeQueryParams(queryParams);\n\n      //  category_id is required with url parameters\n      if (!Object.getOwnPropertyDescriptor(queryParams, _constants2.default.QUERY_PARAMS_PROPS.CATEGORY)) {\n        throw new Error('category_id missing! category search requires category_id in query parameters.');\n      }\n    }\n\n    /**\r\n    * Validates the query parameters\r\n    * @param {!object} queryParams object of query parameters\r\n    */\n\n  }, {\n    key: 'validateSearchCategoryTreeQueryParams',\n    value: function validateSearchCategoryTreeQueryParams(queryParams) {\n      if (queryParams && !_utils2.default.isObject(queryParams)) {\n        throw new Error('queryParams expects Object!');\n      }\n\n      Object.keys(queryParams).forEach(function (param) {\n        if (param === _constants2.default.QUERY_PARAMS_PROPS.LOCALE) {\n          if (typeof queryParams[param] !== 'string') {\n            throw new Error('locale expects string only. For e.g. en-US, fr-FR etc.');\n          }\n        } else if (param === _constants2.default.QUERY_PARAMS_PROPS.CATEGORY) {\n          if (!Number.isInteger(queryParams[param])) {\n            throw new Error('category_id expects integer only. For e.g. 1043, 4526 etc.');\n          }\n        } else {\n          throw new Error('Invalid query parameter \\'' + param + '\\'! for category search query!');\n        }\n      });\n    }\n  }]);\n\n  return QueryParamsUtils;\n}();\n\nexports.default = QueryParamsUtils;\n\n/***/ }),\n/* 12 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar v1 = __webpack_require__(13);\nvar v4 = __webpack_require__(14);\n\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\n\nmodule.exports = uuid;\n\n/***/ }),\n/* 13 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\n// Unique ID creation requires a high quality random # generator.  We feature\n// detect to determine the best RNG source, normalizing to a function that\n// returns 128-bits of randomness, since that's what's usually required\nvar rng = __webpack_require__(3);\nvar bytesToUuid = __webpack_require__(2);\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\n// random #'s we need to init node and clockseq\nvar _seedBytes = rng();\n\n// Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\nvar _nodeId = [_seedBytes[0] | 0x01, _seedBytes[1], _seedBytes[2], _seedBytes[3], _seedBytes[4], _seedBytes[5]];\n\n// Per 4.2.2, randomize (14 bit) clockseq\nvar _clockseq = (_seedBytes[6] << 8 | _seedBytes[7]) & 0x3fff;\n\n// Previous uuid creation time\nvar _lastMSecs = 0,\n    _lastNSecs = 0;\n\n// See https://github.com/broofa/node-uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = msecs - _lastMSecs + (nsecs - _lastNSecs) / 10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = msecs / 0x100000000 * 10000 & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  var node = options.node || _nodeId;\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : bytesToUuid(b);\n}\n\nmodule.exports = v1;\n\n/***/ }),\n/* 14 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar rng = __webpack_require__(3);\nvar bytesToUuid = __webpack_require__(2);\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof options == 'string') {\n    buf = options == 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = rnds[6] & 0x0f | 0x40;\n  rnds[8] = rnds[8] & 0x3f | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n\n/***/ }),\n/* 15 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nvar g;\n\n// This works in non-strict mode\ng = function () {\n\treturn this;\n}();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || Function(\"return this\")() || (1, eval)(\"this\");\n} catch (e) {\n\t// This works if the window reference is available\n\tif ((typeof window === \"undefined\" ? \"undefined\" : _typeof(window)) === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n\n/***/ }),\n/* 16 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _constants = __webpack_require__(0);\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar DownSamplingUtils = function () {\n  function DownSamplingUtils() {\n    _classCallCheck(this, DownSamplingUtils);\n  }\n\n  _createClass(DownSamplingUtils, null, [{\n    key: 'dataURItoBlob',\n\n    /**\r\n    * Converts the data uri from a canvas to a blob that can be pushed to redpill\r\n    *\r\n    * @param {Object} dataURI\r\n    * @return {Object} blob of uri data\r\n    */\n    value: function dataURItoBlob(dataURI) {\n      // convert base64/URLEncoded data component to raw binary data held in a string\n      var byteString = void 0;\n      var uriSplit = dataURI.split(',');\n\n      if (uriSplit[0].indexOf('base64') >= 0) {\n        byteString = atob(uriSplit[1]);\n      } else {\n        byteString = decodeURI(uriSplit[1]);\n      }\n\n      // separate out the mime component\n      var mimeString = uriSplit[0].split(':')[1].split(';')[0];\n\n      // write the bytes of the string to a typed array\n      var ia = new Uint8Array(byteString.length);\n      for (var i = 0; i < byteString.length; i += 1) {\n        ia[i] = byteString.charCodeAt(i);\n      }\n\n      return new Blob([ia], { type: mimeString });\n    }\n    /**\r\n    * Pulls the orientation tag out of the EXIF information of the image if any\r\n    *\r\n    * @param {ArrayBuffer} result\r\n    * @return {number} Orientation tag if any for the image in the array buffer\r\n    */\n\n  }, {\n    key: 'getImageOrientation',\n    value: function getImageOrientation(result) {\n      if (!(result && result instanceof ArrayBuffer && result.byteLength !== undefined)) {\n        throw new Error('parameter must be of type  ArrayBuffer!');\n      }\n\n      var view = new DataView(result);\n      var marker = 0;\n      var length = view.byteLength;\n      var little = void 0;\n      var tags = void 0;\n      var offset = 2;\n      var defualtOrientation = -1;\n\n      if (view.getUint16(0, false) !== _constants2.default.EXIF_FILE_FORMAT_PARAMS.JPG_START_MARKER) {\n        return -2;\n      }\n\n      var lastMarker = _constants2.default.EXIF_FILE_FORMAT_PARAMS.LAST_MARKER;\n      var markerAnded = marker & lastMarker; // eslint-disable-line no-bitwise\n\n      while (offset < length) {\n        marker = view.getUint16(offset, false);\n        offset += 2;\n\n        if (marker === _constants2.default.EXIF_FILE_FORMAT_PARAMS.APP1_MARKER) {\n          offset += 2;\n          if (view.getUint32(offset, false) !== _constants2.default.EXIF_FILE_FORMAT_PARAMS.EXIF_HEADER) {\n            return -1;\n          }\n\n          little = view.getUint16(offset += 6, false) === _constants2.default.EXIF_FILE_FORMAT_PARAMS.TIF_HEADER;\n          offset += view.getUint32(offset + 4, little);\n          tags = view.getUint16(offset, little);\n          offset += 2;\n\n          for (var i = 0; i < tags; i += 1) {\n            if (view.getUint16(offset + i * 12, little) === _constants2.default.EXIF_FILE_FORMAT_PARAMS.ORIENTATION_TAG) {\n              return view.getUint16(offset + i * 12 + 8, little);\n            }\n          }\n        } else if (markerAnded !== _constants2.default.EXIF_FILE_FORMAT_PARAMS.LAST_MARKER) {\n          break;\n        } else {\n          offset += view.getUint16(offset, false);\n        }\n      }\n\n      return defualtOrientation;\n    }\n\n    /**\r\n    * Converts a base64 string to an array buffer\r\n    *\r\n    * @param {Object} dataURI\r\n    * @return {ArrayBuffer} The base64 blob is converted to an array buffer\r\n    */\n\n  }, {\n    key: 'base64ToArrayBuffer',\n    value: function base64ToArrayBuffer(dataURI) {\n      var byteString = void 0;\n      var uriSplit = dataURI.split(',');\n\n      if (uriSplit[0].indexOf('base64') >= 0) {\n        byteString = atob(uriSplit[1]);\n      } else {\n        byteString = decodeURI(uriSplit[1]);\n      }\n\n      var len = byteString.length;\n      var bytes = new Uint8Array(len);\n\n      for (var i = 0; i < len; i += 1) {\n        bytes[i] = byteString.charCodeAt(i);\n      }\n\n      return bytes.buffer;\n    }\n\n    /**\r\n    * Checks to see if the Image needs to be downsampled or rotated and does it\r\n    *\r\n    * @param {Integer} originalWidth width of the image\r\n    * @param {Integer} originalHeight height of the image\r\n    * @return {Object} with two parameters 'width' and 'height'\r\n    */\n\n  }, {\n    key: 'calculateResizeParams',\n    value: function calculateResizeParams(originalWidth, originalHeight) {\n      var imgWidth = originalWidth;\n      var imgHeight = originalHeight;\n\n      if (Math.max(originalWidth, originalHeight) > _constants2.default.DOWNSAMPLE_PARAMS.LONGEST_SIDE_MAXIMUM) {\n        throw new Error('Image dropped is too large for visual search!');\n      } else {\n        var aspectRatio = originalWidth / originalHeight;\n        if (originalWidth > originalHeight) {\n          if (originalWidth > _constants2.default.DOWNSAMPLE_PARAMS.LONGEST_SIDE_DOWNSAMPLE_TO) {\n            imgWidth = _constants2.default.DOWNSAMPLE_PARAMS.LONGEST_SIDE_DOWNSAMPLE_TO;\n            imgHeight = _constants2.default.DOWNSAMPLE_PARAMS.LONGEST_SIDE_DOWNSAMPLE_TO / aspectRatio;\n          }\n        } else if (originalHeight > _constants2.default.DOWNSAMPLE_PARAMS.LONGEST_SIDE_DOWNSAMPLE_TO) {\n          imgWidth = _constants2.default.DOWNSAMPLE_PARAMS.LONGEST_SIDE_DOWNSAMPLE_TO * aspectRatio;\n          imgHeight = _constants2.default.DOWNSAMPLE_PARAMS.LONGEST_SIDE_DOWNSAMPLE_TO;\n        }\n      }\n\n      var resizeParams = {};\n      resizeParams.width = imgWidth;\n      resizeParams.height = imgHeight;\n\n      return resizeParams;\n    }\n\n    /**\r\n    * Checks to see if the Image needs to be downsampled or rotated and does it\r\n    *\r\n    * @param {Image} img image to be downsampled\r\n    * @param {Integer} orientation EXIF orientation value\r\n    * @return {Blob} resized file\r\n    */\n\n  }, {\n    key: 'resizeImage',\n    value: function resizeImage(img, orientation) {\n      // grab the original image width and height\n      var originalWidth = img.naturalWidth;\n      var originalHeight = img.naturalHeight;\n\n      var resizeParams = DownSamplingUtils.calculateResizeParams(originalWidth, originalHeight);\n\n      var imgWidth = resizeParams.width;\n      var imgHeight = resizeParams.height;\n\n      var canvas = void 0;\n      var ctx = void 0;\n      var cx = 0;\n      var cy = 0;\n      var degree = 0;\n      var orientationNeedsFlip = [2, 4, 5, 7];\n      var resizedFile = void 0;\n\n      // if we don't need to downsize but we do need to rotate or\n      // flip then lets use the original width/height\n      if (orientation !== 1 && imgWidth === 0 && imgHeight === 0) {\n        imgWidth = originalWidth;\n        imgHeight = originalHeight;\n      }\n\n      // if a new width and height was set then downsample to those dimensions\n      if (imgWidth > 0 && imgHeight > 0) {\n        // Create an empty canvas element\n        canvas = document.createElement('canvas');\n\n        // Copy the image contents to the canvas\n        ctx = canvas.getContext('2d');\n\n        // Calculate new x/y coorditates for image if needed\n        switch (orientation) {\n          case 5:\n          case 6:\n            degree = 90;\n            cy = imgHeight * -1;\n            break;\n\n          case 3:\n          case 4:\n            degree = 180;\n            cx = imgWidth * -1;\n            cy = imgHeight * -1;\n            break;\n          case 7:\n          case 8:\n            degree = 270;\n            cx = imgWidth * -1;\n            break;\n          default:\n          // ignore any other values\n        }\n\n        // if the rotation changes the aspect ratio of the image\n        // then use the image height for canvas width and vice versa\n        if (degree === 0 || degree === 180) {\n          canvas.width = imgWidth;\n          canvas.height = imgHeight;\n        } else {\n          canvas.width = imgHeight;\n          canvas.height = imgWidth;\n        }\n\n        // flip the image if needed\n        if (orientationNeedsFlip.indexOf(orientation) > -1) {\n          ctx.translate(imgHeight, 0);\n          ctx.scale(-1, 1);\n        }\n\n        if (degree > 0) {\n          ctx.rotate(degree * Math.PI / 180);\n        }\n\n        ctx.drawImage(img, cx, cy, imgWidth, imgHeight);\n        resizedFile = DownSamplingUtils.dataURItoBlob(canvas.toDataURL('image/jpeg'));\n      }\n\n      // we have a properly sized file\n      return resizedFile;\n    }\n\n    /**\r\n    * Checks to see if the file needs to be downsampled or rotated and does it\r\n    *\r\n    * @param {Object} file\r\n    */\n\n  }, {\n    key: 'downsampleAndFixOrientationImage',\n    value: function downsampleAndFixOrientationImage(file) {\n      return new Promise(function (onSuccess, onFailure) {\n        try {\n          if (!/\\.(png|jpeg|jpg|gif)$/i.test(file.name)) {\n            throw new Error('Unsupported image extension.! AdobeStock supports only JPG, JPEG, PNG and GIF!');\n          }\n\n          var reader = new FileReader();\n          var orientation = -1;\n          // Since the File Object does not hold the size of an image\n          // we need to create a new image and assign it's src, so when\n          // the image is loaded we can calculate it's width and height:\n          var img = new Image();\n\n          reader.onload = function () {\n            img.onerror = function () {\n              onFailure('Unsupported filetype for visual search.!');\n            };\n\n            img.onload = function () {\n              try {\n                var resizedFile = DownSamplingUtils.resizeImage(img, orientation);\n                onSuccess(resizedFile);\n              } catch (err) {\n                onFailure(err.message);\n              }\n            };\n\n            // pull the orientation from the image\n            orientation = DownSamplingUtils.getImageOrientation(DownSamplingUtils.base64ToArrayBuffer(reader.result));\n\n            img.src = reader.result;\n          };\n\n          reader.readAsDataURL(file);\n        } catch (err) {\n          onFailure(err.message);\n        }\n      });\n    }\n  }]);\n\n  return DownSamplingUtils;\n}();\n\nexports.default = DownSamplingUtils;\n\n/***/ }),\n/* 17 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\nvar _uuid = __webpack_require__(12);\n\nvar _uuid2 = _interopRequireDefault(_uuid);\n\nvar _constants = __webpack_require__(0);\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nvar DECIMAL_RADIX = 10;\n\nvar Http = function () {\n  function Http() {\n    _classCallCheck(this, Http);\n  }\n\n  _createClass(Http, null, [{\n    key: 'getXhr',\n\n    /**\r\n     * Creates XMLHttpRequest object as per browser support\r\n     * @returns {XMLHttpRequest} XMLHttpRequest object reference\r\n     */\n    value: function getXhr() {\n      var xhr = null;\n\n      try {\n        // Chrome, Opera, Firefox, Safari\n        xhr = new XMLHttpRequest();\n      } catch (e1) {\n        // Internet Explorer Browsers\n        try {\n          xhr = new window.ActiveXObject('Msxml2.XMLHTTP');\n        } catch (e2) {\n          try {\n            xhr = new window.ActiveXObject('Microsoft.XMLHTTP');\n          } catch (e3) {\n            // do nothing\n          }\n        }\n      }\n\n      return xhr;\n    }\n\n    /**\r\n     * Does Ajax call as per settings provided\r\n     * @param {object} settings object for ajax request\r\n     * @param {string} accessToken to be sent with Authorization header\r\n     * @returns {promise} returns promise\r\n     */\n\n  }, {\n    key: 'doXhr',\n    value: function doXhr(settings) {\n      return new Promise(function (onSuccess, onError) {\n        try {\n          var defaultSettings = {\n            async: true,\n            method: _constants2.default.HTTPMETHOD.GET,\n            crossDomain: false,\n            contentType: 'application/x-www-form-urlencoded',\n            headers: {\n              'cache-control': 'no-cache',\n              'x-request-id': (0, _uuid2.default)()\n            }\n          };\n\n          var resolvedSettings = _extends({}, defaultSettings, settings);\n\n          var xhr = Http.getXhr();\n\n          if (!xhr) {\n            throw new Error('Browser doesn\\'t support XHR!');\n          }\n\n          if (settings.headers) {\n            resolvedSettings.headers = _extends({}, defaultSettings.headers, settings.headers);\n          }\n\n          xhr.onreadystatechange = function onReadyStateChanged() {\n            if (this.readyState === 4 && this.status === 200) {\n              if (onSuccess) {\n                onSuccess(this.response);\n              }\n            } else if (this.readyState === 4 && parseInt(this.status / 100, DECIMAL_RADIX) === 4) {\n              if (onError) {\n                onError(this.response);\n              }\n            } else if (this.readyState === 4 && this.status !== 0) {\n              if (onError) {\n                onError(this.statusText);\n              }\n            } else if (this.readyState === 4) {\n              if (onError) {\n                onError(new Error('Request got aborted!'));\n              }\n            }\n          };\n\n          xhr.open(resolvedSettings.method, resolvedSettings.url, resolvedSettings.async);\n\n          // set the headers\n          Object.keys(resolvedSettings.headers).forEach(function (header) {\n            xhr.setRequestHeader(header, resolvedSettings.headers[header]);\n          });\n\n          if (typeof resolvedSettings.contentType === 'string' && resolvedSettings.contentType) {\n            xhr.setRequestHeader('Content-type', resolvedSettings.contentType);\n          }\n\n          if (resolvedSettings.crossDomain) {\n            xhr.withCredentials = true;\n          }\n\n          xhr.responseType = 'json';\n\n          if (resolvedSettings.method === _constants2.default.HTTPMETHOD.GET) {\n            xhr.send(null);\n          } else {\n            xhr.send(resolvedSettings.data);\n          }\n        } catch (er) {\n          if (onError) {\n            onError(er);\n          }\n        }\n      });\n    }\n  }]);\n\n  return Http;\n}();\n\nexports.default = Http;\n\n/***/ }),\n/* 18 */\n/***/ (function(module, exports) {\n\nmodule.exports = {\"search\":\"https://stock.adobe.io/Rest/Media/1/Search/Files\",\"license_history\":\"https://stock.adobe.io/Rest/Libraries/1/Member/LicenseHistory\",\"category\":\"https://stock.adobe.io/Rest/Media/1/Search/Category\",\"category_tree\":\"https://stock.adobe.io/Rest/Media/1/Search/CategoryTree\",\"license\":\"https://stock.adobe.io/Rest/Libraries/1/Content/License\",\"license_info\":\"https://stock.adobe.io/Rest/Libraries/1/Content/Info\",\"user_profile\":\"https://stock.adobe.io/Rest/Libraries/1/Member/Profile\",\"abandon\":\"https://stock.adobe.io/Rest/Libraries/1/Member/Abandon\"}\n\n/***/ }),\n/* 19 */\n/***/ (function(module, exports) {\n\nmodule.exports = {\"search\":\"https://stock-stage.adobe.io/Rest/Media/1/Search/Files\",\"license_history\":\"https://stock-stage.adobe.io/Rest/Libraries/1/Member/LicenseHistory\",\"category\":\"https://stock-stage.adobe.io/Rest/Media/1/Search/Category\",\"category_tree\":\"https://stock-stage.adobe.io/Rest/Media/1/Search/CategoryTree\",\"license\":\"https://stock-stage.adobe.io/Rest/Libraries/1/Content/License\",\"license_info\":\"https://stock-stage.adobe.io/Rest/Libraries/1/Content/Info\",\"user_profile\":\"https://stock-stage.adobe.io/Rest/Libraries/1/Member/Profile\",\"abandon\":\"https://stock-stage.adobe.io/Rest/Libraries/1/Member/Abandon\"}\n\n/***/ }),\n/* 20 */\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nvar _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; };\n\nvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }(); /**\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * Copyright 2017 Adobe Systems Incorporated. All rights reserved.\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * you may not use this file except in compliance with the License. You may obtain a copy\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      */\n\n\nvar _utils = __webpack_require__(1);\n\nvar _utils2 = _interopRequireDefault(_utils);\n\nvar _config = __webpack_require__(7);\n\nvar _config2 = _interopRequireDefault(_config);\n\nvar _stockApis = __webpack_require__(6);\n\nvar _stockApis2 = _interopRequireDefault(_stockApis);\n\nvar _searchFilesIterator = __webpack_require__(9);\n\nvar _searchFilesIterator2 = _interopRequireDefault(_searchFilesIterator);\n\nvar _licenseHistoryIterator = __webpack_require__(8);\n\nvar _licenseHistoryIterator2 = _interopRequireDefault(_licenseHistoryIterator);\n\nvar _constants = __webpack_require__(0);\n\nvar _constants2 = _interopRequireDefault(_constants);\n\nvar _queryParamsUtils = __webpack_require__(11);\n\nvar _queryParamsUtils2 = _interopRequireDefault(_queryParamsUtils);\n\nvar _licenseParamsUtils = __webpack_require__(10);\n\nvar _licenseParamsUtils2 = _interopRequireDefault(_licenseParamsUtils);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\n/**\r\n * function to check if AdobeStock initialized properly\r\n * @returns {boolean} return true if AdobeStock initialized, false otherwise\r\n */\nfunction isAdobeStockInitialized() {\n  if (this.config.isConfigInitialized() && this.stockApis) {\n    return true;\n  }\n\n  return false;\n}\n\n/**\r\n * The Adobe Stock library class\r\n */\n\nvar AdobeStock = function () {\n\n  /**\r\n   * Constructor for AdobeStock class\r\n   * @param {string} apiKey api key of the client used for the header for the api calls\r\n   * @param {string} product header for the api calls\r\n   * @param {Environment} targetEnv defines the set environment for the library\r\n   */\n  function AdobeStock(apiKey, product, targetEnv) {\n    _classCallCheck(this, AdobeStock);\n\n    this.config = new _config2.default(apiKey, product, targetEnv);\n    this.stockApis = new _stockApis2.default(this.config);\n  }\n\n  /**\r\n   * Enum for stack environment\r\n   */\n\n\n  _createClass(AdobeStock, [{\n    key: 'searchFilesByCategory',\n\n\n    /**\r\n     * function to search stock files by category id\r\n     * @param {string} accessToken (required) access token to be used for Authorization header\r\n     * @param {integer} categoryId (required) the identifier of category to be searched for files\r\n     * @param {string} locale (optional) location language code\r\n     * @param {object} filters (optional) of search_parameters\r\n     * @param {object} resultColumns (optional) desired result columns in the response\r\n     * @returns {SearchFilesIterator} object of SearchFilesIterator type\r\n     */\n    value: function searchFilesByCategory(accessToken, categoryId, locale, filters, resultColumns) {\n      var queryParams = {\n        locale: locale,\n        search_parameters: {\n          category: categoryId\n        }\n      };\n\n      if (filters && _utils2.default.isObject(filters)) {\n        _extends(queryParams.search_parameters, filters);\n      } else if (filters && !_utils2.default.isObject(filters)) {\n        throw new Error('filters expects Object!');\n      }\n\n      return this.searchFiles(accessToken, queryParams, resultColumns);\n    }\n\n    /**\r\n     * function to search similar stock files by media id\r\n     * @param {string} accessToken (required) access token to be used for Authorization header\r\n     * @param {integer} mediaId (required) the identifier of media to be searched for similar files\r\n     * @param {string} locale (optional) location language code\r\n     * @param {object} filters (optional) of search_parameters\r\n     * @param {object} resultColumns (optional) desired result columns in the response\r\n     * @returns {SearchFilesIterator} object of SearchFilesIterator type\r\n     */\n\n  }, {\n    key: 'searchSimilarFilesById',\n    value: function searchSimilarFilesById(accessToken, mediaId, locale, filters, resultColumns) {\n      var queryParams = {\n        locale: locale,\n        search_parameters: {\n          similar: mediaId\n        }\n      };\n\n      if (filters && _utils2.default.isObject(filters)) {\n        _extends(queryParams.search_parameters, filters);\n      } else if (filters && !_utils2.default.isObject(filters)) {\n        throw new Error('filters expects Object!');\n      }\n\n      return this.searchFiles(accessToken, queryParams, resultColumns);\n    }\n\n    /**\r\n     * function to search stock files by keywords\r\n     * @param {string} accessToken (required) access token to be used for Authorization header\r\n     * @param {string} keywords (required) the keywords to be searched for files\r\n     * @param {string} locale (optional) location language code\r\n     * @param {object} filters (optional) of search_parameters\r\n     * @param {object} resultColumns (optional) desired result columns in the response\r\n     * @returns {SearchFilesIterator} object of SearchFilesIterator type\r\n     */\n\n  }, {\n    key: 'searchFilesByKeywords',\n    value: function searchFilesByKeywords(accessToken, keywords, locale, filters, resultColumns) {\n      var queryParams = {\n        locale: locale,\n        search_parameters: {\n          words: keywords\n        }\n      };\n\n      if (filters && _utils2.default.isObject(filters)) {\n        _extends(queryParams.search_parameters, filters);\n      } else if (filters && !_utils2.default.isObject(filters)) {\n        throw new Error('filters expects Object!');\n      }\n\n      return this.searchFiles(accessToken, queryParams, resultColumns);\n    }\n\n    /**\r\n     * function to search stock files by search params\r\n     * @param {string} accessToken (required) access token to be used for Authorization header\r\n     * @param {object} queryParams (optional) the params to be used for image search & filter\r\n     * @param {object} resultColumns (optional) desired result columns in the response\r\n     * @returns {SearchFilesIterator} object of SearchFilesIterator type\r\n     */\n\n  }, {\n    key: 'searchFiles',\n    value: function searchFiles(accessToken, queryParams, resultColumns) {\n      var localQueryParams = {};\n      var nbResultsPresent = false;\n\n      if (!isAdobeStockInitialized.call(this)) {\n        throw new Error('Library not initialized! Please initialize the library first.');\n      }\n\n      if (queryParams && _utils2.default.isObject(queryParams)) {\n        localQueryParams = queryParams;\n      } else if (queryParams && !_utils2.default.isObject(queryParams)) {\n        throw new Error('queryParams expects Object!');\n      }\n\n      if (resultColumns && _utils2.default.isArray(resultColumns)) {\n        localQueryParams.result_columns = resultColumns;\n      } else if (resultColumns && !_utils2.default.isArray(resultColumns)) {\n        throw new Error('resultColumns expects Array!');\n      }\n\n      _queryParamsUtils2.default.validateSearchFileQueryParams(localQueryParams, accessToken);\n\n      // we need result column for hasMoreFiles & nextSearchFiles to work properly\n      nbResultsPresent = _queryParamsUtils2.default.isNBResultsColumnPresent(localQueryParams);\n\n      if (!nbResultsPresent) {\n        localQueryParams = _queryParamsUtils2.default.addResultColumnNBResults(localQueryParams);\n      }\n\n      return new _searchFilesIterator2.default(this.stockApis, accessToken, localQueryParams, nbResultsPresent);\n    }\n\n    /**\r\n     * function to get license history for a memeber\r\n     * @param {string} accessToken (required) access token to be used for Authorization header\r\n     * @param {object} queryParams (optional) the params to be used for getting license history\r\n     * @param {object} resultColumns (optional) desired result columns in the response\r\n     * @returns {LicenseHistoryIterator} object of LicenseHistoryIterator type\r\n     */\n\n  }, {\n    key: 'licenseHistory',\n    value: function licenseHistory(accessToken, queryParams, resultColumns) {\n      var localQueryParams = {};\n      var nbResultsPresent = true;\n\n      if (!isAdobeStockInitialized.call(this)) {\n        throw new Error('Library not initialized! Please initialize the library first.');\n      }\n\n      if (queryParams && _utils2.default.isObject(queryParams)) {\n        localQueryParams = queryParams;\n      } else if (queryParams && !_utils2.default.isObject(queryParams)) {\n        throw new Error('queryParams expects Object!');\n      }\n\n      if (resultColumns && _utils2.default.isArray(resultColumns)) {\n        localQueryParams.result_columns = resultColumns;\n      } else if (resultColumns && !_utils2.default.isArray(resultColumns)) {\n        throw new Error('resultColumns expects Array!');\n      }\n\n      _queryParamsUtils2.default.validateLicenseHistoryQueryParams(localQueryParams);\n\n      return new _licenseHistoryIterator2.default(this.stockApis, accessToken, localQueryParams, nbResultsPresent);\n    }\n\n    /**\r\n     * function to search stock files by search params\r\n     * @param {object} queryParams (optional) the params to be used for image search & filter\r\n     * @returns {promise} returns Promise object for category search call\r\n     */\n\n  }, {\n    key: 'searchCategory',\n    value: function searchCategory(queryParams) {\n      if (!isAdobeStockInitialized.call(this)) {\n        throw new Error('Library not initialized! Please initialize the library first.');\n      }\n\n      _queryParamsUtils2.default.validateSearchCategoryQueryParams(queryParams);\n\n      return this.stockApis.searchCategory(queryParams);\n    }\n\n    /**\r\n     * function to search stock files by search params\r\n     * @param {object} queryParams (optional) the params to be used for image search & filter\r\n     * @returns {promise} returns Promise object for category tree search call\r\n     */\n\n  }, {\n    key: 'searchCategoryTree',\n    value: function searchCategoryTree(queryParams) {\n      if (!isAdobeStockInitialized.call(this)) {\n        throw new Error('Library not initialized! Please initialize the library first.');\n      }\n\n      _queryParamsUtils2.default.validateSearchCategoryTreeQueryParams(queryParams);\n\n      return this.stockApis.searchCategoryTree(queryParams);\n    }\n\n    /**\r\n     * function to acsess licensing capabilities for a specific user\r\n     * @param {string} accessToken (required) access token to be used for Authorization header\r\n     * @param {integer} contentId (optional) asset's unique identifer\r\n     * @param {string} license (optional) licensing state for the asset\r\n     * @param {string} locale (optional) location language code\r\n     * @returns {promise} promise which will give json data for member profile if found\r\n     */\n\n  }, {\n    key: 'accessMemberProfile',\n    value: function accessMemberProfile(accessToken, contentId, license, locale) {\n      if (!isAdobeStockInitialized.call(this)) {\n        throw new Error('Library not initialized! Please initialize the library first.');\n      }\n\n      _licenseParamsUtils2.default.validateMemberProfileLicenseParams(accessToken, contentId, license);\n\n      if (locale && typeof locale !== 'string') {\n        throw new Error('locale expects string only. For e.g. en-US, fr-FR etc.!');\n      }\n\n      return this.stockApis.accessMemberProfile(accessToken, contentId, license, locale);\n    }\n\n    /**\r\n     * Notifies the system when a user abandons a licensing operation\r\n     * @param {string} accessToken to be sent with Authorization header\r\n     * @param {integer} contentId (required) asset's unique identifer\r\n     * @param {string} state (required) user's purchase relationship to an asset\r\n     * @returns {promise} returns promise\r\n     */\n\n  }, {\n    key: 'memberAbandonLicensing',\n    value: function memberAbandonLicensing(accessToken, contentId, state) {\n      if (!isAdobeStockInitialized.call(this)) {\n        throw new Error('Library not initialized! Please initialize the library first.');\n      }\n\n      _licenseParamsUtils2.default.validateMemberAbandonLicenseParams(accessToken, contentId, state);\n\n      return this.stockApis.memberAbandon(accessToken, contentId, state);\n    }\n\n    /**\r\n     * Get licensing information about a specific asset for a specific user\r\n     * @param {string} accessToken (required) access token to be used for Authorization header\r\n     * @param {integer} contentId (required) asset's unique identifer\r\n     * @param {string} license (optional) licensing state for the asset.\r\n     * @returns {promise} promise which will give json data for licensing information\r\n     */\n\n  }, {\n    key: 'getLicenseInfoForContent',\n    value: function getLicenseInfoForContent(accessToken, contentId, license) {\n      if (!isAdobeStockInitialized.call(this)) {\n        throw new Error('Library not initialized! Please initialize the library first.');\n      }\n\n      _licenseParamsUtils2.default.validateContentLicenseParams(accessToken, contentId, license);\n\n      return this.stockApis.licenseInfo(accessToken, contentId, license);\n    }\n\n    /**\r\n     * Requests a license for an asset for a specific user\r\n     * @param {string} accessToken (required) access token to be used for Authorization header\r\n     * @param {integer} contentId (required) asset's unique identifer\r\n     * @param {string} license (optional) licensing state for the asset.\r\n     * @param {array} cceAgency (optional) Specifies license references.\r\n     * @returns {promise} promise which will give json data with license info\r\n     * containing a download URL\r\n     */\n\n  }, {\n    key: 'requestLicenseForContent',\n    value: function requestLicenseForContent(accessToken, contentId, license, cceAgency) {\n      if (!isAdobeStockInitialized.call(this)) {\n        throw new Error('Library not initialized! Please initialize the library first.');\n      }\n\n      _licenseParamsUtils2.default.validateContentLicenseParams(accessToken, contentId, license);\n\n      if (cceAgency) {\n        _licenseParamsUtils2.default.validateReferenceData(cceAgency);\n      }\n\n      return this.stockApis.requestLicense(accessToken, contentId, license, cceAgency);\n    }\n\n    /**\r\n     * Download the asset if user has the asset already licensed\r\n     * @param {string} accessToken (required) access token to be used for Authorization header\r\n     * @param {integer} contentId (required) asset's unique identifer\r\n     * @param {string} license (optional) licensing state for the asset.\r\n     * @returns {promise} promise having url of asset as a response\r\n     */\n\n  }, {\n    key: 'downloadAsset',\n    value: function downloadAsset(accessToken, contentId, license) {\n      if (!isAdobeStockInitialized.call(this)) {\n        throw new Error('Library not initialized! Please initialize the library first.');\n      }\n\n      _licenseParamsUtils2.default.validateContentLicenseParams(accessToken, contentId, license);\n\n      return this.stockApis.downloadAsset(accessToken, contentId, license);\n    }\n  }], [{\n    key: 'ENVIRONMENT',\n    get: function get() {\n      return _constants2.default.ENVIRONMENT;\n    }\n\n    /**\r\n     * Enum for query params props\r\n     */\n\n  }, {\n    key: 'QUERY_PARAMS_PROPS',\n    get: function get() {\n      return _constants2.default.QUERY_PARAMS_PROPS;\n    }\n\n    /**\r\n     * Enums for search parameters and results columns\r\n     */\n\n  }, {\n    key: 'SEARCH_PARAMS',\n    get: function get() {\n      return _constants2.default.SEARCH_PARAMS;\n    }\n  }, {\n    key: 'LICENSE_HISTORY_SEARCH_PARAMS',\n    get: function get() {\n      return _constants2.default.LICENSE_HISTORY_SEARCH_PARAMS;\n    }\n  }, {\n    key: 'SEARCH_PARAMS_TYPE',\n    get: function get() {\n      return _constants2.default.SEARCH_PARAMS_TYPE;\n    }\n  }, {\n    key: 'SEARCH_PARAMS_ORDER',\n    get: function get() {\n      return _constants2.default.SEARCH_PARAMS_ORDER;\n    }\n  }, {\n    key: 'SEARCH_PARAMS_ORIENTATION',\n    get: function get() {\n      return _constants2.default.SEARCH_PARAMS_ORIENTATION;\n    }\n  }, {\n    key: 'SEARCH_PARAMS_HAS_RELEASES',\n    get: function get() {\n      return _constants2.default.SEARCH_PARAMS_HAS_RELEASES;\n    }\n  }, {\n    key: 'SEARCH_PARAMS_3D_TYPES',\n    get: function get() {\n      return _constants2.default.SEARCH_PARAMS_3D_TYPES;\n    }\n  }, {\n    key: 'SEARCH_PARAMS_TEMPLATE_CATEGORIES',\n    get: function get() {\n      return _constants2.default.SEARCH_PARAMS_TEMPLATE_CATEGORIES;\n    }\n  }, {\n    key: 'SEARCH_PARAMS_TEMPLATE_TYPES',\n    get: function get() {\n      return _constants2.default.SEARCH_PARAMS_TEMPLATE_TYPES;\n    }\n  }, {\n    key: 'SEARCH_PARAMS_THUMB_SIZES',\n    get: function get() {\n      return _constants2.default.SEARCH_PARAMS_THUMB_SIZES;\n    }\n  }, {\n    key: 'SEARCH_PARAMS_AGE',\n    get: function get() {\n      return _constants2.default.SEARCH_PARAMS_AGE;\n    }\n  }, {\n    key: 'SEARCH_PARAMS_VIDEO_DURATION',\n    get: function get() {\n      return _constants2.default.SEARCH_PARAMS_VIDEO_DURATION;\n    }\n  }, {\n    key: 'SEARCH_PARAMS_PREMIUM',\n    get: function get() {\n      return _constants2.default.SEARCH_PARAMS_PREMIUM;\n    }\n  }, {\n    key: 'RESULT_COLUMNS',\n    get: function get() {\n      return _constants2.default.RESULT_COLUMNS;\n    }\n  }, {\n    key: 'LICENSE_HISTORY_RESULT_COLUMNS',\n    get: function get() {\n      return _constants2.default.LICENSE_HISTORY_RESULT_COLUMNS;\n    }\n  }, {\n    key: 'LICENSE_STATE_PARAMS',\n    get: function get() {\n      return _constants2.default.LICENSE_STATE_PARAMS;\n    }\n  }, {\n    key: 'PURCHASE_STATE_PARAMS',\n    get: function get() {\n      return _constants2.default.PURCHASE_STATE_PARAMS;\n    }\n  }]);\n\n  return AdobeStock;\n}();\n\nmodule.exports = AdobeStock;\n\n/***/ })\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// adobestocklib.min.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 20);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 555a9e918089445f630a","/**\r\n * Copyright 2017 Adobe Systems Incorporated. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n */\r\n// Query params properties\r\nconst QUERY_PARAMS_PROPS = {\r\n  LOCALE: 'locale',\r\n  SEARCH_PARAMETERS: 'search_parameters',\r\n  RESULT_COLUMNS: 'result_columns',\r\n  SIMILAR_IMAGE: 'similar_image',\r\n  CATEGORY: 'category_id',\r\n};\r\n\r\n// http methods\r\nconst HTTPMETHOD = {\r\n  GET: 'GET',\r\n  POST: 'POST',\r\n};\r\n\r\n// environment\r\nconst ENVIRONMENT = {\r\n  PROD: 1,\r\n  STAGE: 2,\r\n};\r\n\r\n// search parameters\r\nconst SEARCH_PARAMS = {\r\n  WORDS: 'words',\r\n  LIMIT: 'limit',\r\n  OFFSET: 'offset',\r\n  ORDER: 'order',\r\n  CREATOR_ID: 'creator_id',\r\n  MEDIA_ID: 'media_id',\r\n  MODEL_ID: 'model_id',\r\n  SERIE_ID: 'serie_id',\r\n  SIMILAR: 'similar',\r\n  SIMILAR_IMAGE: 'similar_image',\r\n  SIMILAR_URL: 'similar_url',\r\n  CATEGORY: 'category',\r\n  FILTERS_3D_TYPE_ID: 'filters_3d_type_id',\r\n  FILTERS_AGE: 'filters_age',\r\n  FILTERS_AREA_PIXELS: 'filters_area_pixels',\r\n  FILTERS_PREMIUM: 'filters_premium',\r\n  FILTERS_COLORS: 'filters_colors',\r\n  FILTERS_CONTENT_TYPE_3D: 'filters_content_type_3d',\r\n  FILTERS_CONTENT_TYPE_ALL: 'filters_content_type_all',\r\n  // FILTERS_EDITORIAL: 'filters_editorial', // restricted use\r\n  FILTERS_CONTENT_TYPE_ILLUSTRATION: 'filters_content_type_illustration',\r\n  FILTERS_CONTENT_TYPE_PHOTO: 'filters_content_type_photo',\r\n  FILTERS_CONTENT_TYPE_VECTOR: 'filters_content_type_vector',\r\n  FILTERS_CONTENT_TYPE_VIDEO: 'filters_content_type_video',\r\n  FILTERS_CONTENT_TYPE_TEMPLATE: 'filters_content_type_template',\r\n  FILTERS_HAS_RELEASES: 'filters_has_releases',\r\n  FILTERS_ISOLATED_ON: 'filters_isolated_on',\r\n  FILTERS_OFFENSIVE_2: 'filters_offensive_2',\r\n  FILTERS_ORIENTATION: 'filters_orientation',\r\n  FILTERS_PANORAMIC_ON: 'filters_panoramic_on',\r\n  FILTERS_TEMPLATE_CATEGORY_ID: 'filters_template_category_id',\r\n  FILTERS_TEMPLATE_TYPE_ID: 'filters_template_type_id',\r\n  FILTERS_VIDEO_DURATION: 'filters_video_duration',\r\n  THUMBNAIL_SIZE: 'thumbnail_size',\r\n  GALLERY_ID: 'gallery_id',\r\n};\r\n\r\nconst LICENSE_HISTORY_SEARCH_PARAMS = {\r\n  LIMIT: 'limit',\r\n  OFFSET: 'offset',\r\n  THUMBNAIL_SIZE: 'thumbnail_size',\r\n};\r\n\r\nconst SEARCH_PARAMS_ORDER = {\r\n  RELEVANCE: 'relevance',\r\n  CREATION: 'creation',\r\n  POPULARITY: 'popularity',\r\n  NB_DOWNLOADS: 'nb_downloads',\r\n  UNDISCOVERED: 'undiscovered',\r\n};\r\n\r\nconst SEARCH_PARAMS_ORIENTATION = {\r\n  HORIZONTAL: 'horizontal',\r\n  VERTICAL: 'vertical',\r\n  SQUARE: 'square',\r\n  ALL: 'all',\r\n};\r\n\r\nconst SEARCH_PARAMS_HAS_RELEASES = {\r\n  TRUE: 'true',\r\n  FALSE: 'false',\r\n  ALL: 'all',\r\n};\r\n\r\nconst SEARCH_PARAMS_3D_TYPES = {\r\n  MODELS: 1,\r\n  LIGHTS: 2,\r\n  MATERIALS: 3,\r\n};\r\n\r\nconst SEARCH_PARAMS_TEMPLATE_CATEGORIES = {\r\n  MOBILE: 1,\r\n  WEB: 2,\r\n  PRINT: 3,\r\n  PHOTO: 4,\r\n  FILM: 5,\r\n  ART: 6,\r\n};\r\n\r\nconst SEARCH_PARAMS_TEMPLATE_TYPES = {\r\n  PSDT: 1,\r\n  AIT: 2,\r\n};\r\n\r\nconst SEARCH_PARAMS_THUMB_SIZES = {\r\n  MEDIUM: 110,\r\n  BIG: 160,\r\n  XL: 500,\r\n  XXL: 1000,\r\n};\r\n\r\nconst LICENSE_HISTORY_SEARCH_PARAMS_THUMB_SIZES = {\r\n  MEDIUM: 110,\r\n  BIG: 160,\r\n  BIG_A: 220,\r\n  BIG_N: 240,\r\n  XL: 500,\r\n  XXL: 1000,\r\n};\r\n\r\nconst SEARCH_PARAMS_AGE = {\r\n  ONE_WEEK: '1w',\r\n  ONE_MONTH: '1m',\r\n  SIX_MONTH: '6m',\r\n  ONE_YEAR: '1y',\r\n  TWO_YEAR: '2y',\r\n  ALL: 'all',\r\n};\r\n\r\nconst SEARCH_PARAMS_VIDEO_DURATION = {\r\n  TEN: '10',\r\n  TWENTY: '20',\r\n  THIRTY: '30',\r\n  ABOVE_THIRTY: '30-',\r\n  ALL: 'all',\r\n};\r\n\r\nconst SEARCH_PARAMS_TYPE = {\r\n  STRING: 0,\r\n  INTEGER: 1,\r\n  RANGE: 2,\r\n  ARRAY: 3,\r\n};\r\n\r\nconst SEARCH_PARAMS_PREMIUM = {\r\n  TRUE: 'true',\r\n  FALSE: 'false',\r\n  ALL: 'all',\r\n};\r\n\r\n// result columns\r\nconst RESULTS_COLUMNS_TOSTRING = 'result_columns[]';\r\n\r\nconst RESULT_COLUMNS = {\r\n  NB_RESULTS: 'nb_results',\r\n  ID: 'id',\r\n  TITLE: 'title',\r\n  CREATOR_NAME: 'creator_name',\r\n  CREATOR_ID: 'creator_id',\r\n  COUNTRY_NAME: 'country_name',\r\n  WIDTH: 'width',\r\n  HEIGHT: 'height',\r\n  THUMBNAIL_URL: 'thumbnail_url',\r\n  THUMBNAIL_HTML_TAG: 'thumbnail_html_tag',\r\n  THUMBNAIL_WIDTH: 'thumbnail_width',\r\n  THUMBNAIL_HEIGHT: 'thumbnail_height',\r\n  THUMBNAIL_110_URL: 'thumbnail_110_url',\r\n  THUMBNAIL_110_WIDTH: 'thumbnail_110_width',\r\n  THUMBNAIL_110_HEIGHT: 'thumbnail_110_height',\r\n  THUMBNAIL_160_URL: 'thumbnail_160_url',\r\n  THUMBNAIL_160_WIDTH: 'thumbnail_160_width',\r\n  THUMBNAIL_160_HEIGHT: 'thumbnail_160_height',\r\n  THUMBNAIL_220_URL: 'thumbnail_220_url',\r\n  THUMBNAIL_220_WIDTH: 'thumbnail_220_width',\r\n  THUMBNAIL_220_HEIGHT: 'thumbnail_220_height',\r\n  THUMBNAIL_240_URL: 'thumbnail_240_url',\r\n  THUMBNAIL_240_WIDTH: 'thumbnail_240_width',\r\n  THUMBNAIL_240_HEIGHT: 'thumbnail_240_height',\r\n  THUMBNAIL_500_URL: 'thumbnail_500_url',\r\n  THUMBNAIL_500_WIDTH: 'thumbnail_500_width',\r\n  THUMBNAIL_500_HEIGHT: 'thumbnail_500_height',\r\n  THUMBNAIL_1000_URL: 'thumbnail_1000_url',\r\n  THUMBNAIL_1000_WIDTH: 'thumbnail_1000_width',\r\n  THUMBNAIL_1000_HEIGHT: 'thumbnail_1000_height',\r\n  MEDIA_TYPE_ID: 'media_type_id',\r\n  CATEGORY: 'category',\r\n  CATEGORY_HIERARCHY: 'category_hierarchy',\r\n  NB_VIEWS: 'nb_views',\r\n  NB_DOWNLOADS: 'nb_downloads',\r\n  CREATION_DATE: 'creation_date',\r\n  KEYWORDS: 'keywords',\r\n  HAS_RELEASES: 'has_releases',\r\n  COMP_URL: 'comp_url',\r\n  COMP_WIDTH: 'comp_width',\r\n  COMP_HEIGHT: 'comp_height',\r\n  IS_LICENSED: 'is_licensed',\r\n  VECTOR_TYPE: 'vector_type',\r\n  CONTENT_TYPE: 'content_type',\r\n  FRAMERATE: 'framerate',\r\n  DURATION: 'duration',\r\n  STOCK_ID: 'stock_id',\r\n  COMPS: 'comps',\r\n  DETAILS_URL: 'details_url',\r\n  TEMPLATE_TYPE_ID: 'template_type_id',\r\n  TEMPLATE_CATEGORY_IDS: 'template_category_ids',\r\n  MARKETING_TEXT: 'marketing_text',\r\n  DESCRIPTION: 'description',\r\n  SIZE_BYTES: 'size_bytes',\r\n  PREMIUM_LEVEL_ID: 'premium_level_id',\r\n  IS_PREMIUM: 'is_premium',\r\n  LICENSES: 'licenses',\r\n  VIDEO_PREVIEW_URL: 'video_preview_url',\r\n  VIDEO_PREVIEW_WIDTH: 'video_preview_width',\r\n  VIDEO_PREVIEW_HEIGHT: 'video_preview_height',\r\n  VIDEO_PREVIEW_CONTENT_LENGTH: 'video_preview_content_length',\r\n  VIDEO_PREVIEW_CONTENT_TYPE: 'video_preview_content_type',\r\n  VIDEO_SMALL_PREVIEW_URL: 'video_small_preview_url',\r\n  VIDEO_SMALL_PREVIEW_WIDTH: 'video_small_preview_width',\r\n  VIDEO_SMALL_PREVIEW_HEIGHT: 'video_small_preview_height',\r\n  VIDEO_SMALL_PREVIEW_CONTENT_LENGTH: 'video_small_preview_content_length',\r\n  VIDEO_SMALL_PREVIEW_CONTENT_TYPE: 'video_small_preview_content_type',\r\n  // IS_EDITORIAL: 'is_editorial', // requires feature flag to use; to be released in June\r\n};\r\n\r\nconst LICENSE_HISTORY_RESULT_COLUMNS = {\r\n  THUMBNAIL_110_URL: 'thumbnail_110_url',\r\n  THUMBNAIL_110_WIDTH: 'thumbnail_110_width',\r\n  THUMBNAIL_110_HEIGHT: 'thumbnail_110_height',\r\n  THUMBNAIL_160_URL: 'thumbnail_160_url',\r\n  THUMBNAIL_160_WIDTH: 'thumbnail_160_width',\r\n  THUMBNAIL_160_HEIGHT: 'thumbnail_160_height',\r\n  THUMBNAIL_220_URL: 'thumbnail_220_url',\r\n  THUMBNAIL_220_WIDTH: 'thumbnail_220_width',\r\n  THUMBNAIL_220_HEIGHT: 'thumbnail_220_height',\r\n  THUMBNAIL_240_URL: 'thumbnail_240_url',\r\n  THUMBNAIL_240_WIDTH: 'thumbnail_240_width',\r\n  THUMBNAIL_240_HEIGHT: 'thumbnail_240_height',\r\n  THUMBNAIL_500_URL: 'thumbnail_500_url',\r\n  THUMBNAIL_500_WIDTH: 'thumbnail_500_width',\r\n  THUMBNAIL_500_HEIGHT: 'thumbnail_500_height',\r\n  THUMBNAIL_1000_URL: 'thumbnail_1000_url',\r\n  THUMBNAIL_1000_WIDTH: 'thumbnail_1000_width',\r\n  THUMBNAIL_1000_HEIGHT: 'thumbnail_1000_height',\r\n};\r\n\r\nconst LICENSE_STATE_PARAMS = {\r\n  EMPTY: {\r\n    EMPTY_LICENSE: '',\r\n  },\r\n  IMAGE: {\r\n    STANDARD: 'standard',\r\n    STANDARD_M: 'standard_m',\r\n    EXTENDED: 'extended',\r\n  },\r\n  VIDEO: {\r\n    VIDEO_HD: 'video_hd',\r\n    VIDEO_4K: 'video_4k',\r\n  },\r\n  VECTOR_ASSETS: {\r\n    STANDARD: 'standard',\r\n    EXTENDED: 'extended',\r\n  },\r\n  ASSETS_3D: {\r\n    STANDARD: 'standard',\r\n  },\r\n  TEMPLATES: {\r\n    STANDARD: 'standard',\r\n  },\r\n};\r\n\r\nconst PURCHASE_STATE_PARAMS = {\r\n  NOT_PURCHASED: 'not_purchased',\r\n  PURCHASED: 'purchased',\r\n  CANCELLED: 'cancelled',\r\n  NOT_POSSIBLE: 'not_possible',\r\n  JUST_PURCHASED: 'just_purchased',\r\n  OVERAGE: 'overage',\r\n};\r\n\r\nconst DOWNSAMPLE_PARAMS = {\r\n  LONGEST_SIDE_MAXIMUM: 23000,\r\n  LONGEST_SIDE_DOWNSAMPLE_TO: 1000,\r\n};\r\n\r\n// Exif file format https://www.media.mit.edu/pia/Research/deepview/exif.html\r\nconst EXIF_FILE_FORMAT_PARAMS = {\r\n  JPG_START_MARKER: 0xFFD8,\r\n  APP1_MARKER: 0xFFE1,\r\n  EXIF_HEADER: 0x45786966,\r\n  TIF_HEADER: 0x4949,\r\n  ORIENTATION_TAG: 0x0112,\r\n  LAST_MARKER: 0xFF00,\r\n};\r\n\r\nexport default class Constants {\r\n  static get QUERY_PARAMS_PROPS() {\r\n    return Object.freeze(QUERY_PARAMS_PROPS);\r\n  }\r\n\r\n  static get HTTPMETHOD() {\r\n    return Object.freeze(HTTPMETHOD);\r\n  }\r\n\r\n  static get ENVIRONMENT() {\r\n    return Object.freeze(ENVIRONMENT);\r\n  }\r\n\r\n  static get SEARCH_PARAMS() {\r\n    return Object.freeze(SEARCH_PARAMS);\r\n  }\r\n\r\n  static get LICENSE_HISTORY_SEARCH_PARAMS() {\r\n    return Object.freeze(LICENSE_HISTORY_SEARCH_PARAMS);\r\n  }\r\n\r\n  static get SEARCH_PARAMS_ORDER() {\r\n    return Object.freeze(SEARCH_PARAMS_ORDER);\r\n  }\r\n\r\n  static get SEARCH_PARAMS_AGE() {\r\n    return Object.freeze(SEARCH_PARAMS_AGE);\r\n  }\r\n\r\n  static get SEARCH_PARAMS_ORIENTATION() {\r\n    return Object.freeze(SEARCH_PARAMS_ORIENTATION);\r\n  }\r\n\r\n  static get SEARCH_PARAMS_TYPE() {\r\n    return Object.freeze(SEARCH_PARAMS_TYPE);\r\n  }\r\n\r\n  static get SEARCH_PARAMS_HAS_RELEASES() {\r\n    return Object.freeze(SEARCH_PARAMS_HAS_RELEASES);\r\n  }\r\n\r\n  static get SEARCH_PARAMS_THUMB_SIZES() {\r\n    return Object.freeze(SEARCH_PARAMS_THUMB_SIZES);\r\n  }\r\n\r\n  static get LICENSE_HISTORY_SEARCH_PARAMS_THUMB_SIZES() {\r\n    return Object.freeze(LICENSE_HISTORY_SEARCH_PARAMS_THUMB_SIZES);\r\n  }\r\n\r\n  static get SEARCH_PARAMS_3D_TYPES() {\r\n    return Object.freeze(SEARCH_PARAMS_3D_TYPES);\r\n  }\r\n\r\n  static get SEARCH_PARAMS_TEMPLATE_TYPES() {\r\n    return Object.freeze(SEARCH_PARAMS_TEMPLATE_TYPES);\r\n  }\r\n\r\n  static get SEARCH_PARAMS_VIDEO_DURATION() {\r\n    return Object.freeze(SEARCH_PARAMS_VIDEO_DURATION);\r\n  }\r\n\r\n  static get SEARCH_PARAMS_TEMPLATE_CATEGORIES() {\r\n    return Object.freeze(SEARCH_PARAMS_TEMPLATE_CATEGORIES);\r\n  }\r\n\r\n  static get SEARCH_PARAMS_PREMIUM() {\r\n    return Object.freeze(SEARCH_PARAMS_PREMIUM);\r\n  }\r\n\r\n  static get RESULTS_COLUMNS_TOSTRING() {\r\n    return RESULTS_COLUMNS_TOSTRING;\r\n  }\r\n\r\n  static get RESULT_COLUMNS() {\r\n    return Object.freeze(RESULT_COLUMNS);\r\n  }\r\n\r\n  static get LICENSE_HISTORY_RESULT_COLUMNS() {\r\n    return Object.freeze(LICENSE_HISTORY_RESULT_COLUMNS);\r\n  }\r\n\r\n  static get SEARCH_FILES_ITERATOR_RETURN_ERROR() {\r\n    return -1;\r\n  }\r\n\r\n  static get LICENSE_HISTORY_ITERATOR_RETURN_ERROR() {\r\n    return -1;\r\n  }\r\n\r\n  static get LICENSE_STATE_PARAMS() {\r\n    return Object.freeze(LICENSE_STATE_PARAMS);\r\n  }\r\n\r\n  static get PURCHASE_STATE_PARAMS() {\r\n    return Object.freeze(PURCHASE_STATE_PARAMS);\r\n  }\r\n\r\n  static get DOWNSAMPLE_PARAMS() {\r\n    return Object.freeze(DOWNSAMPLE_PARAMS);\r\n  }\r\n\r\n  static get EXIF_FILE_FORMAT_PARAMS() {\r\n    return Object.freeze(EXIF_FILE_FORMAT_PARAMS);\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/constants/constants.js","import Constants from './../constants/constants';\r\nimport Http from './http';\r\n\r\nconst DECIMAL_RADIX = 10;\r\n\r\nexport default class Utilities {\r\n  /**\r\n   * Checks if value is string\r\n   * @param {object} value to be checked\r\n   * @returns {boolean} returns true if value is string otherwise false\r\n   */\r\n  static isString(value) {\r\n    return typeof value === 'string';\r\n  }\r\n\r\n  /**\r\n   * Checks if array contains given value\r\n   * @param {object} array object in which the value needs to be checked\r\n   * @param {string} value to be checked\r\n   * @returns {boolean} returns true if array contains value otherwise false\r\n   */\r\n  static doesArrayContainValue(array, value) {\r\n    return array.indexOf(value) > -1;\r\n  }\r\n\r\n  /**\r\n   * Checks if json object contains given value\r\n   * @param {object} json object in which the value needs to be checked\r\n   * @param {boolean|number|string} value value to be checked in json\r\n   * @returns {boolean} returns true if json contains value otherwise false (checks recursively)\r\n   */\r\n  static doesJSONContainsValue(json, value) {\r\n    if (!Utilities.isObject(json)) {\r\n      return false;\r\n    }\r\n\r\n    let hasValue = false;\r\n    Object.keys((json)).forEach((key) => {\r\n      if (json[key] === value) {\r\n        hasValue = true;\r\n      } else if (typeof json[key] === 'object') {\r\n        hasValue = hasValue || Utilities.doesJSONContainsValue(json[key], value);\r\n      }\r\n    });\r\n\r\n    return hasValue;\r\n  }\r\n\r\n  /**\r\n   * Checks if the variable is integer\r\n   * @param {object} variable to be checked for\r\n   * @returns {boolean} returns true if variable is integer otherwise false\r\n   */\r\n  static isInteger(variable) {\r\n    // even if the variable is string but contains valid integer number return true\r\n    if (!isNaN(variable) && variable === parseInt(variable, DECIMAL_RADIX)) {\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Checks if the variable is array\r\n   * @param {object} variable to be checked for\r\n   * @returns {boolean} returns true if variable is array otherwise false\r\n   */\r\n  static isArray(variable) {\r\n    if (variable.constructor === Array) {\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Checks if the variable is object\r\n   * @param {object} variable to be checked for\r\n   * @returns {boolean} returns true if variable is object otherwise false\r\n   */\r\n  static isObject(variable) {\r\n    if (variable.constructor === Object) {\r\n      return true;\r\n    }\r\n\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Makes GET ajax request to given url\r\n   * @param {string} url object for ajax request\r\n   * @param {object} headers to be sent with ajax request\r\n   * @returns {promise} returns promise\r\n   */\r\n  static makeGetAjaxCall(url, headers) {\r\n    return new Promise((onSuccess, onError) => {\r\n      const settings = {\r\n        url,\r\n        headers,\r\n      };\r\n\r\n      Http.doXhr(settings)\r\n        .then(onSuccess, onError);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Makes POST ajax request to given url\r\n   * @param {string} url object for ajax request\r\n   * @param {object} headers to be sent with ajax request\r\n   * @param {data} data to be sent as post request body with request\r\n   * @returns {promise} returns promise\r\n   */\r\n  static makePostAjaxCall(url, headers, data) {\r\n    return new Promise((onSuccess, onError) => {\r\n      const settings = {\r\n        data,\r\n        url,\r\n        method: Constants.HTTPMETHOD.POST,\r\n        headers,\r\n      };\r\n\r\n      Http.doXhr(settings)\r\n        .then(onSuccess, onError);\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Makes multipart/form-data ajax request to given url\r\n   * @param {string} url object for ajax request\r\n   * @param {object} headers to be sent with ajax request\r\n   * @param {data} data to be sent as post request body with request\r\n   * @returns {promise} returns promise\r\n   */\r\n  static makeMultiPartAjaxCall(url, headers, data) {\r\n    return new Promise((onSuccess, onError) => {\r\n      const settings = {\r\n        data,\r\n        url,\r\n        method: Constants.HTTPMETHOD.POST,\r\n        contentType: false,\r\n        headers,\r\n      };\r\n\r\n      Http.doXhr(settings)\r\n        .then(onSuccess, onError);\r\n    });\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/utils.js","/**\n * Convert array of 16 byte values to UUID string format of the form:\n * XXXXXXXX-XXXX-XXXX-XXXX-XXXX-XXXXXXXXXXXX\n */\nvar byteToHex = [];\nfor (var i = 0; i < 256; ++i) {\n  byteToHex[i] = (i + 0x100).toString(16).substr(1);\n}\n\nfunction bytesToUuid(buf, offset) {\n  var i = offset || 0;\n  var bth = byteToHex;\n  return  bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] + '-' +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]] +\n          bth[buf[i++]] + bth[buf[i++]];\n}\n\nmodule.exports = bytesToUuid;\n\n\n\n// WEBPACK FOOTER //\n// ./~/uuid/lib/bytesToUuid.js","// Unique ID creation requires a high quality random # generator.  In the\n// browser this is a little complicated due to unknown quality of Math.random()\n// and inconsistent support for the `crypto` API.  We do the best we can via\n// feature-detection\nvar rng;\n\nvar crypto = global.crypto || global.msCrypto; // for IE 11\nif (crypto && crypto.getRandomValues) {\n  // WHATWG crypto RNG - http://wiki.whatwg.org/wiki/Crypto\n  var rnds8 = new Uint8Array(16);\n  rng = function whatwgRNG() {\n    crypto.getRandomValues(rnds8);\n    return rnds8;\n  };\n}\n\nif (!rng) {\n  // Math.random()-based (RNG)\n  //\n  // If all else fails, use Math.random().  It's fast, but is of unspecified\n  // quality.\n  var  rnds = new Array(16);\n  rng = function() {\n    for (var i = 0, r; i < 16; i++) {\n      if ((i & 0x03) === 0) r = Math.random() * 0x100000000;\n      rnds[i] = r >>> ((i & 0x03) << 3) & 0xff;\n    }\n\n    return rnds;\n  };\n}\n\nmodule.exports = rng;\n\n\n\n// WEBPACK FOOTER //\n// ./~/uuid/lib/rng-browser.js","import Utils from './utils';\r\nimport Constants from './../constants/constants';\r\n\r\nexport default class ResultColumnsUtils {\r\n\r\n  /**\r\n   * Validates the result columns array\r\n   * @param {object} params array of result columns\r\n   */\r\n  static validate(params) {\r\n    const supportedColumns = Object.keys(Constants.RESULT_COLUMNS)\r\n                                .map(key => Constants.RESULT_COLUMNS[key]);\r\n\r\n    params.forEach((param) => {\r\n      if (!Utils.doesArrayContainValue(supportedColumns, param)) {\r\n        throw new Error(`Invalid Result Column '${param}'`);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Validates the result columns array for license history\r\n   * @param {object} params array of result columns\r\n   */\r\n  static validateLicenseHistory(params) {\r\n    const supportedColumns = Object.keys(Constants.LICENSE_HISTORY_RESULT_COLUMNS)\r\n                                .map(key => Constants.LICENSE_HISTORY_RESULT_COLUMNS[key]);\r\n\r\n    params.forEach((param) => {\r\n      if (!Utils.doesArrayContainValue(supportedColumns, param)) {\r\n        throw new Error(`Invalid Result Column '${param}'`);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Encodes the result columns array into uri\r\n   * @param {object} params array of result columns\r\n   * @returns {string} uri encoded result columns\r\n   */\r\n  static encodeURI(params) {\r\n    const uri = [];\r\n    params.forEach((param) => {\r\n      const paramToStr = `${encodeURIComponent(Constants.RESULTS_COLUMNS_TOSTRING)}=${encodeURIComponent(param)}`;\r\n      uri.push(paramToStr);\r\n    });\r\n\r\n    return uri.join('&');\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/resultColumnsUtils.js","import Utils from './utils';\r\nimport Constants from './../constants/constants';\r\n\r\nconst DECIMAL_RADIX = 10;\r\n\r\nconst searchParametersConfig = {\r\n  words: {\r\n    type: Constants.SEARCH_PARAMS_TYPE.STRING,\r\n    toString: '[words]',\r\n  },\r\n  limit: {\r\n    type: Constants.SEARCH_PARAMS_TYPE.INTEGER,\r\n    max: 64,\r\n    min: 1,\r\n    toString: '[limit]',\r\n  },\r\n  offset: {\r\n    type: Constants.SEARCH_PARAMS_TYPE.INTEGER,\r\n    min: 0,\r\n    toString: '[offset]',\r\n  },\r\n  order: {\r\n    type: Constants.SEARCH_PARAMS_TYPE.STRING,\r\n    exists_in: Constants.SEARCH_PARAMS_ORDER,\r\n    toString: '[order]',\r\n  },\r\n  creator_id: {\r\n    type: Constants.SEARCH_PARAMS_TYPE.INTEGER,\r\n    toString: '[creator_id]',\r\n  },\r\n  media_id: {\r\n    type: Constants.SEARCH_PARAMS_TYPE.INTEGER,\r\n    toString: '[media_id]',\r\n  },\r\n  model_id: {\r\n    type: Constants.SEARCH_PARAMS_TYPE.INTEGER,\r\n    toString: '[model_id]',\r\n  },\r\n  serie_id: {\r\n    type: Constants.SEARCH_PARAMS_TYPE.INTEGER,\r\n    toString: '[serie_id]',\r\n  },\r\n  similar: {\r\n    type: Constants.SEARCH_PARAMS_TYPE.INTEGER,\r\n    toString: '[similar]',\r\n  },\r\n  similar_image: {\r\n    type: Constants.SEARCH_PARAMS_TYPE.INTEGER,\r\n    min: 0,\r\n    max: 1,\r\n    toString: '[similar_image]',\r\n  },\r\n  similar_url: {\r\n    type: Constants.SEARCH_PARAMS_TYPE.STRING,\r\n    toString: '[similar_url]',\r\n  },\r\n  category: {\r\n    type: Constants.SEARCH_PARAMS_TYPE.INTEGER,\r\n    toString: '[category]',\r\n  },\r\n  filters_3d_type_id: {\r\n    type: Constants.SEARCH_PARAMS_TYPE.ARRAY,\r\n    exists_in: Constants.SEARCH_PARAMS_3D_TYPES,\r\n    toString: '[filters][3d_type_id][]',\r\n  },\r\n  filters_age: {\r\n    type: Constants.SEARCH_PARAMS_TYPE.STRING,\r\n    exists_in: Constants.SEARCH_PARAMS_AGE,\r\n    toString: '[filters][age]',\r\n  },\r\n  filters_area_pixels: {\r\n    type: Constants.SEARCH_PARAMS_TYPE.RANGE,\r\n    toString: '[filters][area_pixels]',\r\n  },\r\n  filters_colors: {\r\n    type: Constants.SEARCH_PARAMS_TYPE.STRING,\r\n    toString: '[filters][colors]',\r\n  },\r\n  filters_content_type_3d: {\r\n    type: Constants.SEARCH_PARAMS_TYPE.INTEGER,\r\n    min: 0,\r\n    max: 1,\r\n    toString: '[filters][content_type:3d]',\r\n  },\r\n  filters_content_type_all: {\r\n    type: Constants.SEARCH_PARAMS_TYPE.INTEGER,\r\n    min: 0,\r\n    max: 1,\r\n    toString: '[filters][content_type:all]',\r\n  },\r\n  filters_content_type_illustration: {\r\n    type: Constants.SEARCH_PARAMS_TYPE.INTEGER,\r\n    min: 0,\r\n    max: 1,\r\n    toString: '[filters][content_type:illustration]',\r\n  },\r\n  filters_content_type_photo: {\r\n    type: Constants.SEARCH_PARAMS_TYPE.INTEGER,\r\n    min: 0,\r\n    max: 1,\r\n    toString: '[filters][content_type:photo]',\r\n  },\r\n  filters_content_type_vector: {\r\n    type: Constants.SEARCH_PARAMS_TYPE.INTEGER,\r\n    min: 0,\r\n    max: 1,\r\n    toString: '[filters][content_type:vector]',\r\n  },\r\n  filters_content_type_video: {\r\n    type: Constants.SEARCH_PARAMS_TYPE.INTEGER,\r\n    min: 0,\r\n    max: 1,\r\n    toString: '[filters][content_type:video]',\r\n  },\r\n  filters_content_type_template: {\r\n    type: Constants.SEARCH_PARAMS_TYPE.INTEGER,\r\n    min: 0,\r\n    max: 1,\r\n    toString: '[filters][content_type:template]',\r\n  },\r\n/* Removing until released\r\n  filters_editorial: {\r\n    type: Constants.SEARCH_PARAMS_TYPE.INTEGER,\r\n    min: 0,\r\n    max: 1,\r\n    toString: '[filters][editorial]',\r\n  },\r\n*/\r\n  filters_has_releases: {\r\n    type: Constants.SEARCH_PARAMS_TYPE.STRING,\r\n    exists_in: Constants.SEARCH_PARAMS_HAS_RELEASES,\r\n    toString: '[filters][has_releases]',\r\n  },\r\n  filters_isolated_on: {\r\n    type: Constants.SEARCH_PARAMS_TYPE.INTEGER,\r\n    min: 0,\r\n    max: 1,\r\n    toString: '[filters][isolated:on]',\r\n  },\r\n  filters_offensive_2: {\r\n    type: Constants.SEARCH_PARAMS_TYPE.INTEGER,\r\n    min: 0,\r\n    max: 1,\r\n    toString: '[filters][offensive:2]',\r\n  },\r\n  filters_orientation: {\r\n    type: Constants.SEARCH_PARAMS_TYPE.STRING,\r\n    exists_in: Constants.SEARCH_PARAMS_ORIENTATION,\r\n    toString: '[filters][orientation]',\r\n  },\r\n  filters_panoramic_on: {\r\n    type: Constants.SEARCH_PARAMS_TYPE.INTEGER,\r\n    min: 0,\r\n    max: 1,\r\n    toString: '[filters][panoramic:on]',\r\n  },\r\n  filters_premium: {\r\n    type: Constants.SEARCH_PARAMS_TYPE.STRING,\r\n    exists_in: Constants.SEARCH_PARAMS_PREMIUM,\r\n    toString: '[filters][premium]',\r\n  },\r\n  filters_template_category_id: {\r\n    type: Constants.SEARCH_PARAMS_TYPE.ARRAY,\r\n    exists_in: Constants.SEARCH_PARAMS_TEMPLATE_CATEGORIES,\r\n    toString: '[filters][template_category_id][]',\r\n  },\r\n  filters_template_type_id: {\r\n    type: Constants.SEARCH_PARAMS_TYPE.ARRAY,\r\n    exists_in: Constants.SEARCH_PARAMS_TEMPLATE_TYPES,\r\n    toString: '[filters][template_type_id][]',\r\n  },\r\n  filters_video_duration: {\r\n    type: Constants.SEARCH_PARAMS_TYPE.STRING,\r\n    exists_in: Constants.SEARCH_PARAMS_VIDEO_DURATION,\r\n    toString: '[filters][video_duration]',\r\n  },\r\n  thumbnail_size: {\r\n    type: Constants.SEARCH_PARAMS_TYPE.INTEGER,\r\n    exists_in: Constants.SEARCH_PARAMS_THUMB_SIZES,\r\n    toString: '[thumbnail_size]',\r\n  },\r\n  gallery_id: {\r\n    type: Constants.SEARCH_PARAMS_TYPE.STRING,\r\n    toString: '[gallery_id]',\r\n  },\r\n};\r\n\r\nconst searchParametersConfigLicenseHistory = {\r\n  limit: {\r\n    type: Constants.SEARCH_PARAMS_TYPE.INTEGER,\r\n    max: 100,\r\n    min: 1,\r\n    toString: '[limit]',\r\n  },\r\n  offset: {\r\n    type: Constants.SEARCH_PARAMS_TYPE.INTEGER,\r\n    min: 0,\r\n    toString: '[offset]',\r\n  },\r\n  thumbnail_size: {\r\n    type: Constants.SEARCH_PARAMS_TYPE.INTEGER,\r\n    exists_in: Constants.LICENSE_HISTORY_SEARCH_PARAMS_THUMB_SIZES,\r\n    toString: '[thumbnail_size]',\r\n  },\r\n};\r\n\r\nexport default class SearchParamsUtils {\r\n  /**\r\n   * Validates the search query parameters\r\n   * @param {object} params object reference of search_parameters\r\n   */\r\n  static validate(params) {\r\n    Object.keys(params).forEach((param) => {\r\n      const value = params[param];\r\n      const config = searchParametersConfig[param];\r\n\r\n      const supportedParams = Object.keys(Constants.SEARCH_PARAMS)\r\n                                  .map(key => Constants.SEARCH_PARAMS[key]);\r\n\r\n      if (config === undefined\r\n          || !Utils.doesArrayContainValue(supportedParams, param)) {\r\n        throw new Error(`Search parameter '${param}' not supported!`);\r\n      }\r\n\r\n      let permittedValues = [];\r\n      if (config.exists_in && Utils.isObject(config.exists_in)) {\r\n        permittedValues = Object.keys(config.exists_in).map(key => config.exists_in[key]);\r\n      }\r\n\r\n      switch (config.type) {\r\n        case Constants.SEARCH_PARAMS_TYPE.STRING: {\r\n          if (!Utils.isString(value)) {\r\n            throw new Error(`Invalid value of Search Parameter '${param}'. It can only have string value.`);\r\n          }\r\n\r\n          if (config.exists_in && !Utils.doesArrayContainValue(permittedValues, value)) {\r\n            throw new Error(`Invalid value of Search Parameter '${param}'. It can only have value from [ ${permittedValues.join(', ')} ].`);\r\n          }\r\n          break;\r\n        }\r\n\r\n        case Constants.SEARCH_PARAMS_TYPE.INTEGER: {\r\n          if (!Utils.isInteger(value)) {\r\n            throw new Error(`Invalid value of Search Parameter '${param}'. It can only have integers.`);\r\n          }\r\n\r\n          if (config.min !== undefined && parseInt(value, DECIMAL_RADIX) < config.min) {\r\n            throw new Error(`Invalid value of Search Parameter '${param}'. It can only have integers >= ${config.min}.`);\r\n          }\r\n\r\n          if (config.max !== undefined && parseInt(value, DECIMAL_RADIX) > config.max) {\r\n            throw new Error(`Invalid value of Search Parameter '${param}'. It can only have integers <= ${config.max}.`);\r\n          }\r\n\r\n          break;\r\n        }\r\n\r\n        case Constants.SEARCH_PARAMS_TYPE.RANGE: {\r\n          const matchResults = value.match(/^([0-9]*)-([0-9]*)$/);\r\n          if (!matchResults) {\r\n            throw new Error(`Invalid value of Search Parameter '${param}'. It can only have range values. For e.g. 0-250000.`);\r\n          }\r\n\r\n          if (matchResults.length < 3 || matchResults[1] > matchResults[2]) {\r\n            throw new Error(`Invalid value of Search Parameter '${param}'. It can only have range values from lower to higher. For e.g. 0-250000.`);\r\n          }\r\n          break;\r\n        }\r\n\r\n        case Constants.SEARCH_PARAMS_TYPE.ARRAY: {\r\n          if (!Utils.isArray(value)) {\r\n            throw new Error(`Invalid value of Search Parameter '${param}'. It can only have array.`);\r\n          }\r\n\r\n          if (config.exists_in) {\r\n            value.forEach((item) => {\r\n              if (!Utils.doesArrayContainValue(permittedValues, item)) {\r\n                throw new Error(`Invalid value of Search Parameter '${param}'. It can only have values from [ ${permittedValues.join(', ')} ].`);\r\n              }\r\n            });\r\n          }\r\n\r\n          break;\r\n        }\r\n\r\n        default:\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Validates the license history search query parameters\r\n   * @param {object} params object reference of search_parameters\r\n   */\r\n  static validateLicenseHistory(params) {\r\n    Object.keys(params).forEach((param) => {\r\n      const value = params[param];\r\n      const config = searchParametersConfigLicenseHistory[param];\r\n\r\n      const supportedParams = Object.keys(Constants.LICENSE_HISTORY_SEARCH_PARAMS)\r\n                                  .map(key => Constants.LICENSE_HISTORY_SEARCH_PARAMS[key]);\r\n\r\n      if (config === undefined\r\n          || !Utils.doesArrayContainValue(supportedParams, param)) {\r\n        throw new Error(`Search parameter '${param}' not supported!`);\r\n      }\r\n\r\n      let permittedValues = [];\r\n      if (config.exists_in && Utils.isObject(config.exists_in)) {\r\n        permittedValues = Object.keys(config.exists_in).map(key => config.exists_in[key]);\r\n      }\r\n\r\n      switch (config.type) {\r\n        case Constants.SEARCH_PARAMS_TYPE.INTEGER: {\r\n          if (!Utils.isInteger(value)) {\r\n            throw new Error(`Invalid value of Search Parameter '${param}'. It can only have integers.`);\r\n          }\r\n\r\n          if (config.exists_in && !Utils.doesArrayContainValue(permittedValues, value)) {\r\n            throw new Error(`Invalid value of Search Parameter '${param}'. It can only have value from [ ${permittedValues.join(', ')} ].`);\r\n          }\r\n\r\n          if (config.min !== undefined && parseInt(value, DECIMAL_RADIX) < config.min) {\r\n            throw new Error(`Invalid value of Search Parameter '${param}'. It can only have integers >= ${config.min}.`);\r\n          }\r\n\r\n          if (config.max !== undefined && parseInt(value, DECIMAL_RADIX) > config.max) {\r\n            throw new Error(`Invalid value of Search Parameter '${param}'. It can only have integers <= ${config.max}.`);\r\n          }\r\n\r\n          break;\r\n        }\r\n\r\n        default:\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Encodes the search query parameters object into uri\r\n   * @param {object} params object reference of search_parameters\r\n   * @returns {string} encoded uri string\r\n   */\r\n  static encodeURI(params) {\r\n    const uri = [];\r\n    Object.keys(params).forEach((param) => {\r\n      const value = params[param];\r\n      const config = searchParametersConfig[param];\r\n      const paramToStr = `search_parameters${config.toString}`;\r\n\r\n      switch (config.type) {\r\n        case Constants.SEARCH_PARAMS_TYPE.STRING:\r\n        case Constants.SEARCH_PARAMS_TYPE.INTEGER:\r\n        case Constants.SEARCH_PARAMS_TYPE.RANGE:\r\n          uri.push(`${encodeURIComponent(paramToStr)}=${encodeURIComponent(value)}`);\r\n          break;\r\n        case Constants.SEARCH_PARAMS_TYPE.ARRAY:\r\n          params[param].forEach((item) => {\r\n            uri.push(`${encodeURIComponent(paramToStr)}=${encodeURIComponent(item)}`);\r\n          });\r\n          break;\r\n        default:\r\n      }\r\n    });\r\n\r\n    return uri.join('&');\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/searchParamsUtils.js","/**\r\n * Copyright 2017 Adobe Systems Incorporated. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n */\r\nimport SearchParamsUtils from './../utils/searchParamsUtils';\r\nimport ResultColumnsUtils from './../utils/resultColumnsUtils';\r\nimport Utils from './../utils/utils';\r\nimport DownSamplingUtils from './../utils/downSamplingUtils';\r\nimport Constants from './../constants/constants';\r\n\r\n/**\r\n * Creates the url for search files api\r\n * @param {string} endpoint api endpoint url\r\n * @param {object} queryParams object of query parameters\r\n * @returns {string} api url\r\n */\r\nfunction createSearchFilesApiUrl(endpoint, queryParams) {\r\n  let url = endpoint;\r\n  const paramsStr = [];\r\n\r\n  if (queryParams.locale) {\r\n    paramsStr.push(`locale=${encodeURIComponent(queryParams.locale)}`);\r\n  }\r\n\r\n  if (queryParams.search_parameters) {\r\n    paramsStr.push(SearchParamsUtils.encodeURI(queryParams.search_parameters));\r\n  }\r\n\r\n  if (queryParams.result_columns) {\r\n    paramsStr.push(ResultColumnsUtils.encodeURI(queryParams.result_columns));\r\n  }\r\n\r\n  if (paramsStr.length > 0) {\r\n    url = `${url}?${paramsStr.join('&')}`;\r\n  }\r\n\r\n  return url;\r\n}\r\n\r\n/**\r\n * Creates the url for license history api\r\n * @param {string} endpoint api endpoint url\r\n * @param {object} queryParams object of query parameters\r\n * @returns {string} api url\r\n */\r\nfunction createLicenseHistoryApiUrl(endpoint, queryParams) {\r\n  let url = endpoint;\r\n  const paramsStr = [];\r\n\r\n  if (queryParams.locale) {\r\n    paramsStr.push(`locale=${encodeURIComponent(queryParams.locale)}`);\r\n  }\r\n\r\n  if (queryParams.search_parameters) {\r\n    paramsStr.push(SearchParamsUtils.encodeURI(queryParams.search_parameters));\r\n  }\r\n\r\n  if (queryParams.result_columns) {\r\n    paramsStr.push(ResultColumnsUtils.encodeURI(queryParams.result_columns));\r\n  }\r\n\r\n  if (paramsStr.length > 0) {\r\n    url = `${url}?${paramsStr.join('&')}`;\r\n  }\r\n\r\n  return url;\r\n}\r\n\r\n/**\r\n * Creates the url for search files api\r\n * @param {string} endpoint api endpoint url\r\n * @param {object} queryParams object of query parameters\r\n * @returns {string} api url\r\n */\r\nfunction createSearchCategoryApiUrl(endpoint, queryParams) {\r\n  let url = endpoint;\r\n  const paramsStr = [];\r\n\r\n  if (queryParams.locale) {\r\n    paramsStr.push(`${Constants.QUERY_PARAMS_PROPS.LOCALE}=${encodeURIComponent(queryParams.locale)}`);\r\n  }\r\n\r\n  if (queryParams.category_id) {\r\n    paramsStr.push(`${Constants.QUERY_PARAMS_PROPS.CATEGORY}=${encodeURIComponent(queryParams.category_id)}`);\r\n  }\r\n\r\n  if (paramsStr.length > 0) {\r\n    url = `${url}?${paramsStr.join('&')}`;\r\n  }\r\n\r\n  return url;\r\n}\r\n\r\n/**\r\n * Creates the url for access member profile api\r\n * @param {string} (required) endpoint api endpoint url\r\n * @param {integer} contentId (optional) asset's unique identifer\r\n * @param {string} license (optional) licensing state for the asset.\r\n * @param {string} locale (optional) location language code\r\n * @returns {string} api url\r\n */\r\nfunction createAccessMemberProfileApiUrl(endpoint, contentId, license, locale) {\r\n  let url = endpoint;\r\n  const paramsStr = [];\r\n\r\n  if (locale) {\r\n    paramsStr.push(`locale=${encodeURIComponent(locale)}`);\r\n  }\r\n\r\n  if (contentId) {\r\n    paramsStr.push(`content_id=${encodeURIComponent(contentId)}`);\r\n  }\r\n\r\n  if (license) {\r\n    paramsStr.push(`license=${encodeURIComponent(license)}`);\r\n  }\r\n\r\n  url = `${url}?${paramsStr.join('&')}`;\r\n\r\n  return url;\r\n}\r\n\r\n/**\r\n * Creates the url for content info api\r\n * @param {string} (required) endpoint api endpoint url\r\n * @param {integer} contentId (required) asset's unique identifer\r\n * @param {string} license (optional) licensing state for the asset.\r\n * @returns {string} api url\r\n */\r\nfunction createContentInfoApiUrl(endpoint, contentId, license) {\r\n  let url = endpoint;\r\n  const paramsStr = [];\r\n\r\n  paramsStr.push(`content_id=${encodeURIComponent(contentId)}`);\r\n  if (license) {\r\n    paramsStr.push(`license=${encodeURIComponent(license)}`);\r\n  }\r\n\r\n  url = `${url}?${paramsStr.join('&')}`;\r\n\r\n  return url;\r\n}\r\n\r\n/**\r\n * Creates the url for request license api\r\n * @param {string} (required) endpoint api endpoint url\r\n * @param {integer} contentId (required) asset's unique identifer\r\n * @param {string} license (optional) licensing state for the asset.\r\n * @returns {string} api url\r\n */\r\nfunction createRequestLicenseApiUrl(endpoint, contentId, license) {\r\n  let url = endpoint;\r\n  const paramsStr = [];\r\n\r\n  paramsStr.push(`content_id=${encodeURIComponent(contentId)}`);\r\n  if (license) {\r\n    paramsStr.push(`license=${encodeURIComponent(license)}`);\r\n  }\r\n\r\n  url = `${url}?${paramsStr.join('&')}`;\r\n\r\n  return url;\r\n}\r\n\r\n/**\r\n * Creates the url for member abandon profile api\r\n * @param {string} (required) endpoint api endpoint url\r\n * @param {integer} contentId (required) asset's unique identifer\r\n * @param {string} state (required) user's purchase relationship to an asset\r\n * @returns {string} api url\r\n */\r\nfunction createMemberAbandonApiUrl(endpoint, contentId, state) {\r\n  let url = endpoint;\r\n  const paramsStr = [];\r\n\r\n  paramsStr.push(`content_id=${encodeURIComponent(contentId)}`);\r\n  paramsStr.push(`state=${encodeURIComponent(state)}`);\r\n\r\n  url = `${url}?${paramsStr.join('&')}`;\r\n\r\n  return url;\r\n}\r\n\r\n/**\r\n * Get the http method for the search files api call\r\n * @param {object} queryParams object of query parameters\r\n * @returns {string} http method\r\n */\r\nfunction getSearchFilesApiHttpMethod(queryParams) {\r\n  let method = Constants.HTTPMETHOD.GET;\r\n  // The http method for similar image search is POST\r\n  if (queryParams.search_parameters &&\r\n    queryParams.search_parameters.similar_image === 1) {\r\n    method = Constants.HTTPMETHOD.POST;\r\n  }\r\n\r\n  return method;\r\n}\r\n\r\n/**\r\n * Get the http method for the request license api call.\r\n * @param {array} cceAgency\r\n * @returns {string} http method\r\n */\r\nfunction getRequestLicenseApiHttpMethod(cceAgency) {\r\n  let method = Constants.HTTPMETHOD.GET;\r\n  if (cceAgency) {\r\n    method = Constants.HTTPMETHOD.POST;\r\n  }\r\n\r\n  return method;\r\n}\r\n\r\nexport default class StockApis {\r\n  /*\r\n   * Constructor of StockApis class\r\n   */\r\n  constructor(config) {\r\n    this.config = config;\r\n  }\r\n  /**\r\n   * Creates the url for search api\r\n   * @param {string} accessToken to be sent with Authorization header\r\n   * @param {object} queryParams query params object to be used for search files api query params\r\n   * @returns {promise} returns promise\r\n   */\r\n  searchFiles(accessToken, queryParams) {\r\n    return new Promise((onSuccess, onError) => {\r\n      try {\r\n        const httpMethod = getSearchFilesApiHttpMethod(queryParams);\r\n\r\n        const requestURL = createSearchFilesApiUrl(this.config.endpoints.search, queryParams);\r\n\r\n        const headers = {\r\n          'x-api-key': this.config.x_api_key,\r\n          'x-product': this.config.x_product,\r\n        };\r\n\r\n        if (accessToken) {\r\n          headers.Authorization = `Bearer ${accessToken}`;\r\n        }\r\n\r\n        if (httpMethod === Constants.HTTPMETHOD.GET) {\r\n          Utils.makeGetAjaxCall(requestURL, headers)\r\n              .then(onSuccess, onError);\r\n        } else {\r\n          // multipart/form-data request for similar_image search\r\n          const fd = new FormData();\r\n          const downsamplePromise = DownSamplingUtils.downsampleAndFixOrientationImage(\r\n                                    queryParams.similar_image);\r\n          downsamplePromise.then(\r\n            (downsampledFile) => {\r\n              fd.append('similar_image', downsampledFile);\r\n              Utils.makeMultiPartAjaxCall(requestURL, headers, fd)\r\n                  .then(onSuccess, onError);\r\n            },\r\n            (e) => {\r\n              onError(e);\r\n            },\r\n          );\r\n        }\r\n      } catch (e) {\r\n        onError(e);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Creates the url for license history api\r\n   * @param {string} accessToken to be sent with Authorization header\r\n   * @param {object} queryParams query params object to be used for license history api query params\r\n   * @returns {promise} returns promise\r\n   */\r\n  licenseHistory(accessToken, queryParams) {\r\n    return new Promise((onSuccess, onError) => {\r\n      try {\r\n        const requestURL = createLicenseHistoryApiUrl(this.config.endpoints.license_history,\r\n                                                      queryParams);\r\n        const headers = {\r\n          'x-api-key': this.config.x_api_key,\r\n          'x-product': this.config.x_product,\r\n        };\r\n\r\n        if (accessToken) {\r\n          headers.Authorization = `Bearer ${accessToken}`;\r\n        }\r\n\r\n        Utils.makeGetAjaxCall(requestURL, headers)\r\n             .then(onSuccess, onError);\r\n      } catch (e) {\r\n        onError(e);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Creates the url for category search api and fetch the result\r\n   * @param {object} queryParams query params object to be used for search category api query params\r\n   * @returns {promise} returns promise\r\n   */\r\n  searchCategory(queryParams) {\r\n    return new Promise((onSuccess, onError) => {\r\n      try {\r\n        const requestURL = createSearchCategoryApiUrl(this.config.endpoints.category, queryParams);\r\n\r\n        const headers = {\r\n          'x-api-key': this.config.x_api_key,\r\n          'x-product': this.config.x_product,\r\n        };\r\n\r\n        Utils.makeGetAjaxCall(requestURL, headers)\r\n             .then(onSuccess, onError);\r\n      } catch (e) {\r\n        onError(e);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Creates the url for category search api and fetch the result\r\n   * @param {object} queryParams query params object to be used for search category api query params\r\n   * @returns {promise} returns promise\r\n   */\r\n  searchCategoryTree(queryParams) {\r\n    return new Promise((onSuccess, onError) => {\r\n      try {\r\n        const requestURL = createSearchCategoryApiUrl(this.config.endpoints.category_tree,\r\n                                                      queryParams);\r\n\r\n        const headers = {\r\n          'x-api-key': this.config.x_api_key,\r\n          'x-product': this.config.x_product,\r\n        };\r\n\r\n        Utils.makeGetAjaxCall(requestURL, headers)\r\n             .then(onSuccess, onError);\r\n      } catch (e) {\r\n        onError(e);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Acess member profile\r\n   * @param {string} {required} accessToken to be sent with Authorization header\r\n   * @param {integer} contentId (required) asset's unique identifer\r\n   * @param {string} license (required) licensing state for the asset.\r\n   * @param {string} locale (optional) location language code\r\n   * @returns {promise} returns promise\r\n   */\r\n  accessMemberProfile(accessToken, contentId, license, locale) {\r\n    return new Promise((onSuccess, onError) => {\r\n      try {\r\n        const requestURL = createAccessMemberProfileApiUrl(this.config.endpoints.user_profile\r\n          , contentId, license, locale);\r\n\r\n        const headers = {\r\n          'x-api-key': this.config.x_api_key,\r\n          'x-product': this.config.x_product,\r\n        };\r\n\r\n        headers.Authorization = `Bearer ${accessToken}`;\r\n\r\n        Utils.makeGetAjaxCall(requestURL, headers)\r\n              .then(onSuccess, onError);\r\n      } catch (e) {\r\n        onError(e);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Notifies the system when a user abandons a licensing operation\r\n   * @param {string} {required} accessToken to be sent with Authorization header\r\n   * @param {integer} contentId (required) asset's unique identifer\r\n   * @param {string} state (required) user's purchase relationship to an asset\r\n   * @returns {promise} returns promise\r\n   */\r\n  memberAbandon(accessToken, contentId, state) {\r\n    return new Promise((onSuccess, onError) => {\r\n      try {\r\n        const requestURL = createMemberAbandonApiUrl(this.config.endpoints.abandon\r\n          , contentId, state);\r\n\r\n        const headers = {\r\n          'x-api-key': this.config.x_api_key,\r\n          'x-product': this.config.x_product,\r\n        };\r\n\r\n        headers.Authorization = `Bearer ${accessToken}`;\r\n\r\n        Utils.makeGetAjaxCall(requestURL, headers)\r\n              .then(onSuccess, onError);\r\n      } catch (e) {\r\n        onError(e);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Get licensing information about a specific asset for a specific user\r\n   * @param {string} {required} accessToken to be sent with Authorization header\r\n   * @param {integer} contentId (required) asset's unique identifer\r\n   * @param {string} license (required) licensing state for the asset.\r\n   * @returns {promise} returns promise\r\n   */\r\n  licenseInfo(accessToken, contentId, license) {\r\n    return new Promise((onSuccess, onError) => {\r\n      try {\r\n        const requestURL = createContentInfoApiUrl(this.config.endpoints.license_info\r\n          , contentId, license);\r\n\r\n        const headers = {\r\n          'x-api-key': this.config.x_api_key,\r\n          'x-product': this.config.x_product,\r\n        };\r\n\r\n        headers.Authorization = `Bearer ${accessToken}`;\r\n\r\n        Utils.makeGetAjaxCall(requestURL, headers)\r\n              .then(onSuccess, onError);\r\n      } catch (e) {\r\n        onError(e);\r\n      }\r\n    });\r\n  }\r\n\r\n   /**\r\n   * Requests a license for an asset for a specific user\r\n   * @param {string} {required} accessToken to be sent with Authorization header\r\n   * @param {integer} contentId (required) asset's unique identifer\r\n   * @param {string} license (required) licensing state for the asset.\r\n   * @param {array} cceAgency (optional) Specifies license references.\r\n   * @returns {promise} returns promise\r\n   */\r\n  requestLicense(accessToken, contentId, license, cceAgency) {\r\n    return new Promise((onSuccess, onError) => {\r\n      try {\r\n        const httpMethod = getRequestLicenseApiHttpMethod(cceAgency);\r\n        const requestURL = createRequestLicenseApiUrl(this.config.endpoints.license\r\n          , contentId, license);\r\n\r\n        const headers = {\r\n          'x-api-key': this.config.x_api_key,\r\n          'x-product': this.config.x_product,\r\n        };\r\n\r\n        headers.Authorization = `Bearer ${accessToken}`;\r\n\r\n        if (httpMethod === Constants.HTTPMETHOD.GET) {\r\n          Utils.makeGetAjaxCall(requestURL, headers)\r\n              .then(onSuccess, onError);\r\n        } else {\r\n          const obj = {\r\n            cce_agency: cceAgency,\r\n          };\r\n          const postData = JSON.stringify(obj);\r\n          Utils.makePostAjaxCall(requestURL, headers, postData)\r\n              .then(onSuccess, onError);\r\n        }\r\n      } catch (e) {\r\n        onError(e);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * Download the asset if user has valid quota or already purchased\r\n   * @param {string} accessToken (required) access token to be used for Authorization header\r\n   * @param {integer} contentId (required) asset's unique identifer\r\n   * @param {string} license (required) licensing state for the asset.\r\n   * @param {string} assetReturnMethodType (optional) how to retrive the image e.g. URL,\r\n   byte etc default is URL\r\n   * @returns {promise} promise\r\n   */\r\n  downloadAsset(accessToken, contentId, license) {\r\n    return new Promise((onSuccess, onError) => {\r\n      this.licenseInfo(accessToken, contentId, license)\r\n            .then((response) => {\r\n              if (response.contents[contentId].purchase_details.state !==\r\n                   Constants.PURCHASE_STATE_PARAMS.PURCHASED) {\r\n                this.accessMemberProfile(accessToken, contentId, license)\r\n                      .then((res) => {\r\n                        const canBuy = res.available_entitlement.quota !== 0 ||\r\n                                       res.purchase_options.state ===\r\n                                       Constants.PURCHASE_STATE_PARAMS.OVERAGE;\r\n                        if (canBuy) {\r\n                          onError(new Error(\r\n                            'Content not licensed but have enough quota or overage plan, so first buy the license!'));\r\n                        } else {\r\n                          onError(new Error('Content not licensed and you do not have enough quota or overage plan!'));\r\n                        }\r\n                      }, (error) => {\r\n                        onError(error);\r\n                      });\r\n              } else {\r\n                this.requestLicense(accessToken, contentId, license)\r\n                      .then((res) => {\r\n                        let URL = res.contents[contentId].purchase_details.url;\r\n                        URL = `${URL}?token=${accessToken}`;\r\n                        onSuccess(URL);\r\n                      }, (error) => {\r\n                        onError(error);\r\n                      });\r\n              }\r\n            }, (error) => {\r\n              onError(error);\r\n            });\r\n    });\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/api/stockApis.js","/**\r\n * Copyright 2017 Adobe Systems Incorporated. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n */\r\nimport Constants from './../constants/constants';\r\n\r\nconst prodEndpoints = require('./../../resources/prod_env.json');\r\nconst stageEndpoints = require('./../../resources/stage_env.json');\r\n\r\nexport default class Config {\r\n\r\n  /**\r\n   * Constructor for Config class\r\n   * @param {string} apiKey x_api_key header for the api calls\r\n   * @param {string} product x_product header for the api calls\r\n   * @param {ENVIRONMENT} env defines the environment for the library\r\n   */\r\n  constructor(apiKey, product, env = Constants.ENVIRONMENT.PROD) {\r\n    this.target_env = env;\r\n\r\n    this.endpoints = (this.target_env === Constants.ENVIRONMENT.PROD)\r\n        ? prodEndpoints : stageEndpoints;\r\n\r\n    if (apiKey) {\r\n      this.x_api_key = apiKey;\r\n    } else {\r\n      throw new Error('Api Key configuration is missing!');\r\n    }\r\n\r\n    if (product) {\r\n      this.x_product = product;\r\n    } else {\r\n      throw new Error('Product configuration is missing!');\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Checks if the config is initialized/set\r\n   * @returns {boolean} true if config is initialized/set, false otherwise\r\n   */\r\n  isConfigInitialized() {\r\n    if (this.target_env && this.endpoints && this.x_api_key && this.x_product) {\r\n      return true;\r\n    }\r\n    return false;\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/config/config.js","/**\r\n * Copyright 2017 Adobe Systems Incorporated. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n */\r\nimport Utils from './../utils/utils';\r\nimport Constants from './../constants/constants';\r\n\r\nconst DEFAULT_LICENSE_HISTORY_LIMIT = 100;\r\n\r\n/**\r\n * Helper function for LicenseHistoryIterator to clone Query Params object\r\n * @param {object} queryParams object to be cloned\r\n * @returns {object} the cloned object\r\n */\r\nfunction cloneQueryParamsHelper(queryParams) {\r\n  const cloneQueryParams = {};\r\n\r\n  Object.keys(queryParams).forEach((key) => {\r\n    if (key === Constants.QUERY_PARAMS_PROPS.SEARCH_PARAMETERS\r\n      || key === Constants.QUERY_PARAMS_PROPS.RESULT_COLUMNS) {\r\n      cloneQueryParams[key] = JSON.parse(JSON.stringify(queryParams[key]));\r\n    } else {\r\n      cloneQueryParams[key] = queryParams[key];\r\n    }\r\n  });\r\n\r\n  return cloneQueryParams;\r\n}\r\n\r\n/**\r\n * Stores queryParams\r\n * @private\r\n */\r\nfunction storeQueryParamsState() {\r\n  this.lastQueryParams = this.queryParams;\r\n}\r\n\r\n/**\r\n * Restores queryParams\r\n * @private\r\n */\r\nfunction revertToLastQueryParamsState() {\r\n  if (this.lastQueryParams) {\r\n    this.queryParams = this.lastQueryParams;\r\n  }\r\n  this.lastQueryParams = null;\r\n}\r\n\r\n/**\r\n * Does stuff on doApiCall success\r\n * @param {string} response string from the api\r\n */\r\nfunction doOnSuccess(response) {\r\n  this.response = response;\r\n\r\n  this.apiInProgress = false;\r\n}\r\n\r\n/**\r\n * Does stuff on doApiCall failure\r\n */\r\nfunction doOnError() {\r\n  revertToLastQueryParamsState.call(this);\r\n  this.apiInProgress = false;\r\n}\r\n\r\n/**\r\n * Do license history api call\r\n * @param {object} queryParams query parameter object\r\n * @returns {promise} returns promise\r\n */\r\nfunction doApiCall(queryParams) {\r\n  return new Promise((onSuccess, onError) => {\r\n    if (this.apiInProgress) {\r\n      throw new Error('Some other search is already in progress!');\r\n    }\r\n\r\n    try {\r\n      this.apiInProgress = true;\r\n\r\n      storeQueryParamsState.call(this);\r\n      this.queryParams = queryParams;\r\n\r\n      if (this.stockApis) {\r\n        this.stockApis.licenseHistory(this.accessToken, this.queryParams)\r\n              .then((response) => {\r\n                doOnSuccess.call(this, response);\r\n                if (onSuccess) {\r\n                  onSuccess();\r\n                }\r\n              },\r\n              (error) => {\r\n                doOnError.call(this, error);\r\n                if (onError) {\r\n                  onError(error);\r\n                }\r\n              });\r\n      } else {\r\n        throw new Error('Library couldn\\'t initialize properly! Please initialize the library first.');\r\n      }\r\n    } catch (e) {\r\n      doOnError.call(this, e);\r\n      if (onError) {\r\n        onError(e);\r\n      }\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * LicenseHistoryIterator class\r\n */\r\nexport default class LicenseHistoryIterator {\r\n\r\n  /**\r\n   * constructor of LicenseHistoryIterator\r\n   * @param {StockApis} stockApis api object\r\n   * @param {string} accessToken access token string to be used with api calls\r\n   * @param {object} queryParams query params object to be used for license history api query params\r\n   * @param {boolean} nbResultsPresent nb_results column was present in user requested columns\r\n   */\r\n  constructor(stockApis, accessToken, queryParams, nbResultsPresent) {\r\n    this.stockApis = stockApis;\r\n    this.accessToken = accessToken;\r\n    this.queryParams = queryParams;\r\n    this.nbResultsPresent = nbResultsPresent;\r\n    this.response = {};\r\n    this.lastQueryParams = null;\r\n    this.apiInProgress = false;\r\n\r\n    if (!this.queryParams.search_parameters.limit) {\r\n      this.queryParams.search_parameters.limit = DEFAULT_LICENSE_HISTORY_LIMIT;\r\n    }\r\n\r\n    // Set the offset to one page behind to the current page\r\n    if (!this.queryParams.search_parameters.offset) {\r\n      this.queryParams.search_parameters.offset = 0;\r\n    }\r\n\r\n    this.queryParams.search_parameters.offset -= this.queryParams.search_parameters.limit;\r\n  }\r\n\r\n  /**\r\n  * Returns total licensed files available\r\n  * @returns {integer} total licensed files available\r\n   */\r\n  totalSearchFiles() {\r\n    if (this.queryParams.search_parameters.offset >= 0 && this.response.nb_results) {\r\n      return this.response.nb_results;\r\n    }\r\n    return Constants.LICENSE_HISTORY_ITERATOR_RETURN_ERROR;\r\n  }\r\n\r\n  /**\r\n   * Returns total license history pages\r\n   * @returns {integer} total license history (pages) available\r\n   */\r\n  totalSearchPages() {\r\n    if (this.queryParams.search_parameters.offset >= 0 && this.response.nb_results) {\r\n      return Math.ceil(this.response.nb_results / this.queryParams.search_parameters.limit);\r\n    }\r\n    return Constants.LICENSE_HISTORY_ITERATOR_RETURN_ERROR;\r\n  }\r\n\r\n  /**\r\n   * Returns current license history page index\r\n   * @returns {integer} index of current license history (page) available\r\n   */\r\n  currentSearchPageIndex() {\r\n    if (this.queryParams.search_parameters.offset >= 0 && this.response.nb_results) {\r\n      const offset = this.queryParams.search_parameters.offset;\r\n      return Math.ceil(offset / this.queryParams.search_parameters.limit);\r\n    }\r\n    return Constants.LICENSE_HISTORY_ITERATOR_RETURN_ERROR;\r\n  }\r\n\r\n  /**\r\n   * Returns response from last api call\r\n   * @returns {object} response object available from last api call\r\n   */\r\n  getResponse() {\r\n    const userResponse = cloneQueryParamsHelper(this.response);\r\n\r\n    if (!this.nbResultsPresent && userResponse.nb_results) {\r\n      delete userResponse.nb_results;\r\n    }\r\n\r\n    return userResponse;\r\n  }\r\n\r\n  /**\r\n   * function to get to next license history page\r\n   * @returns {promise} returns the promise\r\n   */\r\n  next() {\r\n    return new Promise((onSuccess, onError) => {\r\n      try {\r\n        const queryParams = cloneQueryParamsHelper(this.queryParams);\r\n\r\n        const limit = queryParams.search_parameters.limit;\r\n\r\n        if (!queryParams.search_parameters.offset) {\r\n          queryParams.search_parameters.offset = limit;\r\n        } else {\r\n          queryParams.search_parameters.offset += limit;\r\n        }\r\n\r\n        if (this.response.nb_results\r\n            && queryParams.search_parameters.offset >= this.response.nb_results) {\r\n          throw new Error('No more search results available!');\r\n        }\r\n\r\n        doApiCall.call(this, queryParams)\r\n              .then(onSuccess, onError);\r\n      } catch (er) {\r\n        if (onError) {\r\n          onError(er);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * function to get to previous license history page\r\n   * @returns {promise} returns the promise\r\n   */\r\n  previous() {\r\n    return new Promise((onSuccess, onError) => {\r\n      try {\r\n        const queryParams = cloneQueryParamsHelper(this.queryParams);\r\n\r\n        queryParams.search_parameters.offset -= queryParams.search_parameters.limit;\r\n\r\n        if (queryParams.search_parameters.offset < 0) {\r\n          throw new Error('No more search results available!');\r\n        }\r\n\r\n        doApiCall.call(this, queryParams)\r\n              .then(onSuccess, onError);\r\n      } catch (er) {\r\n        if (onError) {\r\n          onError(er);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * function to skip to a specific license history results page\r\n   * @param {integer} pageIndex (required) the index of page to skip on\r\n   * @returns {promise} returns the promise\r\n   */\r\n  skipTo(pageIndex) {\r\n    return new Promise((onSuccess, onError) => {\r\n      try {\r\n        const totalPages = this.totalSearchPages();\r\n\r\n        if (!Utils.isInteger(pageIndex)\r\n              || pageIndex < 0\r\n              || (totalPages !== Constants.LICENSE_HISTORY_ITERATOR_RETURN_ERROR\r\n                  && pageIndex >= totalPages)) {\r\n          throw new Error('Page index out of bounds!');\r\n        }\r\n\r\n        const queryParams = cloneQueryParamsHelper(this.queryParams);\r\n\r\n        queryParams.search_parameters.offset = pageIndex * queryParams.search_parameters.limit;\r\n\r\n        if (queryParams.search_parameters.offset < 0) {\r\n          throw new Error('No more search results available!');\r\n        }\r\n\r\n        doApiCall.call(this, queryParams)\r\n              .then(onSuccess, onError);\r\n      } catch (er) {\r\n        if (onError) {\r\n          onError(er);\r\n        }\r\n      }\r\n    });\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/licenseHistoryIterator.js","/**\r\n * Copyright 2017 Adobe Systems Incorporated. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n */\r\nimport Utils from './../utils/utils';\r\nimport Constants from './../constants/constants';\r\n\r\nconst DEFAULT_SEARCH_FILES_LIMIT = 32;\r\n\r\n/**\r\n * Helper function for SearchFilesIterator to clone Query Params object\r\n * @param {object} queryParams object to be cloned\r\n * @returns {object} the cloned object\r\n */\r\nfunction cloneQueryParamsHelper(queryParams) {\r\n  const cloneQueryParams = {};\r\n\r\n  Object.keys(queryParams).forEach((key) => {\r\n    if (key === Constants.QUERY_PARAMS_PROPS.SEARCH_PARAMETERS\r\n      || key === Constants.QUERY_PARAMS_PROPS.RESULT_COLUMNS) {\r\n      cloneQueryParams[key] = JSON.parse(JSON.stringify(queryParams[key]));\r\n    } else {\r\n      cloneQueryParams[key] = queryParams[key];\r\n    }\r\n  });\r\n\r\n  return cloneQueryParams;\r\n}\r\n\r\n/**\r\n * Stores queryParams\r\n * @private\r\n */\r\nfunction storeQueryParamsState() {\r\n  this.lastQueryParams = this.queryParams;\r\n}\r\n\r\n/**\r\n * Restores queryParams\r\n * @private\r\n */\r\nfunction revertToLastQueryParamsState() {\r\n  if (this.lastQueryParams) {\r\n    this.queryParams = this.lastQueryParams;\r\n  }\r\n  this.lastQueryParams = null;\r\n}\r\n\r\n/**\r\n * Does stuff on doApiCall success\r\n * @param {string} response string from the api\r\n */\r\nfunction doOnSuccess(response) {\r\n  this.response = response;\r\n\r\n  this.apiInProgress = false;\r\n}\r\n\r\n/**\r\n * Does stuff on doApiCall failure\r\n */\r\nfunction doOnError() {\r\n  revertToLastQueryParamsState.call(this);\r\n  this.apiInProgress = false;\r\n}\r\n\r\n/**\r\n * Do search files api call\r\n * @param {object} queryParams query parameter object\r\n * @returns {promise} returns promise\r\n */\r\nfunction doApiCall(queryParams) {\r\n  return new Promise((onSuccess, onError) => {\r\n    if (this.apiInProgress) {\r\n      throw new Error('Some other search is already in progress!');\r\n    }\r\n\r\n    try {\r\n      this.apiInProgress = true;\r\n\r\n      storeQueryParamsState.call(this);\r\n      this.queryParams = queryParams;\r\n\r\n      if (this.stockApis) {\r\n        this.stockApis.searchFiles(this.accessToken, this.queryParams)\r\n              .then((response) => {\r\n                doOnSuccess.call(this, response);\r\n                if (onSuccess) {\r\n                  onSuccess();\r\n                }\r\n              },\r\n              (error) => {\r\n                doOnError.call(this, error);\r\n                if (onError) {\r\n                  onError(error);\r\n                }\r\n              });\r\n      } else {\r\n        throw new Error('Library couldn\\'t initialize properly! Please initialize the library first.');\r\n      }\r\n    } catch (e) {\r\n      doOnError.call(this, e);\r\n      if (onError) {\r\n        onError(e);\r\n      }\r\n    }\r\n  });\r\n}\r\n\r\n/**\r\n * SearchFilesIterator class\r\n */\r\nexport default class SearchFilesIterator {\r\n\r\n  /**\r\n   * constructor of SearchFilesIterator\r\n   * @param {StockApis} stockApis api object\r\n   * @param {string} accessToken access token string to be used with api calls\r\n   * @param {object} queryParams query params object to be used for search files api query params\r\n   * @param {boolean} nbResultsPresent nb_results column was present in user requested columns\r\n   */\r\n  constructor(stockApis, accessToken, queryParams, nbResultsPresent) {\r\n    this.stockApis = stockApis;\r\n    this.accessToken = accessToken;\r\n    this.queryParams = queryParams;\r\n    this.nbResultsPresent = nbResultsPresent;\r\n    this.response = {};\r\n    this.lastQueryParams = null;\r\n    this.apiInProgress = false;\r\n\r\n    if (!this.queryParams.search_parameters.limit) {\r\n      this.queryParams.search_parameters.limit = DEFAULT_SEARCH_FILES_LIMIT;\r\n    }\r\n\r\n    // Set the offset to one page behind to the current page\r\n    if (!this.queryParams.search_parameters.offset) {\r\n      this.queryParams.search_parameters.offset = 0;\r\n    }\r\n\r\n    this.queryParams.search_parameters.offset -= this.queryParams.search_parameters.limit;\r\n  }\r\n\r\n  /**\r\n  * Returns total search files available\r\n  * @returns {integer} total search files available\r\n   */\r\n  totalSearchFiles() {\r\n    if (this.queryParams.search_parameters.offset >= 0 && this.response.nb_results) {\r\n      return this.response.nb_results;\r\n    }\r\n    return Constants.SEARCH_FILES_ITERATOR_RETURN_ERROR;\r\n  }\r\n\r\n  /**\r\n   * Returns total search results pages\r\n   * @returns {integer} total search results (pages) available\r\n   */\r\n  totalSearchPages() {\r\n    if (this.queryParams.search_parameters.offset >= 0 && this.response.nb_results) {\r\n      return Math.ceil(this.response.nb_results / this.queryParams.search_parameters.limit);\r\n    }\r\n    return Constants.SEARCH_FILES_ITERATOR_RETURN_ERROR;\r\n  }\r\n\r\n  /**\r\n   * Returns current search results page index\r\n   * @returns {integer} index of current search results (page) available\r\n   */\r\n  currentSearchPageIndex() {\r\n    if (this.queryParams.search_parameters.offset >= 0 && this.response.nb_results) {\r\n      const offset = this.queryParams.search_parameters.offset;\r\n      return Math.ceil(offset / this.queryParams.search_parameters.limit);\r\n    }\r\n    return Constants.SEARCH_FILES_ITERATOR_RETURN_ERROR;\r\n  }\r\n\r\n  /**\r\n   * Returns response from last api call\r\n   * @returns {object} response object available from last api call\r\n   */\r\n  getResponse() {\r\n    const userResponse = cloneQueryParamsHelper(this.response);\r\n\r\n    if (!this.nbResultsPresent && userResponse.nb_results) {\r\n      delete userResponse.nb_results;\r\n    }\r\n\r\n    return userResponse;\r\n  }\r\n\r\n  /**\r\n   * function to get to next search results page\r\n   * @returns {promise} returns the promise\r\n   */\r\n  next() {\r\n    return new Promise((onSuccess, onError) => {\r\n      try {\r\n        const queryParams = cloneQueryParamsHelper(this.queryParams);\r\n\r\n        const limit = queryParams.search_parameters.limit;\r\n\r\n        if (!queryParams.search_parameters.offset) {\r\n          queryParams.search_parameters.offset = limit;\r\n        } else {\r\n          queryParams.search_parameters.offset += limit;\r\n        }\r\n\r\n        if (this.response.nb_results\r\n            && queryParams.search_parameters.offset >= this.response.nb_results) {\r\n          throw new Error('No more search results available!');\r\n        }\r\n\r\n        doApiCall.call(this, queryParams)\r\n              .then(onSuccess, onError);\r\n      } catch (er) {\r\n        if (onError) {\r\n          onError(er);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * function to get to previous search results page\r\n   * @returns {promise} returns the promise\r\n   */\r\n  previous() {\r\n    return new Promise((onSuccess, onError) => {\r\n      try {\r\n        const queryParams = cloneQueryParamsHelper(this.queryParams);\r\n\r\n        queryParams.search_parameters.offset -= queryParams.search_parameters.limit;\r\n\r\n        if (queryParams.search_parameters.offset < 0) {\r\n          throw new Error('No more search results available!');\r\n        }\r\n\r\n        doApiCall.call(this, queryParams)\r\n              .then(onSuccess, onError);\r\n      } catch (er) {\r\n        if (onError) {\r\n          onError(er);\r\n        }\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n   * function to skip to a specific search results page\r\n   * @param {integer} pageIndex (required) the index of page to skip on\r\n   * @returns {promise} returns the promise\r\n   */\r\n  skipTo(pageIndex) {\r\n    return new Promise((onSuccess, onError) => {\r\n      try {\r\n        const totalPages = this.totalSearchPages();\r\n\r\n        if (!Utils.isInteger(pageIndex)\r\n              || pageIndex < 0\r\n              || (totalPages !== Constants.SEARCH_FILES_ITERATOR_RETURN_ERROR\r\n                  && pageIndex >= totalPages)) {\r\n          throw new Error('Page index out of bounds!');\r\n        }\r\n\r\n        const queryParams = cloneQueryParamsHelper(this.queryParams);\r\n\r\n        queryParams.search_parameters.offset = pageIndex * queryParams.search_parameters.limit;\r\n\r\n        if (queryParams.search_parameters.offset < 0) {\r\n          throw new Error('No more search results available!');\r\n        }\r\n\r\n        doApiCall.call(this, queryParams)\r\n              .then(onSuccess, onError);\r\n      } catch (er) {\r\n        if (onError) {\r\n          onError(er);\r\n        }\r\n      }\r\n    });\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/models/searchFilesIterator.js","import Constants from './../constants/constants';\r\nimport Utils from './../utils/utils';\r\n\r\n/**\r\n * validates license against the predefined license type\r\n * @param {string} license License type\r\n */\r\nfunction validateLicenseType(license) {\r\n  // stock APIs do case insensitive matching for license type,\r\n  // hence converting all characters to lower case\r\n  const licenseLower = license.toLowerCase();\r\n\r\n  // check if license is one of the license type supported\r\n  if (!Utils.doesJSONContainsValue(Constants.LICENSE_STATE_PARAMS, licenseLower)) {\r\n    throw new Error('License type not supported!');\r\n  }\r\n}\r\n\r\n/**\r\n * validates license state against the predefined license state\r\n * @param {string} state License state\r\n */\r\nfunction validateLicenseState(state) {\r\n  // stock APIs do case insensitive matching for license state,\r\n  // hence converting all characters to lower case\r\n  const stateLower = state.toLowerCase();\r\n  // check if license is one of the license type supported\r\n  if (!Utils.doesJSONContainsValue(Constants.PURCHASE_STATE_PARAMS, stateLower)) {\r\n    throw new Error('License state not supported!');\r\n  }\r\n}\r\n\r\nexport default class LicenseParamsUtils {\r\n  /**\r\n   * function to verify the params for the license related APIs\r\n   * @param {string} accessToken access token to be used for Authorization header\r\n   * @param {integer} contentId asset's unique identifer\r\n   * @param {string} license licensing state for the asset.\r\n   */\r\n  static validateContentLicenseParams(accessToken, contentId, license) {\r\n    if (accessToken == null || typeof accessToken !== 'string') {\r\n      throw new Error('access token missing or not of type string!');\r\n    }\r\n\r\n    if (contentId == null || Number.isInteger(contentId) === false) {\r\n      throw new Error('contentId missing or contentId is not of type Integer!');\r\n    }\r\n\r\n    if (license && typeof license !== 'string') {\r\n      throw new Error('license is not of type string!');\r\n    }\r\n\r\n    if (license) {\r\n      validateLicenseType(license);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * function to verify the params for the license related APIs\r\n   * @param {string} accessToken access token to be used for Authorization header\r\n   * @param {integer} contentId asset's unique identifer\r\n   * @param {string} state licensing state for the asset.\r\n   */\r\n  static validateMemberAbandonLicenseParams(accessToken, contentId, state) {\r\n    if (accessToken == null || typeof accessToken !== 'string') {\r\n      throw new Error('access Token missing or not of type string!');\r\n    }\r\n\r\n    if (contentId == null || Number.isInteger(contentId) === false) {\r\n      throw new Error('contentId missing or contentId is not of type Integer!');\r\n    }\r\n\r\n    if (state == null || typeof state !== 'string') {\r\n      throw new Error('state missing or state is not of type string!');\r\n    }\r\n\r\n    validateLicenseState(state);\r\n  }\r\n\r\n  /**\r\n   * function to verify the params for the license related APIs\r\n   * @param {string} accessToken access token to be used for Authorization header\r\n   * @param {integer} contentId asset's unique identifer\r\n   * @param {string} license licensing state for the asset.\r\n   */\r\n  static validateMemberProfileLicenseParams(accessToken, contentId, license) {\r\n    if (accessToken == null || typeof accessToken !== 'string') {\r\n      throw new Error('access token missing or not of type string!');\r\n    }\r\n\r\n    if (contentId && Number.isInteger(contentId) === false) {\r\n      throw new Error('contentId is not of type Integer!');\r\n    }\r\n\r\n    if (license && typeof license !== 'string') {\r\n      throw new Error('license is not of type string!');\r\n    }\r\n\r\n    if (license) {\r\n      validateLicenseType(license);\r\n    }\r\n  }\r\n\r\n  /**\r\n   * function to verify the reference data for Content License API\r\n   * @param {array} cceAgency Specifies license references.\r\n   */\r\n  static validateReferenceData(cceAgency) {\r\n    if (!Utils.isArray(cceAgency)) {\r\n      throw new Error('cceAgency is not of type array');\r\n    }\r\n\r\n    cceAgency.forEach((referenceData) => {\r\n      if (referenceData.id == null || Utils.isInteger(referenceData.id) === false) {\r\n        throw new Error('id missing or id is not of type Integer!');\r\n      }\r\n\r\n      if (referenceData.value == null || typeof referenceData.value !== 'string') {\r\n        throw new Error('value missing or value is not of type string!');\r\n      }\r\n    });\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/licenseParamsUtils.js","import Utils from './utils';\r\nimport SearchParamsUtils from './searchParamsUtils';\r\nimport ResultColumnsUtils from './resultColumnsUtils';\r\nimport Constants from './../constants/constants';\r\n\r\nexport default class QueryParamsUtils {\r\n\r\n  /**\r\n  * Checks if the queryParams has nb_results column\r\n  * @param {!object} queryParams object of query parameters\r\n  * @returns {boolean} true if nb_results present, false otherwise\r\n  */\r\n  static isNBResultsColumnPresent(queryParams) {\r\n    // we need result column for hasMoreFiles & nextSearchFiles to work properly\r\n    if (queryParams.result_columns\r\n             && queryParams.result_columns.indexOf(Constants.RESULT_COLUMNS.NB_RESULTS) === -1) {\r\n      return false;\r\n    }\r\n\r\n    // if result_columns isn't present in query params then default result_columns\r\n    // contains nb_results\r\n    return true;\r\n  }\r\n\r\n  /**\r\n  * Add result column nb_results\r\n  * @param {!object} queryParams object of query parameters\r\n  * @returns {object} query parameter object with nb_results column if added\r\n  */\r\n  static addResultColumnNBResults(queryParams) {\r\n    if (queryParams.result_columns && QueryParamsUtils.isNBResultsColumnPresent(queryParams)) {\r\n      throw new Error('Query parameter already contains nb_results in result_columns');\r\n    }\r\n\r\n    // we need result column for hasMoreFiles & nextSearchFiles to work properly\r\n    if (queryParams.result_columns) {\r\n      queryParams.result_columns.push(Constants.RESULT_COLUMNS.NB_RESULTS);\r\n    }\r\n\r\n    return queryParams;\r\n  }\r\n\r\n  /**\r\n  * Validates the query parameters\r\n  * @param {!object} queryParams object of query parameters\r\n  * @param {string} accessToken access token to be validated if is_licensed requested in results\r\n  * column\r\n  */\r\n  static validateSearchFileQueryParams(queryParams, accessToken) {\r\n    Object.keys(queryParams).forEach((param) => {\r\n      if (param === Constants.QUERY_PARAMS_PROPS.LOCALE) {\r\n        if (typeof queryParams[param] !== 'string') {\r\n          throw new Error('locale expects string only. For e.g. en-US, fr-FR etc.');\r\n        }\r\n      } else if (param === Constants.QUERY_PARAMS_PROPS.SEARCH_PARAMETERS) {\r\n        SearchParamsUtils.validate(queryParams[param]);\r\n      } else if (param === Constants.QUERY_PARAMS_PROPS.RESULT_COLUMNS) {\r\n        ResultColumnsUtils.validate(queryParams[param]);\r\n      } else if (param !== Constants.QUERY_PARAMS_PROPS.SIMILAR_IMAGE) {\r\n        throw new Error(`Invalid query parameter '${param}'! for file search query`);\r\n      }\r\n    });\r\n\r\n    // Check if is_licensed is requested in result_columns\r\n    if (queryParams.result_columns\r\n        && queryParams.result_columns.indexOf(Constants.RESULT_COLUMNS.IS_LICENSED) > -1\r\n        && !accessToken) {\r\n      throw new Error('Access Token missing! Result Column \\'is_licensed\\' requires authentication.');\r\n    }\r\n\r\n    if (queryParams.search_parameters\r\n        && queryParams.search_parameters.similar_image === 1\r\n        && !queryParams.similar_image) {\r\n      throw new Error('Image Data missing! Search parameter similar_image requires similar_image in query parameters');\r\n    }\r\n  }\r\n\r\n  /**\r\n  * Validates the query parameters for license history\r\n  * @param {!object} queryParams object of query parameters\r\n  * @param {string} accessToken access token to be validated if is_licensed requested in results\r\n  * column\r\n  */\r\n  static validateLicenseHistoryQueryParams(queryParams) {\r\n    Object.keys(queryParams).forEach((param) => {\r\n      if (param === Constants.QUERY_PARAMS_PROPS.LOCALE) {\r\n        if (typeof queryParams[param] !== 'string') {\r\n          throw new Error('locale expects string only. For e.g. en-US, fr-FR etc.');\r\n        }\r\n      } else if (param === Constants.QUERY_PARAMS_PROPS.SEARCH_PARAMETERS) {\r\n        SearchParamsUtils.validateLicenseHistory(queryParams[param]);\r\n      } else if (param === Constants.QUERY_PARAMS_PROPS.RESULT_COLUMNS) {\r\n        ResultColumnsUtils.validateLicenseHistory(queryParams[param]);\r\n      } else {\r\n        throw new Error(`Invalid query parameter '${param}'! for license history query`);\r\n      }\r\n    });\r\n  }\r\n\r\n  /**\r\n  * Validates the query parameters\r\n  * @param {!object} queryParams object of query parameters\r\n  */\r\n  static validateSearchCategoryQueryParams(queryParams) {\r\n    QueryParamsUtils.validateSearchCategoryTreeQueryParams(queryParams);\r\n\r\n    //  category_id is required with url parameters\r\n    if (!Object.getOwnPropertyDescriptor(queryParams, Constants.QUERY_PARAMS_PROPS.CATEGORY)) {\r\n      throw new Error('category_id missing! category search requires category_id in query parameters.');\r\n    }\r\n  }\r\n\r\n  /**\r\n  * Validates the query parameters\r\n  * @param {!object} queryParams object of query parameters\r\n  */\r\n  static validateSearchCategoryTreeQueryParams(queryParams) {\r\n    if (queryParams && !Utils.isObject(queryParams)) {\r\n      throw new Error('queryParams expects Object!');\r\n    }\r\n\r\n    Object.keys(queryParams).forEach((param) => {\r\n      if (param === Constants.QUERY_PARAMS_PROPS.LOCALE) {\r\n        if (typeof queryParams[param] !== 'string') {\r\n          throw new Error('locale expects string only. For e.g. en-US, fr-FR etc.');\r\n        }\r\n      } else if (param === Constants.QUERY_PARAMS_PROPS.CATEGORY) {\r\n        if (!Number.isInteger(queryParams[param])) {\r\n          throw new Error('category_id expects integer only. For e.g. 1043, 4526 etc.');\r\n        }\r\n      } else {\r\n        throw new Error(`Invalid query parameter '${param}'! for category search query!`);\r\n      }\r\n    });\r\n  }\r\n\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/queryParamsUtils.js","var v1 = require('./v1');\nvar v4 = require('./v4');\n\nvar uuid = v4;\nuuid.v1 = v1;\nuuid.v4 = v4;\n\nmodule.exports = uuid;\n\n\n\n// WEBPACK FOOTER //\n// ./~/uuid/index.js","// Unique ID creation requires a high quality random # generator.  We feature\n// detect to determine the best RNG source, normalizing to a function that\n// returns 128-bits of randomness, since that's what's usually required\nvar rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\n// **`v1()` - Generate time-based UUID**\n//\n// Inspired by https://github.com/LiosK/UUID.js\n// and http://docs.python.org/library/uuid.html\n\n// random #'s we need to init node and clockseq\nvar _seedBytes = rng();\n\n// Per 4.5, create and 48-bit node id, (47 random bits + multicast bit = 1)\nvar _nodeId = [\n  _seedBytes[0] | 0x01,\n  _seedBytes[1], _seedBytes[2], _seedBytes[3], _seedBytes[4], _seedBytes[5]\n];\n\n// Per 4.2.2, randomize (14 bit) clockseq\nvar _clockseq = (_seedBytes[6] << 8 | _seedBytes[7]) & 0x3fff;\n\n// Previous uuid creation time\nvar _lastMSecs = 0, _lastNSecs = 0;\n\n// See https://github.com/broofa/node-uuid for API details\nfunction v1(options, buf, offset) {\n  var i = buf && offset || 0;\n  var b = buf || [];\n\n  options = options || {};\n\n  var clockseq = options.clockseq !== undefined ? options.clockseq : _clockseq;\n\n  // UUID timestamps are 100 nano-second units since the Gregorian epoch,\n  // (1582-10-15 00:00).  JSNumbers aren't precise enough for this, so\n  // time is handled internally as 'msecs' (integer milliseconds) and 'nsecs'\n  // (100-nanoseconds offset from msecs) since unix epoch, 1970-01-01 00:00.\n  var msecs = options.msecs !== undefined ? options.msecs : new Date().getTime();\n\n  // Per 4.2.1.2, use count of uuid's generated during the current clock\n  // cycle to simulate higher resolution clock\n  var nsecs = options.nsecs !== undefined ? options.nsecs : _lastNSecs + 1;\n\n  // Time since last uuid creation (in msecs)\n  var dt = (msecs - _lastMSecs) + (nsecs - _lastNSecs)/10000;\n\n  // Per 4.2.1.2, Bump clockseq on clock regression\n  if (dt < 0 && options.clockseq === undefined) {\n    clockseq = clockseq + 1 & 0x3fff;\n  }\n\n  // Reset nsecs if clock regresses (new clockseq) or we've moved onto a new\n  // time interval\n  if ((dt < 0 || msecs > _lastMSecs) && options.nsecs === undefined) {\n    nsecs = 0;\n  }\n\n  // Per 4.2.1.2 Throw error if too many uuids are requested\n  if (nsecs >= 10000) {\n    throw new Error('uuid.v1(): Can\\'t create more than 10M uuids/sec');\n  }\n\n  _lastMSecs = msecs;\n  _lastNSecs = nsecs;\n  _clockseq = clockseq;\n\n  // Per 4.1.4 - Convert from unix epoch to Gregorian epoch\n  msecs += 12219292800000;\n\n  // `time_low`\n  var tl = ((msecs & 0xfffffff) * 10000 + nsecs) % 0x100000000;\n  b[i++] = tl >>> 24 & 0xff;\n  b[i++] = tl >>> 16 & 0xff;\n  b[i++] = tl >>> 8 & 0xff;\n  b[i++] = tl & 0xff;\n\n  // `time_mid`\n  var tmh = (msecs / 0x100000000 * 10000) & 0xfffffff;\n  b[i++] = tmh >>> 8 & 0xff;\n  b[i++] = tmh & 0xff;\n\n  // `time_high_and_version`\n  b[i++] = tmh >>> 24 & 0xf | 0x10; // include version\n  b[i++] = tmh >>> 16 & 0xff;\n\n  // `clock_seq_hi_and_reserved` (Per 4.2.2 - include variant)\n  b[i++] = clockseq >>> 8 | 0x80;\n\n  // `clock_seq_low`\n  b[i++] = clockseq & 0xff;\n\n  // `node`\n  var node = options.node || _nodeId;\n  for (var n = 0; n < 6; ++n) {\n    b[i + n] = node[n];\n  }\n\n  return buf ? buf : bytesToUuid(b);\n}\n\nmodule.exports = v1;\n\n\n\n// WEBPACK FOOTER //\n// ./~/uuid/v1.js","var rng = require('./lib/rng');\nvar bytesToUuid = require('./lib/bytesToUuid');\n\nfunction v4(options, buf, offset) {\n  var i = buf && offset || 0;\n\n  if (typeof(options) == 'string') {\n    buf = options == 'binary' ? new Array(16) : null;\n    options = null;\n  }\n  options = options || {};\n\n  var rnds = options.random || (options.rng || rng)();\n\n  // Per 4.4, set bits for version and `clock_seq_hi_and_reserved`\n  rnds[6] = (rnds[6] & 0x0f) | 0x40;\n  rnds[8] = (rnds[8] & 0x3f) | 0x80;\n\n  // Copy bytes to buffer, if provided\n  if (buf) {\n    for (var ii = 0; ii < 16; ++ii) {\n      buf[i + ii] = rnds[ii];\n    }\n  }\n\n  return buf || bytesToUuid(rnds);\n}\n\nmodule.exports = v4;\n\n\n\n// WEBPACK FOOTER //\n// ./~/uuid/v4.js","var g;\r\n\r\n// This works in non-strict mode\r\ng = (function() {\r\n\treturn this;\r\n})();\r\n\r\ntry {\r\n\t// This works if eval is allowed (see CSP)\r\n\tg = g || Function(\"return this\")() || (1,eval)(\"this\");\r\n} catch(e) {\r\n\t// This works if the window reference is available\r\n\tif(typeof window === \"object\")\r\n\t\tg = window;\r\n}\r\n\r\n// g can still be undefined, but nothing to do about it...\r\n// We return undefined, instead of nothing here, so it's\r\n// easier to handle this case. if(!global) { ...}\r\n\r\nmodule.exports = g;\r\n\n\n\n// WEBPACK FOOTER //\n// (webpack)/buildin/global.js","import Constants from './../constants/constants';\r\n\r\nexport default class DownSamplingUtils {\r\n  /**\r\n  * Converts the data uri from a canvas to a blob that can be pushed to redpill\r\n  *\r\n  * @param {Object} dataURI\r\n  * @return {Object} blob of uri data\r\n  */\r\n  static dataURItoBlob(dataURI) {\r\n    // convert base64/URLEncoded data component to raw binary data held in a string\r\n    let byteString;\r\n    const uriSplit = dataURI.split(',');\r\n\r\n    if (uriSplit[0].indexOf('base64') >= 0) {\r\n      byteString = atob(uriSplit[1]);\r\n    } else {\r\n      byteString = decodeURI(uriSplit[1]);\r\n    }\r\n\r\n    // separate out the mime component\r\n    const mimeString = uriSplit[0].split(':')[1].split(';')[0];\r\n\r\n    // write the bytes of the string to a typed array\r\n    const ia = new Uint8Array(byteString.length);\r\n    for (let i = 0; i < byteString.length; i += 1) {\r\n      ia[i] = byteString.charCodeAt(i);\r\n    }\r\n\r\n    return new Blob([ia], { type: mimeString });\r\n  }\r\n  /**\r\n  * Pulls the orientation tag out of the EXIF information of the image if any\r\n  *\r\n  * @param {ArrayBuffer} result\r\n  * @return {number} Orientation tag if any for the image in the array buffer\r\n  */\r\n  static getImageOrientation(result) {\r\n    if (!(result && result instanceof ArrayBuffer && result.byteLength !== undefined)) {\r\n      throw new Error('parameter must be of type  ArrayBuffer!');\r\n    }\r\n\r\n    const view = new DataView(result);\r\n    let marker = 0;\r\n    const length = view.byteLength;\r\n    let little;\r\n    let tags;\r\n    let offset = 2;\r\n    const defualtOrientation = -1;\r\n\r\n    if (view.getUint16(0, false) !== Constants.EXIF_FILE_FORMAT_PARAMS.JPG_START_MARKER) {\r\n      return -2;\r\n    }\r\n\r\n    const lastMarker = Constants.EXIF_FILE_FORMAT_PARAMS.LAST_MARKER;\r\n    const markerAnded = (marker & lastMarker); // eslint-disable-line no-bitwise\r\n\r\n    while (offset < length) {\r\n      marker = view.getUint16(offset, false);\r\n      offset += 2;\r\n\r\n      if (marker === Constants.EXIF_FILE_FORMAT_PARAMS.APP1_MARKER) {\r\n        offset += 2;\r\n        if (view.getUint32(offset, false) !== Constants.EXIF_FILE_FORMAT_PARAMS.EXIF_HEADER) {\r\n          return -1;\r\n        }\r\n\r\n        little = view.getUint16(offset += 6, false) ===\r\n                 Constants.EXIF_FILE_FORMAT_PARAMS.TIF_HEADER;\r\n        offset += view.getUint32(offset + 4, little);\r\n        tags = view.getUint16(offset, little);\r\n        offset += 2;\r\n\r\n        for (let i = 0; i < tags; i += 1) {\r\n          if (view.getUint16(offset + (i * 12), little) ===\r\n              Constants.EXIF_FILE_FORMAT_PARAMS.ORIENTATION_TAG) {\r\n            return view.getUint16(offset + (i * 12) + 8, little);\r\n          }\r\n        }\r\n      } else if (markerAnded !== Constants.EXIF_FILE_FORMAT_PARAMS.LAST_MARKER) {\r\n        break;\r\n      } else {\r\n        offset += view.getUint16(offset, false);\r\n      }\r\n    }\r\n\r\n    return defualtOrientation;\r\n  }\r\n\r\n  /**\r\n  * Converts a base64 string to an array buffer\r\n  *\r\n  * @param {Object} dataURI\r\n  * @return {ArrayBuffer} The base64 blob is converted to an array buffer\r\n  */\r\n  static base64ToArrayBuffer(dataURI) {\r\n    let byteString;\r\n    const uriSplit = dataURI.split(',');\r\n\r\n    if (uriSplit[0].indexOf('base64') >= 0) {\r\n      byteString = atob(uriSplit[1]);\r\n    } else {\r\n      byteString = decodeURI(uriSplit[1]);\r\n    }\r\n\r\n    const len = byteString.length;\r\n    const bytes = new Uint8Array(len);\r\n\r\n    for (let i = 0; i < len; i += 1) {\r\n      bytes[i] = byteString.charCodeAt(i);\r\n    }\r\n\r\n    return bytes.buffer;\r\n  }\r\n\r\n  /**\r\n  * Checks to see if the Image needs to be downsampled or rotated and does it\r\n  *\r\n  * @param {Integer} originalWidth width of the image\r\n  * @param {Integer} originalHeight height of the image\r\n  * @return {Object} with two parameters 'width' and 'height'\r\n  */\r\n  static calculateResizeParams(originalWidth, originalHeight) {\r\n    let imgWidth = originalWidth;\r\n    let imgHeight = originalHeight;\r\n\r\n    if (Math.max(originalWidth, originalHeight) >\r\n        Constants.DOWNSAMPLE_PARAMS.LONGEST_SIDE_MAXIMUM) {\r\n      throw new Error('Image dropped is too large for visual search!');\r\n    } else {\r\n      const aspectRatio = originalWidth / originalHeight;\r\n      if (originalWidth > originalHeight) {\r\n        if (originalWidth > Constants.DOWNSAMPLE_PARAMS.LONGEST_SIDE_DOWNSAMPLE_TO) {\r\n          imgWidth = Constants.DOWNSAMPLE_PARAMS.LONGEST_SIDE_DOWNSAMPLE_TO;\r\n          imgHeight = Constants.DOWNSAMPLE_PARAMS.LONGEST_SIDE_DOWNSAMPLE_TO / aspectRatio;\r\n        }\r\n      } else if (originalHeight > Constants.DOWNSAMPLE_PARAMS.LONGEST_SIDE_DOWNSAMPLE_TO) {\r\n        imgWidth = Constants.DOWNSAMPLE_PARAMS.LONGEST_SIDE_DOWNSAMPLE_TO * aspectRatio;\r\n        imgHeight = Constants.DOWNSAMPLE_PARAMS.LONGEST_SIDE_DOWNSAMPLE_TO;\r\n      }\r\n    }\r\n\r\n    const resizeParams = {};\r\n    resizeParams.width = imgWidth;\r\n    resizeParams.height = imgHeight;\r\n\r\n    return resizeParams;\r\n  }\r\n\r\n  /**\r\n  * Checks to see if the Image needs to be downsampled or rotated and does it\r\n  *\r\n  * @param {Image} img image to be downsampled\r\n  * @param {Integer} orientation EXIF orientation value\r\n  * @return {Blob} resized file\r\n  */\r\n  static resizeImage(img, orientation) {\r\n    // grab the original image width and height\r\n    const originalWidth = img.naturalWidth;\r\n    const originalHeight = img.naturalHeight;\r\n\r\n    const resizeParams = DownSamplingUtils.calculateResizeParams(originalWidth, originalHeight);\r\n\r\n    let imgWidth = resizeParams.width;\r\n    let imgHeight = resizeParams.height;\r\n\r\n    let canvas;\r\n    let ctx;\r\n    let cx = 0;\r\n    let cy = 0;\r\n    let degree = 0;\r\n    const orientationNeedsFlip = [2, 4, 5, 7];\r\n    let resizedFile;\r\n\r\n\r\n    // if we don't need to downsize but we do need to rotate or\r\n    // flip then lets use the original width/height\r\n    if (orientation !== 1 && imgWidth === 0 && imgHeight === 0) {\r\n      imgWidth = originalWidth;\r\n      imgHeight = originalHeight;\r\n    }\r\n\r\n    // if a new width and height was set then downsample to those dimensions\r\n    if (imgWidth > 0 && imgHeight > 0) {\r\n      // Create an empty canvas element\r\n      canvas = document.createElement('canvas');\r\n\r\n      // Copy the image contents to the canvas\r\n      ctx = canvas.getContext('2d');\r\n\r\n      // Calculate new x/y coorditates for image if needed\r\n      switch (orientation) {\r\n        case 5:\r\n        case 6:\r\n          degree = 90;\r\n          cy = imgHeight * (-1);\r\n          break;\r\n\r\n        case 3:\r\n        case 4:\r\n          degree = 180;\r\n          cx = imgWidth * (-1);\r\n          cy = imgHeight * (-1);\r\n          break;\r\n        case 7:\r\n        case 8:\r\n          degree = 270;\r\n          cx = imgWidth * (-1);\r\n          break;\r\n        default:\r\n        // ignore any other values\r\n      }\r\n\r\n      // if the rotation changes the aspect ratio of the image\r\n      // then use the image height for canvas width and vice versa\r\n      if (degree === 0 || degree === 180) {\r\n        canvas.width = imgWidth;\r\n        canvas.height = imgHeight;\r\n      } else {\r\n        canvas.width = imgHeight;\r\n        canvas.height = imgWidth;\r\n      }\r\n\r\n      // flip the image if needed\r\n      if (orientationNeedsFlip.indexOf(orientation) > -1) {\r\n        ctx.translate(imgHeight, 0);\r\n        ctx.scale(-1, 1);\r\n      }\r\n\r\n      if (degree > 0) {\r\n        ctx.rotate((degree * Math.PI) / 180);\r\n      }\r\n\r\n      ctx.drawImage(img, cx, cy, imgWidth, imgHeight);\r\n      resizedFile = DownSamplingUtils.dataURItoBlob(canvas.toDataURL('image/jpeg'));\r\n    }\r\n\r\n    // we have a properly sized file\r\n    return resizedFile;\r\n  }\r\n\r\n  /**\r\n  * Checks to see if the file needs to be downsampled or rotated and does it\r\n  *\r\n  * @param {Object} file\r\n  */\r\n  static downsampleAndFixOrientationImage(file) {\r\n    return new Promise((onSuccess, onFailure) => {\r\n      try {\r\n        if (!(/\\.(png|jpeg|jpg|gif)$/i).test(file.name)) {\r\n          throw new Error('Unsupported image extension.! AdobeStock supports only JPG, JPEG, PNG and GIF!');\r\n        }\r\n\r\n        const reader = new FileReader();\r\n        let orientation = -1;\r\n        // Since the File Object does not hold the size of an image\r\n        // we need to create a new image and assign it's src, so when\r\n        // the image is loaded we can calculate it's width and height:\r\n        const img = new Image();\r\n\r\n        reader.onload = () => {\r\n          img.onerror = () => {\r\n            onFailure('Unsupported filetype for visual search.!');\r\n          };\r\n\r\n          img.onload = () => {\r\n            try {\r\n              const resizedFile = DownSamplingUtils.resizeImage(img, orientation);\r\n              onSuccess(resizedFile);\r\n            } catch (err) {\r\n              onFailure(err.message);\r\n            }\r\n          };\r\n\r\n          // pull the orientation from the image\r\n          orientation = DownSamplingUtils.getImageOrientation(\r\n                        DownSamplingUtils.base64ToArrayBuffer(reader.result));\r\n\r\n          img.src = reader.result;\r\n        };\r\n\r\n        reader.readAsDataURL(file);\r\n      } catch (err) {\r\n        onFailure(err.message);\r\n      }\r\n    });\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/downSamplingUtils.js","import uuid from 'uuid';\r\nimport Constants from './../constants/constants';\r\n\r\n\r\nconst DECIMAL_RADIX = 10;\r\n\r\nexport default class Http {\r\n  /**\r\n   * Creates XMLHttpRequest object as per browser support\r\n   * @returns {XMLHttpRequest} XMLHttpRequest object reference\r\n   */\r\n  static getXhr() {\r\n    let xhr = null;\r\n\r\n    try {\r\n      // Chrome, Opera, Firefox, Safari\r\n      xhr = new XMLHttpRequest();\r\n    } catch (e1) {\r\n      // Internet Explorer Browsers\r\n      try {\r\n        xhr = new window.ActiveXObject('Msxml2.XMLHTTP');\r\n      } catch (e2) {\r\n        try {\r\n          xhr = new window.ActiveXObject('Microsoft.XMLHTTP');\r\n        } catch (e3) {\r\n          // do nothing\r\n        }\r\n      }\r\n    }\r\n\r\n    return xhr;\r\n  }\r\n\r\n  /**\r\n   * Does Ajax call as per settings provided\r\n   * @param {object} settings object for ajax request\r\n   * @param {string} accessToken to be sent with Authorization header\r\n   * @returns {promise} returns promise\r\n   */\r\n  static doXhr(settings) {\r\n    return new Promise((onSuccess, onError) => {\r\n      try {\r\n        const defaultSettings = {\r\n          async: true,\r\n          method: Constants.HTTPMETHOD.GET,\r\n          crossDomain: false,\r\n          contentType: 'application/x-www-form-urlencoded',\r\n          headers: {\r\n            'cache-control': 'no-cache',\r\n            'x-request-id': uuid(),\r\n          },\r\n        };\r\n\r\n        const resolvedSettings = Object.assign({}, defaultSettings, settings);\r\n\r\n        const xhr = Http.getXhr();\r\n\r\n        if (!xhr) {\r\n          throw new Error('Browser doesn\\'t support XHR!');\r\n        }\r\n\r\n        if (settings.headers) {\r\n          resolvedSettings.headers = Object.assign({}, defaultSettings.headers, settings.headers);\r\n        }\r\n\r\n        xhr.onreadystatechange = function onReadyStateChanged() {\r\n          if (this.readyState === 4 && this.status === 200) {\r\n            if (onSuccess) {\r\n              onSuccess(this.response);\r\n            }\r\n          } else if (this.readyState === 4 && parseInt(this.status / 100, DECIMAL_RADIX) === 4) {\r\n            if (onError) {\r\n              onError(this.response);\r\n            }\r\n          } else if (this.readyState === 4 && this.status !== 0) {\r\n            if (onError) {\r\n              onError(this.statusText);\r\n            }\r\n          } else if (this.readyState === 4) {\r\n            if (onError) {\r\n              onError(new Error('Request got aborted!'));\r\n            }\r\n          }\r\n        };\r\n\r\n        xhr.open(resolvedSettings.method, resolvedSettings.url, resolvedSettings.async);\r\n\r\n        // set the headers\r\n        Object.keys(resolvedSettings.headers).forEach((header) => {\r\n          xhr.setRequestHeader(header, resolvedSettings.headers[header]);\r\n        });\r\n\r\n        if (typeof resolvedSettings.contentType === 'string' && resolvedSettings.contentType) {\r\n          xhr.setRequestHeader('Content-type', resolvedSettings.contentType);\r\n        }\r\n\r\n        if (resolvedSettings.crossDomain) {\r\n          xhr.withCredentials = true;\r\n        }\r\n\r\n        xhr.responseType = 'json';\r\n\r\n        if (resolvedSettings.method === Constants.HTTPMETHOD.GET) {\r\n          xhr.send(null);\r\n        } else {\r\n          xhr.send(resolvedSettings.data);\r\n        }\r\n      } catch (er) {\r\n        if (onError) {\r\n          onError(er);\r\n        }\r\n      }\r\n    });\r\n  }\r\n}\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/utils/http.js","module.exports = {\"search\":\"https://stock.adobe.io/Rest/Media/1/Search/Files\",\"license_history\":\"https://stock.adobe.io/Rest/Libraries/1/Member/LicenseHistory\",\"category\":\"https://stock.adobe.io/Rest/Media/1/Search/Category\",\"category_tree\":\"https://stock.adobe.io/Rest/Media/1/Search/CategoryTree\",\"license\":\"https://stock.adobe.io/Rest/Libraries/1/Content/License\",\"license_info\":\"https://stock.adobe.io/Rest/Libraries/1/Content/Info\",\"user_profile\":\"https://stock.adobe.io/Rest/Libraries/1/Member/Profile\",\"abandon\":\"https://stock.adobe.io/Rest/Libraries/1/Member/Abandon\"}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./resources/prod_env.json\n// module id = 18\n// module chunks = 0","module.exports = {\"search\":\"https://stock-stage.adobe.io/Rest/Media/1/Search/Files\",\"license_history\":\"https://stock-stage.adobe.io/Rest/Libraries/1/Member/LicenseHistory\",\"category\":\"https://stock-stage.adobe.io/Rest/Media/1/Search/Category\",\"category_tree\":\"https://stock-stage.adobe.io/Rest/Media/1/Search/CategoryTree\",\"license\":\"https://stock-stage.adobe.io/Rest/Libraries/1/Content/License\",\"license_info\":\"https://stock-stage.adobe.io/Rest/Libraries/1/Content/Info\",\"user_profile\":\"https://stock-stage.adobe.io/Rest/Libraries/1/Member/Profile\",\"abandon\":\"https://stock-stage.adobe.io/Rest/Libraries/1/Member/Abandon\"}\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./resources/stage_env.json\n// module id = 19\n// module chunks = 0","/**\r\n * Copyright 2017 Adobe Systems Incorporated. All rights reserved.\r\n * This file is licensed to you under the Apache License, Version 2.0 (the \"License\");\r\n * you may not use this file except in compliance with the License. You may obtain a copy\r\n * of the License at http://www.apache.org/licenses/LICENSE-2.0\r\n */\r\nimport Utils from './utils/utils';\r\nimport Config from './config/config';\r\nimport StockApis from './api/stockApis';\r\nimport SearchFilesIterator from './models/searchFilesIterator';\r\nimport LicenseHistoryIterator from './models/licenseHistoryIterator';\r\nimport Constants from './constants/constants';\r\nimport QueryParamsUtils from './utils/queryParamsUtils';\r\nimport LicenseParamsUtils from './utils/licenseParamsUtils';\r\n\r\n/**\r\n * function to check if AdobeStock initialized properly\r\n * @returns {boolean} return true if AdobeStock initialized, false otherwise\r\n */\r\nfunction isAdobeStockInitialized() {\r\n  if (this.config.isConfigInitialized() && this.stockApis) {\r\n    return true;\r\n  }\r\n\r\n  return false;\r\n}\r\n\r\n/**\r\n * The Adobe Stock library class\r\n */\r\nclass AdobeStock {\r\n\r\n  /**\r\n   * Constructor for AdobeStock class\r\n   * @param {string} apiKey api key of the client used for the header for the api calls\r\n   * @param {string} product header for the api calls\r\n   * @param {Environment} targetEnv defines the set environment for the library\r\n   */\r\n  constructor(apiKey, product, targetEnv) {\r\n    this.config = new Config(apiKey, product, targetEnv);\r\n    this.stockApis = new StockApis(this.config);\r\n  }\r\n\r\n  /**\r\n   * Enum for stack environment\r\n   */\r\n  static get ENVIRONMENT() {\r\n    return Constants.ENVIRONMENT;\r\n  }\r\n\r\n  /**\r\n   * Enum for query params props\r\n   */\r\n  static get QUERY_PARAMS_PROPS() {\r\n    return Constants.QUERY_PARAMS_PROPS;\r\n  }\r\n\r\n  /**\r\n   * Enums for search parameters and results columns\r\n   */\r\n  static get SEARCH_PARAMS() {\r\n    return Constants.SEARCH_PARAMS;\r\n  }\r\n\r\n  static get LICENSE_HISTORY_SEARCH_PARAMS() {\r\n    return Constants.LICENSE_HISTORY_SEARCH_PARAMS;\r\n  }\r\n\r\n  static get SEARCH_PARAMS_TYPE() {\r\n    return Constants.SEARCH_PARAMS_TYPE;\r\n  }\r\n\r\n  static get SEARCH_PARAMS_ORDER() {\r\n    return Constants.SEARCH_PARAMS_ORDER;\r\n  }\r\n\r\n  static get SEARCH_PARAMS_ORIENTATION() {\r\n    return Constants.SEARCH_PARAMS_ORIENTATION;\r\n  }\r\n\r\n  static get SEARCH_PARAMS_HAS_RELEASES() {\r\n    return Constants.SEARCH_PARAMS_HAS_RELEASES;\r\n  }\r\n\r\n  static get SEARCH_PARAMS_3D_TYPES() {\r\n    return Constants.SEARCH_PARAMS_3D_TYPES;\r\n  }\r\n\r\n  static get SEARCH_PARAMS_TEMPLATE_CATEGORIES() {\r\n    return Constants.SEARCH_PARAMS_TEMPLATE_CATEGORIES;\r\n  }\r\n\r\n  static get SEARCH_PARAMS_TEMPLATE_TYPES() {\r\n    return Constants.SEARCH_PARAMS_TEMPLATE_TYPES;\r\n  }\r\n\r\n  static get SEARCH_PARAMS_THUMB_SIZES() {\r\n    return Constants.SEARCH_PARAMS_THUMB_SIZES;\r\n  }\r\n\r\n  static get SEARCH_PARAMS_AGE() {\r\n    return Constants.SEARCH_PARAMS_AGE;\r\n  }\r\n\r\n  static get SEARCH_PARAMS_VIDEO_DURATION() {\r\n    return Constants.SEARCH_PARAMS_VIDEO_DURATION;\r\n  }\r\n\r\n  static get SEARCH_PARAMS_PREMIUM() {\r\n    return Constants.SEARCH_PARAMS_PREMIUM;\r\n  }\r\n\r\n  static get RESULT_COLUMNS() {\r\n    return Constants.RESULT_COLUMNS;\r\n  }\r\n\r\n  static get LICENSE_HISTORY_RESULT_COLUMNS() {\r\n    return Constants.LICENSE_HISTORY_RESULT_COLUMNS;\r\n  }\r\n\r\n  static get LICENSE_STATE_PARAMS() {\r\n    return Constants.LICENSE_STATE_PARAMS;\r\n  }\r\n\r\n  static get PURCHASE_STATE_PARAMS() {\r\n    return Constants.PURCHASE_STATE_PARAMS;\r\n  }\r\n\r\n  /**\r\n   * function to search stock files by category id\r\n   * @param {string} accessToken (required) access token to be used for Authorization header\r\n   * @param {integer} categoryId (required) the identifier of category to be searched for files\r\n   * @param {string} locale (optional) location language code\r\n   * @param {object} filters (optional) of search_parameters\r\n   * @param {object} resultColumns (optional) desired result columns in the response\r\n   * @returns {SearchFilesIterator} object of SearchFilesIterator type\r\n   */\r\n  searchFilesByCategory(accessToken, categoryId, locale, filters, resultColumns) {\r\n    const queryParams = {\r\n      locale,\r\n      search_parameters: {\r\n        category: categoryId,\r\n      },\r\n    };\r\n\r\n    if (filters && Utils.isObject(filters)) {\r\n      Object.assign(queryParams.search_parameters, filters);\r\n    } else if (filters && !Utils.isObject(filters)) {\r\n      throw new Error('filters expects Object!');\r\n    }\r\n\r\n    return this.searchFiles(accessToken, queryParams, resultColumns);\r\n  }\r\n\r\n  /**\r\n   * function to search similar stock files by media id\r\n   * @param {string} accessToken (required) access token to be used for Authorization header\r\n   * @param {integer} mediaId (required) the identifier of media to be searched for similar files\r\n   * @param {string} locale (optional) location language code\r\n   * @param {object} filters (optional) of search_parameters\r\n   * @param {object} resultColumns (optional) desired result columns in the response\r\n   * @returns {SearchFilesIterator} object of SearchFilesIterator type\r\n   */\r\n  searchSimilarFilesById(accessToken, mediaId, locale, filters, resultColumns) {\r\n    const queryParams = {\r\n      locale,\r\n      search_parameters: {\r\n        similar: mediaId,\r\n      },\r\n    };\r\n\r\n    if (filters && Utils.isObject(filters)) {\r\n      Object.assign(queryParams.search_parameters, filters);\r\n    } else if (filters && !Utils.isObject(filters)) {\r\n      throw new Error('filters expects Object!');\r\n    }\r\n\r\n    return this.searchFiles(accessToken, queryParams, resultColumns);\r\n  }\r\n\r\n  /**\r\n   * function to search stock files by keywords\r\n   * @param {string} accessToken (required) access token to be used for Authorization header\r\n   * @param {string} keywords (required) the keywords to be searched for files\r\n   * @param {string} locale (optional) location language code\r\n   * @param {object} filters (optional) of search_parameters\r\n   * @param {object} resultColumns (optional) desired result columns in the response\r\n   * @returns {SearchFilesIterator} object of SearchFilesIterator type\r\n   */\r\n  searchFilesByKeywords(accessToken, keywords, locale, filters, resultColumns) {\r\n    const queryParams = {\r\n      locale,\r\n      search_parameters: {\r\n        words: keywords,\r\n      },\r\n    };\r\n\r\n    if (filters && Utils.isObject(filters)) {\r\n      Object.assign(queryParams.search_parameters, filters);\r\n    } else if (filters && !Utils.isObject(filters)) {\r\n      throw new Error('filters expects Object!');\r\n    }\r\n\r\n    return this.searchFiles(accessToken, queryParams, resultColumns);\r\n  }\r\n\r\n  /**\r\n   * function to search stock files by search params\r\n   * @param {string} accessToken (required) access token to be used for Authorization header\r\n   * @param {object} queryParams (optional) the params to be used for image search & filter\r\n   * @param {object} resultColumns (optional) desired result columns in the response\r\n   * @returns {SearchFilesIterator} object of SearchFilesIterator type\r\n   */\r\n  searchFiles(accessToken, queryParams, resultColumns) {\r\n    let localQueryParams = {};\r\n    let nbResultsPresent = false;\r\n\r\n    if (!isAdobeStockInitialized.call(this)) {\r\n      throw new Error('Library not initialized! Please initialize the library first.');\r\n    }\r\n\r\n    if (queryParams && Utils.isObject(queryParams)) {\r\n      localQueryParams = queryParams;\r\n    } else if (queryParams && !Utils.isObject(queryParams)) {\r\n      throw new Error('queryParams expects Object!');\r\n    }\r\n\r\n    if (resultColumns && Utils.isArray(resultColumns)) {\r\n      localQueryParams.result_columns = resultColumns;\r\n    } else if (resultColumns && !Utils.isArray(resultColumns)) {\r\n      throw new Error('resultColumns expects Array!');\r\n    }\r\n\r\n    QueryParamsUtils.validateSearchFileQueryParams(localQueryParams, accessToken);\r\n\r\n    // we need result column for hasMoreFiles & nextSearchFiles to work properly\r\n    nbResultsPresent = QueryParamsUtils.isNBResultsColumnPresent(localQueryParams);\r\n\r\n    if (!nbResultsPresent) {\r\n      localQueryParams = QueryParamsUtils.addResultColumnNBResults(localQueryParams);\r\n    }\r\n\r\n    return new SearchFilesIterator(this.stockApis,\r\n                                    accessToken,\r\n                                    localQueryParams,\r\n                                    nbResultsPresent);\r\n  }\r\n\r\n  /**\r\n   * function to get license history for a memeber\r\n   * @param {string} accessToken (required) access token to be used for Authorization header\r\n   * @param {object} queryParams (optional) the params to be used for getting license history\r\n   * @param {object} resultColumns (optional) desired result columns in the response\r\n   * @returns {LicenseHistoryIterator} object of LicenseHistoryIterator type\r\n   */\r\n  licenseHistory(accessToken, queryParams, resultColumns) {\r\n    let localQueryParams = {};\r\n    const nbResultsPresent = true;\r\n\r\n    if (!isAdobeStockInitialized.call(this)) {\r\n      throw new Error('Library not initialized! Please initialize the library first.');\r\n    }\r\n\r\n    if (queryParams && Utils.isObject(queryParams)) {\r\n      localQueryParams = queryParams;\r\n    } else if (queryParams && !Utils.isObject(queryParams)) {\r\n      throw new Error('queryParams expects Object!');\r\n    }\r\n\r\n    if (resultColumns && Utils.isArray(resultColumns)) {\r\n      localQueryParams.result_columns = resultColumns;\r\n    } else if (resultColumns && !Utils.isArray(resultColumns)) {\r\n      throw new Error('resultColumns expects Array!');\r\n    }\r\n\r\n    QueryParamsUtils.validateLicenseHistoryQueryParams(localQueryParams);\r\n\r\n    return new LicenseHistoryIterator(this.stockApis,\r\n                                    accessToken,\r\n                                    localQueryParams,\r\n                                    nbResultsPresent);\r\n  }\r\n\r\n  /**\r\n   * function to search stock files by search params\r\n   * @param {object} queryParams (optional) the params to be used for image search & filter\r\n   * @returns {promise} returns Promise object for category search call\r\n   */\r\n  searchCategory(queryParams) {\r\n    if (!isAdobeStockInitialized.call(this)) {\r\n      throw new Error('Library not initialized! Please initialize the library first.');\r\n    }\r\n\r\n    QueryParamsUtils.validateSearchCategoryQueryParams(queryParams);\r\n\r\n    return this.stockApis.searchCategory(queryParams);\r\n  }\r\n\r\n  /**\r\n   * function to search stock files by search params\r\n   * @param {object} queryParams (optional) the params to be used for image search & filter\r\n   * @returns {promise} returns Promise object for category tree search call\r\n   */\r\n  searchCategoryTree(queryParams) {\r\n    if (!isAdobeStockInitialized.call(this)) {\r\n      throw new Error('Library not initialized! Please initialize the library first.');\r\n    }\r\n\r\n    QueryParamsUtils.validateSearchCategoryTreeQueryParams(queryParams);\r\n\r\n    return this.stockApis.searchCategoryTree(queryParams);\r\n  }\r\n\r\n  /**\r\n   * function to acsess licensing capabilities for a specific user\r\n   * @param {string} accessToken (required) access token to be used for Authorization header\r\n   * @param {integer} contentId (optional) asset's unique identifer\r\n   * @param {string} license (optional) licensing state for the asset\r\n   * @param {string} locale (optional) location language code\r\n   * @returns {promise} promise which will give json data for member profile if found\r\n   */\r\n  accessMemberProfile(accessToken, contentId, license, locale) {\r\n    if (!isAdobeStockInitialized.call(this)) {\r\n      throw new Error('Library not initialized! Please initialize the library first.');\r\n    }\r\n\r\n    LicenseParamsUtils.validateMemberProfileLicenseParams(accessToken, contentId, license);\r\n\r\n    if (locale && typeof locale !== 'string') {\r\n      throw new Error('locale expects string only. For e.g. en-US, fr-FR etc.!');\r\n    }\r\n\r\n    return this.stockApis.accessMemberProfile(accessToken, contentId, license, locale);\r\n  }\r\n\r\n  /**\r\n   * Notifies the system when a user abandons a licensing operation\r\n   * @param {string} accessToken to be sent with Authorization header\r\n   * @param {integer} contentId (required) asset's unique identifer\r\n   * @param {string} state (required) user's purchase relationship to an asset\r\n   * @returns {promise} returns promise\r\n   */\r\n  memberAbandonLicensing(accessToken, contentId, state) {\r\n    if (!isAdobeStockInitialized.call(this)) {\r\n      throw new Error('Library not initialized! Please initialize the library first.');\r\n    }\r\n\r\n    LicenseParamsUtils.validateMemberAbandonLicenseParams(accessToken, contentId, state);\r\n\r\n    return this.stockApis.memberAbandon(accessToken, contentId, state);\r\n  }\r\n\r\n  /**\r\n   * Get licensing information about a specific asset for a specific user\r\n   * @param {string} accessToken (required) access token to be used for Authorization header\r\n   * @param {integer} contentId (required) asset's unique identifer\r\n   * @param {string} license (optional) licensing state for the asset.\r\n   * @returns {promise} promise which will give json data for licensing information\r\n   */\r\n  getLicenseInfoForContent(accessToken, contentId, license) {\r\n    if (!isAdobeStockInitialized.call(this)) {\r\n      throw new Error('Library not initialized! Please initialize the library first.');\r\n    }\r\n\r\n    LicenseParamsUtils.validateContentLicenseParams(accessToken, contentId, license);\r\n\r\n    return this.stockApis.licenseInfo(accessToken, contentId, license);\r\n  }\r\n\r\n  /**\r\n   * Requests a license for an asset for a specific user\r\n   * @param {string} accessToken (required) access token to be used for Authorization header\r\n   * @param {integer} contentId (required) asset's unique identifer\r\n   * @param {string} license (optional) licensing state for the asset.\r\n   * @param {array} cceAgency (optional) Specifies license references.\r\n   * @returns {promise} promise which will give json data with license info\r\n   * containing a download URL\r\n   */\r\n  requestLicenseForContent(accessToken, contentId, license, cceAgency) {\r\n    if (!isAdobeStockInitialized.call(this)) {\r\n      throw new Error('Library not initialized! Please initialize the library first.');\r\n    }\r\n\r\n    LicenseParamsUtils.validateContentLicenseParams(accessToken, contentId, license);\r\n\r\n    if (cceAgency) {\r\n      LicenseParamsUtils.validateReferenceData(cceAgency);\r\n    }\r\n\r\n    return this.stockApis.requestLicense(accessToken, contentId, license, cceAgency);\r\n  }\r\n\r\n  /**\r\n   * Download the asset if user has the asset already licensed\r\n   * @param {string} accessToken (required) access token to be used for Authorization header\r\n   * @param {integer} contentId (required) asset's unique identifer\r\n   * @param {string} license (optional) licensing state for the asset.\r\n   * @returns {promise} promise having url of asset as a response\r\n   */\r\n  downloadAsset(accessToken, contentId, license) {\r\n    if (!isAdobeStockInitialized.call(this)) {\r\n      throw new Error('Library not initialized! Please initialize the library first.');\r\n    }\r\n\r\n    LicenseParamsUtils.validateContentLicenseParams(accessToken, contentId, license);\r\n\r\n    return this.stockApis.downloadAsset(accessToken, contentId, license);\r\n  }\r\n}\r\n\r\nmodule.exports = AdobeStock;\r\n\n\n\n// WEBPACK FOOTER //\n// ./src/adobeStock.js"],"sourceRoot":""}